(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function hx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cm={exports:{}},qi={},dm={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ya=Symbol.for("react.element"),xx=Symbol.for("react.portal"),gx=Symbol.for("react.fragment"),fx=Symbol.for("react.strict_mode"),yx=Symbol.for("react.profiler"),vx=Symbol.for("react.provider"),jx=Symbol.for("react.context"),bx=Symbol.for("react.forward_ref"),Nx=Symbol.for("react.suspense"),wx=Symbol.for("react.memo"),_x=Symbol.for("react.lazy"),Cd=Symbol.iterator;function kx(e){return e===null||typeof e!="object"?null:(e=Cd&&e[Cd]||e["@@iterator"],typeof e=="function"?e:null)}var um={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mm=Object.assign,pm={};function pn(e,s,r){this.props=e,this.context=s,this.refs=pm,this.updater=r||um}pn.prototype.isReactComponent={};pn.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};pn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hm(){}hm.prototype=pn.prototype;function oc(e,s,r){this.props=e,this.context=s,this.refs=pm,this.updater=r||um}var lc=oc.prototype=new hm;lc.constructor=oc;mm(lc,pn.prototype);lc.isPureReactComponent=!0;var Ed=Array.isArray,xm=Object.prototype.hasOwnProperty,cc={current:null},gm={key:!0,ref:!0,__self:!0,__source:!0};function fm(e,s,r){var n,a={},i=null,o=null;if(s!=null)for(n in s.ref!==void 0&&(o=s.ref),s.key!==void 0&&(i=""+s.key),s)xm.call(s,n)&&!gm.hasOwnProperty(n)&&(a[n]=s[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:ya,type:e,key:i,ref:o,props:a,_owner:cc.current}}function Sx(e,s){return{$$typeof:ya,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function dc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ya}function Cx(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return s[r]})}var Pd=/\/+/g;function uo(e,s){return typeof e=="object"&&e!==null&&e.key!=null?Cx(""+e.key):s.toString(36)}function ei(e,s,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ya:case xx:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+uo(o,0):n,Ed(a)?(r="",e!=null&&(r=e.replace(Pd,"$&/")+"/"),ei(a,s,r,"",function(d){return d})):a!=null&&(dc(a)&&(a=Sx(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Pd,"$&/")+"/")+e)),s.push(a)),1;if(o=0,n=n===""?".":n+":",Ed(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+uo(i,l);o+=ei(i,s,r,c,a)}else if(c=kx(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+uo(i,l++),o+=ei(i,s,r,c,a);else if(i==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return o}function Ca(e,s,r){if(e==null)return e;var n=[],a=0;return ei(e,n,"","",function(i){return s.call(r,i,a++)}),n}function Ex(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var pt={current:null},ti={transition:null},Px={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:ti,ReactCurrentOwner:cc};function ym(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:Ca,forEach:function(e,s,r){Ca(e,function(){s.apply(this,arguments)},r)},count:function(e){var s=0;return Ca(e,function(){s++}),s},toArray:function(e){return Ca(e,function(s){return s})||[]},only:function(e){if(!dc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=pn;je.Fragment=gx;je.Profiler=yx;je.PureComponent=oc;je.StrictMode=fx;je.Suspense=Nx;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Px;je.act=ym;je.cloneElement=function(e,s,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=mm({},e.props),a=e.key,i=e.ref,o=e._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,o=cc.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in s)xm.call(s,c)&&!gm.hasOwnProperty(c)&&(n[c]=s[c]===void 0&&l!==void 0?l[c]:s[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:ya,type:e.type,key:a,ref:i,props:n,_owner:o}};je.createContext=function(e){return e={$$typeof:jx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vx,_context:e},e.Consumer=e};je.createElement=fm;je.createFactory=function(e){var s=fm.bind(null,e);return s.type=e,s};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:bx,render:e}};je.isValidElement=dc;je.lazy=function(e){return{$$typeof:_x,_payload:{_status:-1,_result:e},_init:Ex}};je.memo=function(e,s){return{$$typeof:wx,type:e,compare:s===void 0?null:s}};je.startTransition=function(e){var s=ti.transition;ti.transition={};try{e()}finally{ti.transition=s}};je.unstable_act=ym;je.useCallback=function(e,s){return pt.current.useCallback(e,s)};je.useContext=function(e){return pt.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return pt.current.useDeferredValue(e)};je.useEffect=function(e,s){return pt.current.useEffect(e,s)};je.useId=function(){return pt.current.useId()};je.useImperativeHandle=function(e,s,r){return pt.current.useImperativeHandle(e,s,r)};je.useInsertionEffect=function(e,s){return pt.current.useInsertionEffect(e,s)};je.useLayoutEffect=function(e,s){return pt.current.useLayoutEffect(e,s)};je.useMemo=function(e,s){return pt.current.useMemo(e,s)};je.useReducer=function(e,s,r){return pt.current.useReducer(e,s,r)};je.useRef=function(e){return pt.current.useRef(e)};je.useState=function(e){return pt.current.useState(e)};je.useSyncExternalStore=function(e,s,r){return pt.current.useSyncExternalStore(e,s,r)};je.useTransition=function(){return pt.current.useTransition()};je.version="18.3.1";dm.exports=je;var p=dm.exports;const Tt=hx(p);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx=p,zx=Symbol.for("react.element"),Ax=Symbol.for("react.fragment"),Lx=Object.prototype.hasOwnProperty,$x=Tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ix={key:!0,ref:!0,__self:!0,__source:!0};function vm(e,s,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(o=s.ref);for(n in s)Lx.call(s,n)&&!Ix.hasOwnProperty(n)&&(a[n]=s[n]);if(e&&e.defaultProps)for(n in s=e.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:zx,type:e,key:i,ref:o,props:a,_owner:$x.current}}qi.Fragment=Ax;qi.jsx=vm;qi.jsxs=vm;cm.exports=qi;var t=cm.exports,jm={exports:{}},Ct={},bm={exports:{}},Nm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(E,B){var Q=E.length;E.push(B);e:for(;0<Q;){var A=Q-1>>>1,W=E[A];if(0<a(W,B))E[A]=B,E[Q]=W,Q=A;else break e}}function r(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var B=E[0],Q=E.pop();if(Q!==B){E[0]=Q;e:for(var A=0,W=E.length,ee=W>>>1;A<ee;){var ie=2*(A+1)-1,v=E[ie],R=ie+1,U=E[R];if(0>a(v,Q))R<W&&0>a(U,v)?(E[A]=U,E[R]=Q,A=R):(E[A]=v,E[ie]=Q,A=ie);else if(R<W&&0>a(U,Q))E[A]=U,E[R]=Q,A=R;else break e}}return B}function a(E,B){var Q=E.sortIndex-B.sortIndex;return Q!==0?Q:E.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,u=null,f=3,g=!1,_=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(E){for(var B=r(d);B!==null;){if(B.callback===null)n(d);else if(B.startTime<=E)n(d),B.sortIndex=B.expirationTime,s(c,B);else break;B=r(d)}}function j(E){if(b=!1,m(E),!_)if(r(c)!==null)_=!0,I(C);else{var B=r(d);B!==null&&O(j,B.startTime-E)}}function C(E,B){_=!1,b&&(b=!1,x($),$=-1),g=!0;var Q=f;try{for(m(B),u=r(c);u!==null&&(!(u.expirationTime>B)||E&&!H());){var A=u.callback;if(typeof A=="function"){u.callback=null,f=u.priorityLevel;var W=A(u.expirationTime<=B);B=e.unstable_now(),typeof W=="function"?u.callback=W:u===r(c)&&n(c),m(B)}else n(c);u=r(c)}if(u!==null)var ee=!0;else{var ie=r(d);ie!==null&&O(j,ie.startTime-B),ee=!1}return ee}finally{u=null,f=Q,g=!1}}var F=!1,L=null,$=-1,P=5,z=-1;function H(){return!(e.unstable_now()-z<P)}function q(){if(L!==null){var E=e.unstable_now();z=E;var B=!0;try{B=L(!0,E)}finally{B?k():(F=!1,L=null)}}else F=!1}var k;if(typeof y=="function")k=function(){y(q)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,M=S.port2;S.port1.onmessage=q,k=function(){M.postMessage(null)}}else k=function(){w(q,0)};function I(E){L=E,F||(F=!0,k())}function O(E,B){$=w(function(){E(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){_||g||(_=!0,I(C))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(E){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var Q=f;f=B;try{return E()}finally{f=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,B){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var Q=f;f=E;try{return B()}finally{f=Q}},e.unstable_scheduleCallback=function(E,B,Q){var A=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?A+Q:A):Q=A,E){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Q+W,E={id:h++,callback:B,priorityLevel:E,startTime:Q,expirationTime:W,sortIndex:-1},Q>A?(E.sortIndex=Q,s(d,E),r(c)===null&&E===r(d)&&(b?(x($),$=-1):b=!0,O(j,Q-A))):(E.sortIndex=W,s(c,E),_||g||(_=!0,I(C))),E},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(E){var B=f;return function(){var Q=f;f=B;try{return E.apply(this,arguments)}finally{f=Q}}}})(Nm);bm.exports=Nm;var Mx=bm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx=p,kt=Mx;function Z(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wm=new Set,Yn={};function yr(e,s){rn(e,s),rn(e+"Capture",s)}function rn(e,s){for(Yn[e]=s,e=0;e<s.length;e++)wm.add(s[e])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ll=Object.prototype.hasOwnProperty,Rx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Td={},zd={};function Fx(e){return ll.call(zd,e)?!0:ll.call(Td,e)?!1:Rx.test(e)?zd[e]=!0:(Td[e]=!0,!1)}function Bx(e,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ox(e,s,r,n){if(s===null||typeof s>"u"||Bx(e,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function ht(e,s,r,n,a,i,o){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=s,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new ht(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];st[s]=new ht(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new ht(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new ht(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new ht(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new ht(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new ht(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new ht(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new ht(e,5,!1,e.toLowerCase(),null,!1,!1)});var uc=/[\-:]([a-z])/g;function mc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(uc,mc);st[s]=new ht(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(uc,mc);st[s]=new ht(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(uc,mc);st[s]=new ht(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new ht(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new ht(e,1,!1,e.toLowerCase(),null,!0,!0)});function pc(e,s,r,n){var a=st.hasOwnProperty(s)?st[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Ox(s,r,a,n)&&(r=null),n||a===null?Fx(s)&&(r===null?e.removeAttribute(s):e.setAttribute(s,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,s,r):e.setAttribute(s,r))))}var Ns=Dx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ea=Symbol.for("react.element"),Ir=Symbol.for("react.portal"),Mr=Symbol.for("react.fragment"),hc=Symbol.for("react.strict_mode"),cl=Symbol.for("react.profiler"),_m=Symbol.for("react.provider"),km=Symbol.for("react.context"),xc=Symbol.for("react.forward_ref"),dl=Symbol.for("react.suspense"),ul=Symbol.for("react.suspense_list"),gc=Symbol.for("react.memo"),Ss=Symbol.for("react.lazy"),Sm=Symbol.for("react.offscreen"),Ad=Symbol.iterator;function Cn(e){return e===null||typeof e!="object"?null:(e=Ad&&e[Ad]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Object.assign,mo;function Rn(e){if(mo===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);mo=s&&s[1]||""}return`
`+mo+e}var po=!1;function ho(e,s){if(!e||po)return"";po=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var n=d}Reflect.construct(e,[],s)}else{try{s.call()}catch(d){n=d}e.call(s.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{po=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Rn(e):""}function Ux(e){switch(e.tag){case 5:return Rn(e.type);case 16:return Rn("Lazy");case 13:return Rn("Suspense");case 19:return Rn("SuspenseList");case 0:case 2:case 15:return e=ho(e.type,!1),e;case 11:return e=ho(e.type.render,!1),e;case 1:return e=ho(e.type,!0),e;default:return""}}function ml(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mr:return"Fragment";case Ir:return"Portal";case cl:return"Profiler";case hc:return"StrictMode";case dl:return"Suspense";case ul:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case km:return(e.displayName||"Context")+".Consumer";case _m:return(e._context.displayName||"Context")+".Provider";case xc:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gc:return s=e.displayName||null,s!==null?s:ml(e.type)||"Memo";case Ss:s=e._payload,e=e._init;try{return ml(e(s))}catch{}}return null}function Hx(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ml(s);case 8:return s===hc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cm(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Vx(e){var s=Cm(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),n=""+e[s];if(!e.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Pa(e){e._valueTracker||(e._valueTracker=Vx(e))}function Em(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return e&&(n=Cm(e)?e.checked?"true":"false":e.value),e=n,e!==r?(s.setValue(e),!0):!1}function gi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pl(e,s){var r=s.checked;return Be({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ld(e,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=Us(s.value!=null?s.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Pm(e,s){s=s.checked,s!=null&&pc(e,"checked",s,!1)}function hl(e,s){Pm(e,s);var r=Us(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?xl(e,s.type,r):s.hasOwnProperty("defaultValue")&&xl(e,s.type,Us(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function $d(e,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,r||s===e.value||(e.value=s),e.defaultValue=s}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function xl(e,s,r){(s!=="number"||gi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fn=Array.isArray;function Jr(e,s,r,n){if(e=e.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=s.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Us(r),s=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function gl(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Be({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Id(e,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(Z(92));if(Fn(r)){if(1<r.length)throw Error(Z(93));r=r[0]}s=r}s==null&&(s=""),r=s}e._wrapperState={initialValue:Us(r)}}function Tm(e,s){var r=Us(s.value),n=Us(s.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),s.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Md(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function zm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fl(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?zm(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ta,Am=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(s,r,n,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(Ta=Ta||document.createElement("div"),Ta.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ta.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function Xn(e,s){if(s){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=s;return}}e.textContent=s}var Hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wx=["Webkit","ms","Moz","O"];Object.keys(Hn).forEach(function(e){Wx.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),Hn[s]=Hn[e]})});function Lm(e,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Hn.hasOwnProperty(e)&&Hn[e]?(""+s).trim():s+"px"}function $m(e,s){e=e.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Lm(r,s[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var qx=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yl(e,s){if(s){if(qx[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Z(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Z(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Z(62))}}function vl(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jl=null;function fc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bl=null,Gr=null,Qr=null;function Dd(e){if(e=ba(e)){if(typeof bl!="function")throw Error(Z(280));var s=e.stateNode;s&&(s=Ki(s),bl(e.stateNode,e.type,s))}}function Im(e){Gr?Qr?Qr.push(e):Qr=[e]:Gr=e}function Mm(){if(Gr){var e=Gr,s=Qr;if(Qr=Gr=null,Dd(e),s)for(e=0;e<s.length;e++)Dd(s[e])}}function Dm(e,s){return e(s)}function Rm(){}var xo=!1;function Fm(e,s,r){if(xo)return e(s,r);xo=!0;try{return Dm(e,s,r)}finally{xo=!1,(Gr!==null||Qr!==null)&&(Rm(),Mm())}}function ea(e,s){var r=e.stateNode;if(r===null)return null;var n=Ki(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Z(231,s,typeof r));return r}var Nl=!1;if(fs)try{var En={};Object.defineProperty(En,"passive",{get:function(){Nl=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{Nl=!1}function Jx(e,s,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(h){this.onError(h)}}var Vn=!1,fi=null,yi=!1,wl=null,Gx={onError:function(e){Vn=!0,fi=e}};function Qx(e,s,r,n,a,i,o,l,c){Vn=!1,fi=null,Jx.apply(Gx,arguments)}function Zx(e,s,r,n,a,i,o,l,c){if(Qx.apply(this,arguments),Vn){if(Vn){var d=fi;Vn=!1,fi=null}else throw Error(Z(198));yi||(yi=!0,wl=d)}}function vr(e){var s=e,r=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(r=s.return),e=s.return;while(e)}return s.tag===3?r:null}function Bm(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Rd(e){if(vr(e)!==e)throw Error(Z(188))}function Kx(e){var s=e.alternate;if(!s){if(s=vr(e),s===null)throw Error(Z(188));return s!==e?null:e}for(var r=e,n=s;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Rd(a),e;if(i===n)return Rd(a),s;i=i.sibling}throw Error(Z(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(Z(189))}}if(r.alternate!==n)throw Error(Z(190))}if(r.tag!==3)throw Error(Z(188));return r.stateNode.current===r?e:s}function Om(e){return e=Kx(e),e!==null?Um(e):null}function Um(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=Um(e);if(s!==null)return s;e=e.sibling}return null}var Hm=kt.unstable_scheduleCallback,Fd=kt.unstable_cancelCallback,Yx=kt.unstable_shouldYield,Xx=kt.unstable_requestPaint,Ve=kt.unstable_now,eg=kt.unstable_getCurrentPriorityLevel,yc=kt.unstable_ImmediatePriority,Vm=kt.unstable_UserBlockingPriority,vi=kt.unstable_NormalPriority,tg=kt.unstable_LowPriority,Wm=kt.unstable_IdlePriority,Ji=null,ts=null;function sg(e){if(ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(Ji,e,void 0,(e.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:ag,rg=Math.log,ng=Math.LN2;function ag(e){return e>>>=0,e===0?32:31-(rg(e)/ng|0)|0}var za=64,Aa=4194304;function Bn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ji(e,s){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Bn(l):(i&=o,i!==0&&(n=Bn(i)))}else o=r&~a,o!==0?n=Bn(o):i!==0&&(n=Bn(i));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,i=s&-s,a>=i||a===16&&(i&4194240)!==0))return s;if(n&4&&(n|=r&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=n;0<s;)r=31-Gt(s),a=1<<r,n|=e[r],s&=~a;return n}function ig(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function og(e,s){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Gt(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=ig(l,s)):c<=s&&(e.expiredLanes|=l),i&=~l}}function _l(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qm(){var e=za;return za<<=1,!(za&4194240)&&(za=64),e}function go(e){for(var s=[],r=0;31>r;r++)s.push(e);return s}function va(e,s,r){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-Gt(s),e[s]=r}function lg(e,s){var r=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Gt(r),i=1<<a;s[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function vc(e,s){var r=e.entangledLanes|=s;for(e=e.entanglements;r;){var n=31-Gt(r),a=1<<n;a&s|e[n]&s&&(e[n]|=s),r&=~a}}var Te=0;function Jm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gm,jc,Qm,Zm,Km,kl=!1,La=[],Ls=null,$s=null,Is=null,ta=new Map,sa=new Map,Es=[],cg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bd(e,s){switch(e){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":ta.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":sa.delete(s.pointerId)}}function Pn(e,s,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},s!==null&&(s=ba(s),s!==null&&jc(s)),e):(e.eventSystemFlags|=n,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function dg(e,s,r,n,a){switch(s){case"focusin":return Ls=Pn(Ls,e,s,r,n,a),!0;case"dragenter":return $s=Pn($s,e,s,r,n,a),!0;case"mouseover":return Is=Pn(Is,e,s,r,n,a),!0;case"pointerover":var i=a.pointerId;return ta.set(i,Pn(ta.get(i)||null,e,s,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,sa.set(i,Pn(sa.get(i)||null,e,s,r,n,a)),!0}return!1}function Ym(e){var s=ar(e.target);if(s!==null){var r=vr(s);if(r!==null){if(s=r.tag,s===13){if(s=Bm(r),s!==null){e.blockedOn=s,Km(e.priority,function(){Qm(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function si(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var r=Sl(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);jl=n,r.target.dispatchEvent(n),jl=null}else return s=ba(r),s!==null&&jc(s),e.blockedOn=r,!1;s.shift()}return!0}function Od(e,s,r){si(e)&&r.delete(s)}function ug(){kl=!1,Ls!==null&&si(Ls)&&(Ls=null),$s!==null&&si($s)&&($s=null),Is!==null&&si(Is)&&(Is=null),ta.forEach(Od),sa.forEach(Od)}function Tn(e,s){e.blockedOn===s&&(e.blockedOn=null,kl||(kl=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,ug)))}function ra(e){function s(a){return Tn(a,e)}if(0<La.length){Tn(La[0],e);for(var r=1;r<La.length;r++){var n=La[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ls!==null&&Tn(Ls,e),$s!==null&&Tn($s,e),Is!==null&&Tn(Is,e),ta.forEach(s),sa.forEach(s),r=0;r<Es.length;r++)n=Es[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Es.length&&(r=Es[0],r.blockedOn===null);)Ym(r),r.blockedOn===null&&Es.shift()}var Zr=Ns.ReactCurrentBatchConfig,bi=!0;function mg(e,s,r,n){var a=Te,i=Zr.transition;Zr.transition=null;try{Te=1,bc(e,s,r,n)}finally{Te=a,Zr.transition=i}}function pg(e,s,r,n){var a=Te,i=Zr.transition;Zr.transition=null;try{Te=4,bc(e,s,r,n)}finally{Te=a,Zr.transition=i}}function bc(e,s,r,n){if(bi){var a=Sl(e,s,r,n);if(a===null)So(e,s,n,Ni,r),Bd(e,n);else if(dg(a,e,s,r,n))n.stopPropagation();else if(Bd(e,n),s&4&&-1<cg.indexOf(e)){for(;a!==null;){var i=ba(a);if(i!==null&&Gm(i),i=Sl(e,s,r,n),i===null&&So(e,s,n,Ni,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else So(e,s,n,null,r)}}var Ni=null;function Sl(e,s,r,n){if(Ni=null,e=fc(n),e=ar(e),e!==null)if(s=vr(e),s===null)e=null;else if(r=s.tag,r===13){if(e=Bm(s),e!==null)return e;e=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return Ni=e,null}function Xm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eg()){case yc:return 1;case Vm:return 4;case vi:case tg:return 16;case Wm:return 536870912;default:return 16}default:return 16}}var Ts=null,Nc=null,ri=null;function ep(){if(ri)return ri;var e,s=Nc,r=s.length,n,a="value"in Ts?Ts.value:Ts.textContent,i=a.length;for(e=0;e<r&&s[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&s[r-n]===a[i-n];n++);return ri=a.slice(e,1<n?1-n:void 0)}function ni(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function $a(){return!0}function Ud(){return!1}function Et(e){function s(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$a:Ud,this.isPropagationStopped=Ud,this}return Be(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),s}var hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wc=Et(hn),ja=Be({},hn,{view:0,detail:0}),hg=Et(ja),fo,yo,zn,Gi=Be({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_c,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zn&&(zn&&e.type==="mousemove"?(fo=e.screenX-zn.screenX,yo=e.screenY-zn.screenY):yo=fo=0,zn=e),fo)},movementY:function(e){return"movementY"in e?e.movementY:yo}}),Hd=Et(Gi),xg=Be({},Gi,{dataTransfer:0}),gg=Et(xg),fg=Be({},ja,{relatedTarget:0}),vo=Et(fg),yg=Be({},hn,{animationName:0,elapsedTime:0,pseudoElement:0}),vg=Et(yg),jg=Be({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bg=Et(jg),Ng=Be({},hn,{data:0}),Vd=Et(Ng),wg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_g={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sg(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=kg[e])?!!s[e]:!1}function _c(){return Sg}var Cg=Be({},ja,{key:function(e){if(e.key){var s=wg[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_g[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_c,charCode:function(e){return e.type==="keypress"?ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Eg=Et(Cg),Pg=Be({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wd=Et(Pg),Tg=Be({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_c}),zg=Et(Tg),Ag=Be({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lg=Et(Ag),$g=Be({},Gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ig=Et($g),Mg=[9,13,27,32],kc=fs&&"CompositionEvent"in window,Wn=null;fs&&"documentMode"in document&&(Wn=document.documentMode);var Dg=fs&&"TextEvent"in window&&!Wn,tp=fs&&(!kc||Wn&&8<Wn&&11>=Wn),qd=" ",Jd=!1;function sp(e,s){switch(e){case"keyup":return Mg.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function Rg(e,s){switch(e){case"compositionend":return rp(s);case"keypress":return s.which!==32?null:(Jd=!0,qd);case"textInput":return e=s.data,e===qd&&Jd?null:e;default:return null}}function Fg(e,s){if(Dr)return e==="compositionend"||!kc&&sp(e,s)?(e=ep(),ri=Nc=Ts=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return tp&&s.locale!=="ko"?null:s.data;default:return null}}var Bg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!Bg[e.type]:s==="textarea"}function np(e,s,r,n){Im(n),s=wi(s,"onChange"),0<s.length&&(r=new wc("onChange","change",null,r,n),e.push({event:r,listeners:s}))}var qn=null,na=null;function Og(e){xp(e,0)}function Qi(e){var s=Br(e);if(Em(s))return e}function Ug(e,s){if(e==="change")return s}var ap=!1;if(fs){var jo;if(fs){var bo="oninput"in document;if(!bo){var Qd=document.createElement("div");Qd.setAttribute("oninput","return;"),bo=typeof Qd.oninput=="function"}jo=bo}else jo=!1;ap=jo&&(!document.documentMode||9<document.documentMode)}function Zd(){qn&&(qn.detachEvent("onpropertychange",ip),na=qn=null)}function ip(e){if(e.propertyName==="value"&&Qi(na)){var s=[];np(s,na,e,fc(e)),Fm(Og,s)}}function Hg(e,s,r){e==="focusin"?(Zd(),qn=s,na=r,qn.attachEvent("onpropertychange",ip)):e==="focusout"&&Zd()}function Vg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qi(na)}function Wg(e,s){if(e==="click")return Qi(s)}function qg(e,s){if(e==="input"||e==="change")return Qi(s)}function Jg(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Zt=typeof Object.is=="function"?Object.is:Jg;function aa(e,s){if(Zt(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var r=Object.keys(e),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!ll.call(s,a)||!Zt(e[a],s[a]))return!1}return!0}function Kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yd(e,s){var r=Kd(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=s&&n>=s)return{node:r,offset:s-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kd(r)}}function op(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?op(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function lp(){for(var e=window,s=gi();s instanceof e.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)e=s.contentWindow;else break;s=gi(e.document)}return s}function Sc(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function Gg(e){var s=lp(),r=e.focusedElem,n=e.selectionRange;if(s!==r&&r&&r.ownerDocument&&op(r.ownerDocument.documentElement,r)){if(n!==null&&Sc(r)){if(s=n.start,e=n.end,e===void 0&&(e=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(e,r.value.length);else if(e=(s=r.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Yd(r,i);var o=Yd(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(s),e.extend(o.node,o.offset)):(s.setEnd(o.node,o.offset),e.addRange(s)))}}for(s=[],e=r;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)e=s[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qg=fs&&"documentMode"in document&&11>=document.documentMode,Rr=null,Cl=null,Jn=null,El=!1;function Xd(e,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;El||Rr==null||Rr!==gi(n)||(n=Rr,"selectionStart"in n&&Sc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Jn&&aa(Jn,n)||(Jn=n,n=wi(Cl,"onSelect"),0<n.length&&(s=new wc("onSelect","select",null,s,r),e.push({event:s,listeners:n}),s.target=Rr)))}function Ia(e,s){var r={};return r[e.toLowerCase()]=s.toLowerCase(),r["Webkit"+e]="webkit"+s,r["Moz"+e]="moz"+s,r}var Fr={animationend:Ia("Animation","AnimationEnd"),animationiteration:Ia("Animation","AnimationIteration"),animationstart:Ia("Animation","AnimationStart"),transitionend:Ia("Transition","TransitionEnd")},No={},cp={};fs&&(cp=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function Zi(e){if(No[e])return No[e];if(!Fr[e])return e;var s=Fr[e],r;for(r in s)if(s.hasOwnProperty(r)&&r in cp)return No[e]=s[r];return e}var dp=Zi("animationend"),up=Zi("animationiteration"),mp=Zi("animationstart"),pp=Zi("transitionend"),hp=new Map,eu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(e,s){hp.set(e,s),yr(s,[e])}for(var wo=0;wo<eu.length;wo++){var _o=eu[wo],Zg=_o.toLowerCase(),Kg=_o[0].toUpperCase()+_o.slice(1);Qs(Zg,"on"+Kg)}Qs(dp,"onAnimationEnd");Qs(up,"onAnimationIteration");Qs(mp,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(pp,"onTransitionEnd");rn("onMouseEnter",["mouseout","mouseover"]);rn("onMouseLeave",["mouseout","mouseover"]);rn("onPointerEnter",["pointerout","pointerover"]);rn("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var On="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yg=new Set("cancel close invalid load scroll toggle".split(" ").concat(On));function tu(e,s,r){var n=e.type||"unknown-event";e.currentTarget=r,Zx(n,s,void 0,e),e.currentTarget=null}function xp(e,s){s=(s&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(s)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;tu(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;tu(a,l,d),i=c}}}if(yi)throw e=wl,yi=!1,wl=null,e}function Le(e,s){var r=s[Ll];r===void 0&&(r=s[Ll]=new Set);var n=e+"__bubble";r.has(n)||(gp(s,e,2,!1),r.add(n))}function ko(e,s,r){var n=0;s&&(n|=4),gp(r,e,n,s)}var Ma="_reactListening"+Math.random().toString(36).slice(2);function ia(e){if(!e[Ma]){e[Ma]=!0,wm.forEach(function(r){r!=="selectionchange"&&(Yg.has(r)||ko(r,!1,e),ko(r,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Ma]||(s[Ma]=!0,ko("selectionchange",!1,s))}}function gp(e,s,r,n){switch(Xm(s)){case 1:var a=mg;break;case 4:a=pg;break;default:a=bc}r=a.bind(null,s,r,e),a=void 0,!Nl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(s,r,{capture:!0,passive:a}):e.addEventListener(s,r,!0):a!==void 0?e.addEventListener(s,r,{passive:a}):e.addEventListener(s,r,!1)}function So(e,s,r,n,a){var i=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=ar(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Fm(function(){var d=i,h=fc(r),u=[];e:{var f=hp.get(e);if(f!==void 0){var g=wc,_=e;switch(e){case"keypress":if(ni(r)===0)break e;case"keydown":case"keyup":g=Eg;break;case"focusin":_="focus",g=vo;break;case"focusout":_="blur",g=vo;break;case"beforeblur":case"afterblur":g=vo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=gg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=zg;break;case dp:case up:case mp:g=vg;break;case pp:g=Lg;break;case"scroll":g=hg;break;case"wheel":g=Ig;break;case"copy":case"cut":case"paste":g=bg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Wd}var b=(s&4)!==0,w=!b&&e==="scroll",x=b?f!==null?f+"Capture":null:f;b=[];for(var y=d,m;y!==null;){m=y;var j=m.stateNode;if(m.tag===5&&j!==null&&(m=j,x!==null&&(j=ea(y,x),j!=null&&b.push(oa(y,j,m)))),w)break;y=y.return}0<b.length&&(f=new g(f,_,null,r,h),u.push({event:f,listeners:b}))}}if(!(s&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&r!==jl&&(_=r.relatedTarget||r.fromElement)&&(ar(_)||_[ys]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(_=r.relatedTarget||r.toElement,g=d,_=_?ar(_):null,_!==null&&(w=vr(_),_!==w||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=d),g!==_)){if(b=Hd,j="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(b=Wd,j="onPointerLeave",x="onPointerEnter",y="pointer"),w=g==null?f:Br(g),m=_==null?f:Br(_),f=new b(j,y+"leave",g,r,h),f.target=w,f.relatedTarget=m,j=null,ar(h)===d&&(b=new b(x,y+"enter",_,r,h),b.target=m,b.relatedTarget=w,j=b),w=j,g&&_)t:{for(b=g,x=_,y=0,m=b;m;m=wr(m))y++;for(m=0,j=x;j;j=wr(j))m++;for(;0<y-m;)b=wr(b),y--;for(;0<m-y;)x=wr(x),m--;for(;y--;){if(b===x||x!==null&&b===x.alternate)break t;b=wr(b),x=wr(x)}b=null}else b=null;g!==null&&su(u,f,g,b,!1),_!==null&&w!==null&&su(u,w,_,b,!0)}}e:{if(f=d?Br(d):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var C=Ug;else if(Gd(f))if(ap)C=qg;else{C=Vg;var F=Hg}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Wg);if(C&&(C=C(e,d))){np(u,C,r,h);break e}F&&F(e,f,d),e==="focusout"&&(F=f._wrapperState)&&F.controlled&&f.type==="number"&&xl(f,"number",f.value)}switch(F=d?Br(d):window,e){case"focusin":(Gd(F)||F.contentEditable==="true")&&(Rr=F,Cl=d,Jn=null);break;case"focusout":Jn=Cl=Rr=null;break;case"mousedown":El=!0;break;case"contextmenu":case"mouseup":case"dragend":El=!1,Xd(u,r,h);break;case"selectionchange":if(Qg)break;case"keydown":case"keyup":Xd(u,r,h)}var L;if(kc)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Dr?sp(e,r)&&($="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&($="onCompositionStart");$&&(tp&&r.locale!=="ko"&&(Dr||$!=="onCompositionStart"?$==="onCompositionEnd"&&Dr&&(L=ep()):(Ts=h,Nc="value"in Ts?Ts.value:Ts.textContent,Dr=!0)),F=wi(d,$),0<F.length&&($=new Vd($,e,null,r,h),u.push({event:$,listeners:F}),L?$.data=L:(L=rp(r),L!==null&&($.data=L)))),(L=Dg?Rg(e,r):Fg(e,r))&&(d=wi(d,"onBeforeInput"),0<d.length&&(h=new Vd("onBeforeInput","beforeinput",null,r,h),u.push({event:h,listeners:d}),h.data=L))}xp(u,s)})}function oa(e,s,r){return{instance:e,listener:s,currentTarget:r}}function wi(e,s){for(var r=s+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ea(e,r),i!=null&&n.unshift(oa(e,i,a)),i=ea(e,s),i!=null&&n.push(oa(e,i,a))),e=e.return}return n}function wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function su(e,s,r,n,a){for(var i=s._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=ea(r,i),c!=null&&o.unshift(oa(r,c,l))):a||(c=ea(r,i),c!=null&&o.push(oa(r,c,l)))),r=r.return}o.length!==0&&e.push({event:s,listeners:o})}var Xg=/\r\n?/g,ef=/\u0000|\uFFFD/g;function ru(e){return(typeof e=="string"?e:""+e).replace(Xg,`
`).replace(ef,"")}function Da(e,s,r){if(s=ru(s),ru(e)!==s&&r)throw Error(Z(425))}function _i(){}var Pl=null,Tl=null;function zl(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Al=typeof setTimeout=="function"?setTimeout:void 0,tf=typeof clearTimeout=="function"?clearTimeout:void 0,nu=typeof Promise=="function"?Promise:void 0,sf=typeof queueMicrotask=="function"?queueMicrotask:typeof nu<"u"?function(e){return nu.resolve(null).then(e).catch(rf)}:Al;function rf(e){setTimeout(function(){throw e})}function Co(e,s){var r=s,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),ra(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);ra(s)}function Ms(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function au(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return e;s--}else r==="/$"&&s++}e=e.previousSibling}return null}var xn=Math.random().toString(36).slice(2),es="__reactFiber$"+xn,la="__reactProps$"+xn,ys="__reactContainer$"+xn,Ll="__reactEvents$"+xn,nf="__reactListeners$"+xn,af="__reactHandles$"+xn;function ar(e){var s=e[es];if(s)return s;for(var r=e.parentNode;r;){if(s=r[ys]||r[es]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(e=au(e);e!==null;){if(r=e[es])return r;e=au(e)}return s}e=r,r=e.parentNode}return null}function ba(e){return e=e[es]||e[ys],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Br(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function Ki(e){return e[la]||null}var $l=[],Or=-1;function Zs(e){return{current:e}}function $e(e){0>Or||(e.current=$l[Or],$l[Or]=null,Or--)}function Ae(e,s){Or++,$l[Or]=e.current,e.current=s}var Hs={},it=Zs(Hs),yt=Zs(!1),ur=Hs;function nn(e,s){var r=e.type.contextTypes;if(!r)return Hs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=s[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function vt(e){return e=e.childContextTypes,e!=null}function ki(){$e(yt),$e(it)}function iu(e,s,r){if(it.current!==Hs)throw Error(Z(168));Ae(it,s),Ae(yt,r)}function fp(e,s,r){var n=e.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(Z(108,Hx(e)||"Unknown",a));return Be({},r,n)}function Si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hs,ur=it.current,Ae(it,e),Ae(yt,yt.current),!0}function ou(e,s,r){var n=e.stateNode;if(!n)throw Error(Z(169));r?(e=fp(e,s,ur),n.__reactInternalMemoizedMergedChildContext=e,$e(yt),$e(it),Ae(it,e)):$e(yt),Ae(yt,r)}var ds=null,Yi=!1,Eo=!1;function yp(e){ds===null?ds=[e]:ds.push(e)}function of(e){Yi=!0,yp(e)}function Ks(){if(!Eo&&ds!==null){Eo=!0;var e=0,s=Te;try{var r=ds;for(Te=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ds=null,Yi=!1}catch(a){throw ds!==null&&(ds=ds.slice(e+1)),Hm(yc,Ks),a}finally{Te=s,Eo=!1}}return null}var Ur=[],Hr=0,Ci=null,Ei=0,zt=[],At=0,mr=null,us=1,ms="";function rr(e,s){Ur[Hr++]=Ei,Ur[Hr++]=Ci,Ci=e,Ei=s}function vp(e,s,r){zt[At++]=us,zt[At++]=ms,zt[At++]=mr,mr=e;var n=us;e=ms;var a=32-Gt(n)-1;n&=~(1<<a),r+=1;var i=32-Gt(s)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,us=1<<32-Gt(s)+a|r<<a|n,ms=i+e}else us=1<<i|r<<a|n,ms=e}function Cc(e){e.return!==null&&(rr(e,1),vp(e,1,0))}function Ec(e){for(;e===Ci;)Ci=Ur[--Hr],Ur[Hr]=null,Ei=Ur[--Hr],Ur[Hr]=null;for(;e===mr;)mr=zt[--At],zt[At]=null,ms=zt[--At],zt[At]=null,us=zt[--At],zt[At]=null}var _t=null,wt=null,Ie=!1,Jt=null;function jp(e,s){var r=Lt(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=e,s=e.deletions,s===null?(e.deletions=[r],e.flags|=16):s.push(r)}function lu(e,s){switch(e.tag){case 5:var r=e.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,_t=e,wt=Ms(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,_t=e,wt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=mr!==null?{id:us,overflow:ms}:null,e.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=Lt(18,null,null,0),r.stateNode=s,r.return=e,e.child=r,_t=e,wt=null,!0):!1;default:return!1}}function Il(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ml(e){if(Ie){var s=wt;if(s){var r=s;if(!lu(e,s)){if(Il(e))throw Error(Z(418));s=Ms(r.nextSibling);var n=_t;s&&lu(e,s)?jp(n,r):(e.flags=e.flags&-4097|2,Ie=!1,_t=e)}}else{if(Il(e))throw Error(Z(418));e.flags=e.flags&-4097|2,Ie=!1,_t=e}}}function cu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function Ra(e){if(e!==_t)return!1;if(!Ie)return cu(e),Ie=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!zl(e.type,e.memoizedProps)),s&&(s=wt)){if(Il(e))throw bp(),Error(Z(418));for(;s;)jp(e,s),s=Ms(s.nextSibling)}if(cu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(s===0){wt=Ms(e.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}e=e.nextSibling}wt=null}}else wt=_t?Ms(e.stateNode.nextSibling):null;return!0}function bp(){for(var e=wt;e;)e=Ms(e.nextSibling)}function an(){wt=_t=null,Ie=!1}function Pc(e){Jt===null?Jt=[e]:Jt.push(e)}var lf=Ns.ReactCurrentBatchConfig;function An(e,s,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Z(309));var n=r.stateNode}if(!n)throw Error(Z(147,e));var a=n,i=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},s._stringRef=i,s)}if(typeof e!="string")throw Error(Z(284));if(!r._owner)throw Error(Z(290,e))}return e}function Fa(e,s){throw e=Object.prototype.toString.call(s),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function du(e){var s=e._init;return s(e._payload)}function Np(e){function s(x,y){if(e){var m=x.deletions;m===null?(x.deletions=[y],x.flags|=16):m.push(y)}}function r(x,y){if(!e)return null;for(;y!==null;)s(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=Bs(x,y),x.index=0,x.sibling=null,x}function i(x,y,m){return x.index=m,e?(m=x.alternate,m!==null?(m=m.index,m<y?(x.flags|=2,y):m):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,m,j){return y===null||y.tag!==6?(y=Io(m,x.mode,j),y.return=x,y):(y=a(y,m),y.return=x,y)}function c(x,y,m,j){var C=m.type;return C===Mr?h(x,y,m.props.children,j,m.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ss&&du(C)===y.type)?(j=a(y,m.props),j.ref=An(x,y,m),j.return=x,j):(j=ui(m.type,m.key,m.props,null,x.mode,j),j.ref=An(x,y,m),j.return=x,j)}function d(x,y,m,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==m.containerInfo||y.stateNode.implementation!==m.implementation?(y=Mo(m,x.mode,j),y.return=x,y):(y=a(y,m.children||[]),y.return=x,y)}function h(x,y,m,j,C){return y===null||y.tag!==7?(y=dr(m,x.mode,j,C),y.return=x,y):(y=a(y,m),y.return=x,y)}function u(x,y,m){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Io(""+y,x.mode,m),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ea:return m=ui(y.type,y.key,y.props,null,x.mode,m),m.ref=An(x,null,y),m.return=x,m;case Ir:return y=Mo(y,x.mode,m),y.return=x,y;case Ss:var j=y._init;return u(x,j(y._payload),m)}if(Fn(y)||Cn(y))return y=dr(y,x.mode,m,null),y.return=x,y;Fa(x,y)}return null}function f(x,y,m,j){var C=y!==null?y.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return C!==null?null:l(x,y,""+m,j);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ea:return m.key===C?c(x,y,m,j):null;case Ir:return m.key===C?d(x,y,m,j):null;case Ss:return C=m._init,f(x,y,C(m._payload),j)}if(Fn(m)||Cn(m))return C!==null?null:h(x,y,m,j,null);Fa(x,m)}return null}function g(x,y,m,j,C){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(m)||null,l(y,x,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ea:return x=x.get(j.key===null?m:j.key)||null,c(y,x,j,C);case Ir:return x=x.get(j.key===null?m:j.key)||null,d(y,x,j,C);case Ss:var F=j._init;return g(x,y,m,F(j._payload),C)}if(Fn(j)||Cn(j))return x=x.get(m)||null,h(y,x,j,C,null);Fa(y,j)}return null}function _(x,y,m,j){for(var C=null,F=null,L=y,$=y=0,P=null;L!==null&&$<m.length;$++){L.index>$?(P=L,L=null):P=L.sibling;var z=f(x,L,m[$],j);if(z===null){L===null&&(L=P);break}e&&L&&z.alternate===null&&s(x,L),y=i(z,y,$),F===null?C=z:F.sibling=z,F=z,L=P}if($===m.length)return r(x,L),Ie&&rr(x,$),C;if(L===null){for(;$<m.length;$++)L=u(x,m[$],j),L!==null&&(y=i(L,y,$),F===null?C=L:F.sibling=L,F=L);return Ie&&rr(x,$),C}for(L=n(x,L);$<m.length;$++)P=g(L,x,$,m[$],j),P!==null&&(e&&P.alternate!==null&&L.delete(P.key===null?$:P.key),y=i(P,y,$),F===null?C=P:F.sibling=P,F=P);return e&&L.forEach(function(H){return s(x,H)}),Ie&&rr(x,$),C}function b(x,y,m,j){var C=Cn(m);if(typeof C!="function")throw Error(Z(150));if(m=C.call(m),m==null)throw Error(Z(151));for(var F=C=null,L=y,$=y=0,P=null,z=m.next();L!==null&&!z.done;$++,z=m.next()){L.index>$?(P=L,L=null):P=L.sibling;var H=f(x,L,z.value,j);if(H===null){L===null&&(L=P);break}e&&L&&H.alternate===null&&s(x,L),y=i(H,y,$),F===null?C=H:F.sibling=H,F=H,L=P}if(z.done)return r(x,L),Ie&&rr(x,$),C;if(L===null){for(;!z.done;$++,z=m.next())z=u(x,z.value,j),z!==null&&(y=i(z,y,$),F===null?C=z:F.sibling=z,F=z);return Ie&&rr(x,$),C}for(L=n(x,L);!z.done;$++,z=m.next())z=g(L,x,$,z.value,j),z!==null&&(e&&z.alternate!==null&&L.delete(z.key===null?$:z.key),y=i(z,y,$),F===null?C=z:F.sibling=z,F=z);return e&&L.forEach(function(q){return s(x,q)}),Ie&&rr(x,$),C}function w(x,y,m,j){if(typeof m=="object"&&m!==null&&m.type===Mr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ea:e:{for(var C=m.key,F=y;F!==null;){if(F.key===C){if(C=m.type,C===Mr){if(F.tag===7){r(x,F.sibling),y=a(F,m.props.children),y.return=x,x=y;break e}}else if(F.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ss&&du(C)===F.type){r(x,F.sibling),y=a(F,m.props),y.ref=An(x,F,m),y.return=x,x=y;break e}r(x,F);break}else s(x,F);F=F.sibling}m.type===Mr?(y=dr(m.props.children,x.mode,j,m.key),y.return=x,x=y):(j=ui(m.type,m.key,m.props,null,x.mode,j),j.ref=An(x,y,m),j.return=x,x=j)}return o(x);case Ir:e:{for(F=m.key;y!==null;){if(y.key===F)if(y.tag===4&&y.stateNode.containerInfo===m.containerInfo&&y.stateNode.implementation===m.implementation){r(x,y.sibling),y=a(y,m.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else s(x,y);y=y.sibling}y=Mo(m,x.mode,j),y.return=x,x=y}return o(x);case Ss:return F=m._init,w(x,y,F(m._payload),j)}if(Fn(m))return _(x,y,m,j);if(Cn(m))return b(x,y,m,j);Fa(x,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,y!==null&&y.tag===6?(r(x,y.sibling),y=a(y,m),y.return=x,x=y):(r(x,y),y=Io(m,x.mode,j),y.return=x,x=y),o(x)):r(x,y)}return w}var on=Np(!0),wp=Np(!1),Pi=Zs(null),Ti=null,Vr=null,Tc=null;function zc(){Tc=Vr=Ti=null}function Ac(e){var s=Pi.current;$e(Pi),e._currentValue=s}function Dl(e,s,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),e===r)break;e=e.return}}function Kr(e,s){Ti=e,Tc=Vr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(gt=!0),e.firstContext=null)}function Dt(e){var s=e._currentValue;if(Tc!==e)if(e={context:e,memoizedValue:s,next:null},Vr===null){if(Ti===null)throw Error(Z(308));Vr=e,Ti.dependencies={lanes:0,firstContext:e}}else Vr=Vr.next=e;return s}var ir=null;function Lc(e){ir===null?ir=[e]:ir.push(e)}function _p(e,s,r,n){var a=s.interleaved;return a===null?(r.next=r,Lc(s)):(r.next=a.next,a.next=r),s.interleaved=r,vs(e,n)}function vs(e,s){e.lanes|=s;var r=e.alternate;for(r!==null&&(r.lanes|=s),r=e,e=e.return;e!==null;)e.childLanes|=s,r=e.alternate,r!==null&&(r.childLanes|=s),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Cs=!1;function $c(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kp(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hs(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function Ds(e,s,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,be&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,vs(e,r)}return a=n.interleaved,a===null?(s.next=s,Lc(n)):(s.next=a.next,a.next=s),n.interleaved=s,vs(e,r)}function ai(e,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,vc(e,r)}}function uu(e,s){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=s:i=i.next=s}else a=i=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=s:e.next=s,r.lastBaseUpdate=s}function zi(e,s,r,n){var a=e.updateQueue;Cs=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var u=a.baseState;o=0,h=d=c=null,l=i;do{var f=l.lane,g=l.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=e,b=l;switch(f=s,g=r,b.tag){case 1:if(_=b.payload,typeof _=="function"){u=_.call(g,u,f);break e}u=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=b.payload,f=typeof _=="function"?_.call(g,u,f):_,f==null)break e;u=Be({},u,f);break e;case 2:Cs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=g,c=u):h=h.next=g,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(h===null&&(c=u),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=h,s=a.shared.interleaved,s!==null){a=s;do o|=a.lane,a=a.next;while(a!==s)}else i===null&&(a.shared.lanes=0);hr|=o,e.lanes=o,e.memoizedState=u}}function mu(e,s,r){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var n=e[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Z(191,a));a.call(n)}}}var Na={},ss=Zs(Na),ca=Zs(Na),da=Zs(Na);function or(e){if(e===Na)throw Error(Z(174));return e}function Ic(e,s){switch(Ae(da,s),Ae(ca,e),Ae(ss,Na),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:fl(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=fl(s,e)}$e(ss),Ae(ss,s)}function ln(){$e(ss),$e(ca),$e(da)}function Sp(e){or(da.current);var s=or(ss.current),r=fl(s,e.type);s!==r&&(Ae(ca,e),Ae(ss,r))}function Mc(e){ca.current===e&&($e(ss),$e(ca))}var Re=Zs(0);function Ai(e){for(var s=e;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Po=[];function Dc(){for(var e=0;e<Po.length;e++)Po[e]._workInProgressVersionPrimary=null;Po.length=0}var ii=Ns.ReactCurrentDispatcher,To=Ns.ReactCurrentBatchConfig,pr=0,Fe=null,Qe=null,Ke=null,Li=!1,Gn=!1,ua=0,cf=0;function rt(){throw Error(Z(321))}function Rc(e,s){if(s===null)return!1;for(var r=0;r<s.length&&r<e.length;r++)if(!Zt(e[r],s[r]))return!1;return!0}function Fc(e,s,r,n,a,i){if(pr=i,Fe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ii.current=e===null||e.memoizedState===null?pf:hf,e=r(n,a),Gn){i=0;do{if(Gn=!1,ua=0,25<=i)throw Error(Z(301));i+=1,Ke=Qe=null,s.updateQueue=null,ii.current=xf,e=r(n,a)}while(Gn)}if(ii.current=$i,s=Qe!==null&&Qe.next!==null,pr=0,Ke=Qe=Fe=null,Li=!1,s)throw Error(Z(300));return e}function Bc(){var e=ua!==0;return ua=0,e}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Fe.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function Rt(){if(Qe===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var s=Ke===null?Fe.memoizedState:Ke.next;if(s!==null)Ke=s,Qe=e;else{if(e===null)throw Error(Z(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Ke===null?Fe.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function ma(e,s){return typeof s=="function"?s(e):s}function zo(e){var s=Rt(),r=s.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=e;var n=Qe,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((pr&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var u={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,o=n):c=c.next=u,Fe.lanes|=h,hr|=h}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Zt(n,s.memoizedState)||(gt=!0),s.memoizedState=n,s.baseState=o,s.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Fe.lanes|=i,hr|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function Ao(e){var s=Rt(),r=s.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=s.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Zt(i,s.memoizedState)||(gt=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),r.lastRenderedState=i}return[i,n]}function Cp(){}function Ep(e,s){var r=Fe,n=Rt(),a=s(),i=!Zt(n.memoizedState,a);if(i&&(n.memoizedState=a,gt=!0),n=n.queue,Oc(zp.bind(null,r,n,e),[e]),n.getSnapshot!==s||i||Ke!==null&&Ke.memoizedState.tag&1){if(r.flags|=2048,pa(9,Tp.bind(null,r,n,a,s),void 0,null),Xe===null)throw Error(Z(349));pr&30||Pp(r,s,a)}return a}function Pp(e,s,r){e.flags|=16384,e={getSnapshot:s,value:r},s=Fe.updateQueue,s===null?(s={lastEffect:null,stores:null},Fe.updateQueue=s,s.stores=[e]):(r=s.stores,r===null?s.stores=[e]:r.push(e))}function Tp(e,s,r,n){s.value=r,s.getSnapshot=n,Ap(s)&&Lp(e)}function zp(e,s,r){return r(function(){Ap(s)&&Lp(e)})}function Ap(e){var s=e.getSnapshot;e=e.value;try{var r=s();return!Zt(e,r)}catch{return!0}}function Lp(e){var s=vs(e,1);s!==null&&Qt(s,e,1,-1)}function pu(e){var s=Xt();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:e},s.queue=e,e=e.dispatch=mf.bind(null,Fe,e),[s.memoizedState,e]}function pa(e,s,r,n){return e={tag:e,create:s,destroy:r,deps:n,next:null},s=Fe.updateQueue,s===null?(s={lastEffect:null,stores:null},Fe.updateQueue=s,s.lastEffect=e.next=e):(r=s.lastEffect,r===null?s.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,s.lastEffect=e)),e}function $p(){return Rt().memoizedState}function oi(e,s,r,n){var a=Xt();Fe.flags|=e,a.memoizedState=pa(1|s,r,void 0,n===void 0?null:n)}function Xi(e,s,r,n){var a=Rt();n=n===void 0?null:n;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,n!==null&&Rc(n,o.deps)){a.memoizedState=pa(s,r,i,n);return}}Fe.flags|=e,a.memoizedState=pa(1|s,r,i,n)}function hu(e,s){return oi(8390656,8,e,s)}function Oc(e,s){return Xi(2048,8,e,s)}function Ip(e,s){return Xi(4,2,e,s)}function Mp(e,s){return Xi(4,4,e,s)}function Dp(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function Rp(e,s,r){return r=r!=null?r.concat([e]):null,Xi(4,4,Dp.bind(null,s,e),r)}function Uc(){}function Fp(e,s){var r=Rt();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&Rc(s,n[1])?n[0]:(r.memoizedState=[e,s],e)}function Bp(e,s){var r=Rt();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&Rc(s,n[1])?n[0]:(e=e(),r.memoizedState=[e,s],e)}function Op(e,s,r){return pr&21?(Zt(r,s)||(r=qm(),Fe.lanes|=r,hr|=r,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=r)}function df(e,s){var r=Te;Te=r!==0&&4>r?r:4,e(!0);var n=To.transition;To.transition={};try{e(!1),s()}finally{Te=r,To.transition=n}}function Up(){return Rt().memoizedState}function uf(e,s,r){var n=Fs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Hp(e))Vp(s,r);else if(r=_p(e,s,r,n),r!==null){var a=ut();Qt(r,e,n,a),Wp(r,s,n)}}function mf(e,s,r){var n=Fs(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Hp(e))Vp(s,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var o=s.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Zt(l,o)){var c=s.interleaved;c===null?(a.next=a,Lc(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}r=_p(e,s,a,n),r!==null&&(a=ut(),Qt(r,e,n,a),Wp(r,s,n))}}function Hp(e){var s=e.alternate;return e===Fe||s!==null&&s===Fe}function Vp(e,s){Gn=Li=!0;var r=e.pending;r===null?s.next=s:(s.next=r.next,r.next=s),e.pending=s}function Wp(e,s,r){if(r&4194240){var n=s.lanes;n&=e.pendingLanes,r|=n,s.lanes=r,vc(e,r)}}var $i={readContext:Dt,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},pf={readContext:Dt,useCallback:function(e,s){return Xt().memoizedState=[e,s===void 0?null:s],e},useContext:Dt,useEffect:hu,useImperativeHandle:function(e,s,r){return r=r!=null?r.concat([e]):null,oi(4194308,4,Dp.bind(null,s,e),r)},useLayoutEffect:function(e,s){return oi(4194308,4,e,s)},useInsertionEffect:function(e,s){return oi(4,2,e,s)},useMemo:function(e,s){var r=Xt();return s=s===void 0?null:s,e=e(),r.memoizedState=[e,s],e},useReducer:function(e,s,r){var n=Xt();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=uf.bind(null,Fe,e),[n.memoizedState,e]},useRef:function(e){var s=Xt();return e={current:e},s.memoizedState=e},useState:pu,useDebugValue:Uc,useDeferredValue:function(e){return Xt().memoizedState=e},useTransition:function(){var e=pu(!1),s=e[0];return e=df.bind(null,e[1]),Xt().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,r){var n=Fe,a=Xt();if(Ie){if(r===void 0)throw Error(Z(407));r=r()}else{if(r=s(),Xe===null)throw Error(Z(349));pr&30||Pp(n,s,r)}a.memoizedState=r;var i={value:r,getSnapshot:s};return a.queue=i,hu(zp.bind(null,n,i,e),[e]),n.flags|=2048,pa(9,Tp.bind(null,n,i,r,s),void 0,null),r},useId:function(){var e=Xt(),s=Xe.identifierPrefix;if(Ie){var r=ms,n=us;r=(n&~(1<<32-Gt(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=ua++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=cf++,s=":"+s+"r"+r.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},hf={readContext:Dt,useCallback:Fp,useContext:Dt,useEffect:Oc,useImperativeHandle:Rp,useInsertionEffect:Ip,useLayoutEffect:Mp,useMemo:Bp,useReducer:zo,useRef:$p,useState:function(){return zo(ma)},useDebugValue:Uc,useDeferredValue:function(e){var s=Rt();return Op(s,Qe.memoizedState,e)},useTransition:function(){var e=zo(ma)[0],s=Rt().memoizedState;return[e,s]},useMutableSource:Cp,useSyncExternalStore:Ep,useId:Up,unstable_isNewReconciler:!1},xf={readContext:Dt,useCallback:Fp,useContext:Dt,useEffect:Oc,useImperativeHandle:Rp,useInsertionEffect:Ip,useLayoutEffect:Mp,useMemo:Bp,useReducer:Ao,useRef:$p,useState:function(){return Ao(ma)},useDebugValue:Uc,useDeferredValue:function(e){var s=Rt();return Qe===null?s.memoizedState=e:Op(s,Qe.memoizedState,e)},useTransition:function(){var e=Ao(ma)[0],s=Rt().memoizedState;return[e,s]},useMutableSource:Cp,useSyncExternalStore:Ep,useId:Up,unstable_isNewReconciler:!1};function Wt(e,s){if(e&&e.defaultProps){s=Be({},s),e=e.defaultProps;for(var r in e)s[r]===void 0&&(s[r]=e[r]);return s}return s}function Rl(e,s,r,n){s=e.memoizedState,r=r(n,s),r=r==null?s:Be({},s,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var eo={isMounted:function(e){return(e=e._reactInternals)?vr(e)===e:!1},enqueueSetState:function(e,s,r){e=e._reactInternals;var n=ut(),a=Fs(e),i=hs(n,a);i.payload=s,r!=null&&(i.callback=r),s=Ds(e,i,a),s!==null&&(Qt(s,e,a,n),ai(s,e,a))},enqueueReplaceState:function(e,s,r){e=e._reactInternals;var n=ut(),a=Fs(e),i=hs(n,a);i.tag=1,i.payload=s,r!=null&&(i.callback=r),s=Ds(e,i,a),s!==null&&(Qt(s,e,a,n),ai(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var r=ut(),n=Fs(e),a=hs(r,n);a.tag=2,s!=null&&(a.callback=s),s=Ds(e,a,n),s!==null&&(Qt(s,e,n,r),ai(s,e,n))}};function xu(e,s,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):s.prototype&&s.prototype.isPureReactComponent?!aa(r,n)||!aa(a,i):!0}function qp(e,s,r){var n=!1,a=Hs,i=s.contextType;return typeof i=="object"&&i!==null?i=Dt(i):(a=vt(s)?ur:it.current,n=s.contextTypes,i=(n=n!=null)?nn(e,a):Hs),s=new s(r,i),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=eo,e.stateNode=s,s._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),s}function gu(e,s,r,n){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==e&&eo.enqueueReplaceState(s,s.state,null)}function Fl(e,s,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},$c(e);var i=s.contextType;typeof i=="object"&&i!==null?a.context=Dt(i):(i=vt(s)?ur:it.current,a.context=nn(e,i)),a.state=e.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(Rl(e,s,i,r),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&eo.enqueueReplaceState(a,a.state,null),zi(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function cn(e,s){try{var r="",n=s;do r+=Ux(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:s,stack:a,digest:null}}function Lo(e,s,r){return{value:e,source:null,stack:r??null,digest:s??null}}function Bl(e,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var gf=typeof WeakMap=="function"?WeakMap:Map;function Jp(e,s,r){r=hs(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){Mi||(Mi=!0,Zl=n),Bl(e,s)},r}function Gp(e,s,r){r=hs(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){Bl(e,s)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Bl(e,s),typeof n!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})}),r}function fu(e,s,r){var n=e.pingCache;if(n===null){n=e.pingCache=new gf;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),e=Tf.bind(null,e,s,r),s.then(e,e))}function yu(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function vu(e,s,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=hs(-1,1),s.tag=2,Ds(r,s,1))),r.lanes|=1),e)}var ff=Ns.ReactCurrentOwner,gt=!1;function dt(e,s,r,n){s.child=e===null?wp(s,null,r,n):on(s,e.child,r,n)}function ju(e,s,r,n,a){r=r.render;var i=s.ref;return Kr(s,a),n=Fc(e,s,r,n,i,a),r=Bc(),e!==null&&!gt?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,js(e,s,a)):(Ie&&r&&Cc(s),s.flags|=1,dt(e,s,n,a),s.child)}function bu(e,s,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Zc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=i,Qp(e,s,i,n,a)):(e=ui(r.type,null,n,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:aa,r(o,n)&&e.ref===s.ref)return js(e,s,a)}return s.flags|=1,e=Bs(i,n),e.ref=s.ref,e.return=s,s.child=e}function Qp(e,s,r,n,a){if(e!==null){var i=e.memoizedProps;if(aa(i,n)&&e.ref===s.ref)if(gt=!1,s.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(gt=!0);else return s.lanes=e.lanes,js(e,s,a)}return Ol(e,s,r,n,a)}function Zp(e,s,r){var n=s.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(qr,Nt),Nt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,Ae(qr,Nt),Nt|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ae(qr,Nt),Nt|=n}else i!==null?(n=i.baseLanes|r,s.memoizedState=null):n=r,Ae(qr,Nt),Nt|=n;return dt(e,s,a,r),s.child}function Kp(e,s){var r=s.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Ol(e,s,r,n,a){var i=vt(r)?ur:it.current;return i=nn(s,i),Kr(s,a),r=Fc(e,s,r,n,i,a),n=Bc(),e!==null&&!gt?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,js(e,s,a)):(Ie&&n&&Cc(s),s.flags|=1,dt(e,s,r,a),s.child)}function Nu(e,s,r,n,a){if(vt(r)){var i=!0;Si(s)}else i=!1;if(Kr(s,a),s.stateNode===null)li(e,s),qp(s,r,n),Fl(s,r,n,a),n=!0;else if(e===null){var o=s.stateNode,l=s.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Dt(d):(d=vt(r)?ur:it.current,d=nn(s,d));var h=r.getDerivedStateFromProps,u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&gu(s,o,n,d),Cs=!1;var f=s.memoizedState;o.state=f,zi(s,n,o,a),c=s.memoizedState,l!==n||f!==c||yt.current||Cs?(typeof h=="function"&&(Rl(s,r,h,n),c=s.memoizedState),(l=Cs||xu(s,r,l,n,f,c,d))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(s.flags|=4194308)):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{o=s.stateNode,kp(e,s),l=s.memoizedProps,d=s.type===s.elementType?l:Wt(s.type,l),o.props=d,u=s.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Dt(c):(c=vt(r)?ur:it.current,c=nn(s,c));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==u||f!==c)&&gu(s,o,n,c),Cs=!1,f=s.memoizedState,o.state=f,zi(s,n,o,a);var _=s.memoizedState;l!==u||f!==_||yt.current||Cs?(typeof g=="function"&&(Rl(s,r,g,n),_=s.memoizedState),(d=Cs||xu(s,r,d,n,f,_,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,_,c)),typeof o.componentDidUpdate=="function"&&(s.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=_),o.props=n,o.state=_,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(s.flags|=1024),n=!1)}return Ul(e,s,r,n,i,a)}function Ul(e,s,r,n,a,i){Kp(e,s);var o=(s.flags&128)!==0;if(!n&&!o)return a&&ou(s,r,!1),js(e,s,i);n=s.stateNode,ff.current=s;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,e!==null&&o?(s.child=on(s,e.child,null,i),s.child=on(s,null,l,i)):dt(e,s,l,i),s.memoizedState=n.state,a&&ou(s,r,!0),s.child}function Yp(e){var s=e.stateNode;s.pendingContext?iu(e,s.pendingContext,s.pendingContext!==s.context):s.context&&iu(e,s.context,!1),Ic(e,s.containerInfo)}function wu(e,s,r,n,a){return an(),Pc(a),s.flags|=256,dt(e,s,r,n),s.child}var Hl={dehydrated:null,treeContext:null,retryLane:0};function Vl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xp(e,s,r){var n=s.pendingProps,a=Re.current,i=!1,o=(s.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ae(Re,a&1),e===null)return Ml(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(o=n.children,e=n.fallback,i?(n=s.mode,i=s.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ro(o,n,0,null),e=dr(e,n,r,null),i.return=s,e.return=s,i.sibling=e,s.child=i,s.child.memoizedState=Vl(r),s.memoizedState=Hl,e):Hc(s,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return yf(e,s,o,n,l,a,r);if(i){i=n.fallback,o=s.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=c,s.deletions=null):(n=Bs(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Bs(l,i):(i=dr(i,o,r,null),i.flags|=2),i.return=s,n.return=s,n.sibling=i,s.child=n,n=i,i=s.child,o=e.child.memoizedState,o=o===null?Vl(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,s.memoizedState=Hl,n}return i=e.child,e=i.sibling,n=Bs(i,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,e!==null&&(r=s.deletions,r===null?(s.deletions=[e],s.flags|=16):r.push(e)),s.child=n,s.memoizedState=null,n}function Hc(e,s){return s=ro({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function Ba(e,s,r,n){return n!==null&&Pc(n),on(s,e.child,null,r),e=Hc(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function yf(e,s,r,n,a,i,o){if(r)return s.flags&256?(s.flags&=-257,n=Lo(Error(Z(422))),Ba(e,s,o,n)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(i=n.fallback,a=s.mode,n=ro({mode:"visible",children:n.children},a,0,null),i=dr(i,a,o,null),i.flags|=2,n.return=s,i.return=s,n.sibling=i,s.child=n,s.mode&1&&on(s,e.child,null,o),s.child.memoizedState=Vl(o),s.memoizedState=Hl,i);if(!(s.mode&1))return Ba(e,s,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Z(419)),n=Lo(i,n,void 0),Ba(e,s,o,n)}if(l=(o&e.childLanes)!==0,gt||l){if(n=Xe,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,vs(e,a),Qt(n,e,a,-1))}return Qc(),n=Lo(Error(Z(421))),Ba(e,s,o,n)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=zf.bind(null,e),a._reactRetry=s,null):(e=i.treeContext,wt=Ms(a.nextSibling),_t=s,Ie=!0,Jt=null,e!==null&&(zt[At++]=us,zt[At++]=ms,zt[At++]=mr,us=e.id,ms=e.overflow,mr=s),s=Hc(s,n.children),s.flags|=4096,s)}function _u(e,s,r){e.lanes|=s;var n=e.alternate;n!==null&&(n.lanes|=s),Dl(e.return,s,r)}function $o(e,s,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function eh(e,s,r){var n=s.pendingProps,a=n.revealOrder,i=n.tail;if(dt(e,s,n.children,r),n=Re.current,n&2)n=n&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_u(e,r,s);else if(e.tag===19)_u(e,r,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ae(Re,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)e=r.alternate,e!==null&&Ai(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),$o(s,!1,a,r,i);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&Ai(e)===null){s.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}$o(s,!0,r,null,i);break;case"together":$o(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function li(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function js(e,s,r){if(e!==null&&(s.dependencies=e.dependencies),hr|=s.lanes,!(r&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(Z(153));if(s.child!==null){for(e=s.child,r=Bs(e,e.pendingProps),s.child=r,r.return=s;e.sibling!==null;)e=e.sibling,r=r.sibling=Bs(e,e.pendingProps),r.return=s;r.sibling=null}return s.child}function vf(e,s,r){switch(s.tag){case 3:Yp(s),an();break;case 5:Sp(s);break;case 1:vt(s.type)&&Si(s);break;case 4:Ic(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;Ae(Pi,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(Ae(Re,Re.current&1),s.flags|=128,null):r&s.child.childLanes?Xp(e,s,r):(Ae(Re,Re.current&1),e=js(e,s,r),e!==null?e.sibling:null);Ae(Re,Re.current&1);break;case 19:if(n=(r&s.childLanes)!==0,e.flags&128){if(n)return eh(e,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ae(Re,Re.current),n)break;return null;case 22:case 23:return s.lanes=0,Zp(e,s,r)}return js(e,s,r)}var th,Wl,sh,rh;th=function(e,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Wl=function(){};sh=function(e,s,r,n){var a=e.memoizedProps;if(a!==n){e=s.stateNode,or(ss.current);var i=null;switch(r){case"input":a=pl(e,a),n=pl(e,n),i=[];break;case"select":a=Be({},a,{value:void 0}),n=Be({},n,{value:void 0}),i=[];break;case"textarea":a=gl(e,a),n=gl(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=_i)}yl(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Yn.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Yn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Le("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};rh=function(e,s,r,n){r!==n&&(s.flags|=4)};function Ln(e,s){if(!Ie)switch(e.tailMode){case"hidden":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function nt(e){var s=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(s)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,s}function jf(e,s,r){var n=s.pendingProps;switch(Ec(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(s),null;case 1:return vt(s.type)&&ki(),nt(s),null;case 3:return n=s.stateNode,ln(),$e(yt),$e(it),Dc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ra(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Jt!==null&&(Xl(Jt),Jt=null))),Wl(e,s),nt(s),null;case 5:Mc(s);var a=or(da.current);if(r=s.type,e!==null&&s.stateNode!=null)sh(e,s,r,n,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(Z(166));return nt(s),null}if(e=or(ss.current),Ra(s)){n=s.stateNode,r=s.type;var i=s.memoizedProps;switch(n[es]=s,n[la]=i,e=(s.mode&1)!==0,r){case"dialog":Le("cancel",n),Le("close",n);break;case"iframe":case"object":case"embed":Le("load",n);break;case"video":case"audio":for(a=0;a<On.length;a++)Le(On[a],n);break;case"source":Le("error",n);break;case"img":case"image":case"link":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"input":Ld(n,i),Le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Le("invalid",n);break;case"textarea":Id(n,i),Le("invalid",n)}yl(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Da(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Da(n.textContent,l,e),a=["children",""+l]):Yn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Le("scroll",n)}switch(r){case"input":Pa(n),$d(n,i,!0);break;case"textarea":Pa(n),Md(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=_i)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zm(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[es]=s,e[la]=n,th(e,s,!1,!1),s.stateNode=e;e:{switch(o=vl(r,n),r){case"dialog":Le("cancel",e),Le("close",e),a=n;break;case"iframe":case"object":case"embed":Le("load",e),a=n;break;case"video":case"audio":for(a=0;a<On.length;a++)Le(On[a],e);a=n;break;case"source":Le("error",e),a=n;break;case"img":case"image":case"link":Le("error",e),Le("load",e),a=n;break;case"details":Le("toggle",e),a=n;break;case"input":Ld(e,n),a=pl(e,n),Le("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Be({},n,{value:void 0}),Le("invalid",e);break;case"textarea":Id(e,n),a=gl(e,n),Le("invalid",e);break;default:a=n}yl(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?$m(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Am(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Xn(e,c):typeof c=="number"&&Xn(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Le("scroll",e):c!=null&&pc(e,i,c,o))}switch(r){case"input":Pa(e),$d(e,n,!1);break;case"textarea":Pa(e),Md(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Us(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Jr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Jr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=_i)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return nt(s),null;case 6:if(e&&s.stateNode!=null)rh(e,s,e.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(Z(166));if(r=or(da.current),or(ss.current),Ra(s)){if(n=s.stateNode,r=s.memoizedProps,n[es]=s,(i=n.nodeValue!==r)&&(e=_t,e!==null))switch(e.tag){case 3:Da(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Da(n.nodeValue,r,(e.mode&1)!==0)}i&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[es]=s,s.stateNode=n}return nt(s),null;case 13:if($e(Re),n=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&wt!==null&&s.mode&1&&!(s.flags&128))bp(),an(),s.flags|=98560,i=!1;else if(i=Ra(s),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Z(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[es]=s}else an(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;nt(s),i=!1}else Jt!==null&&(Xl(Jt),Jt=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(e===null||Re.current&1?Ze===0&&(Ze=3):Qc())),s.updateQueue!==null&&(s.flags|=4),nt(s),null);case 4:return ln(),Wl(e,s),e===null&&ia(s.stateNode.containerInfo),nt(s),null;case 10:return Ac(s.type._context),nt(s),null;case 17:return vt(s.type)&&ki(),nt(s),null;case 19:if($e(Re),i=s.memoizedState,i===null)return nt(s),null;if(n=(s.flags&128)!==0,o=i.rendering,o===null)if(n)Ln(i,!1);else{if(Ze!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(o=Ai(e),o!==null){for(s.flags|=128,Ln(i,!1),n=o.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ae(Re,Re.current&1|2),s.child}e=e.sibling}i.tail!==null&&Ve()>dn&&(s.flags|=128,n=!0,Ln(i,!1),s.lanes=4194304)}else{if(!n)if(e=Ai(o),e!==null){if(s.flags|=128,n=!0,r=e.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Ln(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ie)return nt(s),null}else 2*Ve()-i.renderingStartTime>dn&&r!==1073741824&&(s.flags|=128,n=!0,Ln(i,!1),s.lanes=4194304);i.isBackwards?(o.sibling=s.child,s.child=o):(r=i.last,r!==null?r.sibling=o:s.child=o,i.last=o)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=Ve(),s.sibling=null,r=Re.current,Ae(Re,n?r&1|2:r&1),s):(nt(s),null);case 22:case 23:return Gc(),n=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?Nt&1073741824&&(nt(s),s.subtreeFlags&6&&(s.flags|=8192)):nt(s),null;case 24:return null;case 25:return null}throw Error(Z(156,s.tag))}function bf(e,s){switch(Ec(s),s.tag){case 1:return vt(s.type)&&ki(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return ln(),$e(yt),$e(it),Dc(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Mc(s),null;case 13:if($e(Re),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(Z(340));an()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return $e(Re),null;case 4:return ln(),null;case 10:return Ac(s.type._context),null;case 22:case 23:return Gc(),null;case 24:return null;default:return null}}var Oa=!1,at=!1,Nf=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Wr(e,s){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ue(e,s,n)}else r.current=null}function ql(e,s,r){try{r()}catch(n){Ue(e,s,n)}}var ku=!1;function wf(e,s){if(Pl=bi,e=lp(),Sc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,h=0,u=e,f=null;t:for(;;){for(var g;u!==r||a!==0&&u.nodeType!==3||(l=o+a),u!==i||n!==0&&u.nodeType!==3||(c=o+n),u.nodeType===3&&(o+=u.nodeValue.length),(g=u.firstChild)!==null;)f=u,u=g;for(;;){if(u===e)break t;if(f===r&&++d===a&&(l=o),f===i&&++h===n&&(c=o),(g=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Tl={focusedElem:e,selectionRange:r},bi=!1,ne=s;ne!==null;)if(s=ne,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,ne=e;else for(;ne!==null;){s=ne;try{var _=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,w=_.memoizedState,x=s.stateNode,y=x.getSnapshotBeforeUpdate(s.elementType===s.type?b:Wt(s.type,b),w);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var m=s.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(j){Ue(s,s.return,j)}if(e=s.sibling,e!==null){e.return=s.return,ne=e;break}ne=s.return}return _=ku,ku=!1,_}function Qn(e,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&ql(s,r,i)}a=a.next}while(a!==n)}}function to(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function Jl(e){var s=e.ref;if(s!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof s=="function"?s(e):s.current=e}}function nh(e){var s=e.alternate;s!==null&&(e.alternate=null,nh(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[es],delete s[la],delete s[Ll],delete s[nf],delete s[af])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ah(e){return e.tag===5||e.tag===3||e.tag===4}function Su(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ah(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gl(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(e,s):r.insertBefore(e,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(e,r)):(s=r,s.appendChild(e)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=_i));else if(n!==4&&(e=e.child,e!==null))for(Gl(e,s,r),e=e.sibling;e!==null;)Gl(e,s,r),e=e.sibling}function Ql(e,s,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,s?r.insertBefore(e,s):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ql(e,s,r),e=e.sibling;e!==null;)Ql(e,s,r),e=e.sibling}var et=null,qt=!1;function ws(e,s,r){for(r=r.child;r!==null;)ih(e,s,r),r=r.sibling}function ih(e,s,r){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(Ji,r)}catch{}switch(r.tag){case 5:at||Wr(r,s);case 6:var n=et,a=qt;et=null,ws(e,s,r),et=n,qt=a,et!==null&&(qt?(e=et,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):et.removeChild(r.stateNode));break;case 18:et!==null&&(qt?(e=et,r=r.stateNode,e.nodeType===8?Co(e.parentNode,r):e.nodeType===1&&Co(e,r),ra(e)):Co(et,r.stateNode));break;case 4:n=et,a=qt,et=r.stateNode.containerInfo,qt=!0,ws(e,s,r),et=n,qt=a;break;case 0:case 11:case 14:case 15:if(!at&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ql(r,s,o),a=a.next}while(a!==n)}ws(e,s,r);break;case 1:if(!at&&(Wr(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ue(r,s,l)}ws(e,s,r);break;case 21:ws(e,s,r);break;case 22:r.mode&1?(at=(n=at)||r.memoizedState!==null,ws(e,s,r),at=n):ws(e,s,r);break;default:ws(e,s,r)}}function Cu(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Nf),s.forEach(function(n){var a=Af.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ht(e,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=s,l=o;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,qt=!1;break e;case 3:et=l.stateNode.containerInfo,qt=!0;break e;case 4:et=l.stateNode.containerInfo,qt=!0;break e}l=l.return}if(et===null)throw Error(Z(160));ih(i,o,a),et=null,qt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Ue(a,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)oh(s,e),s=s.sibling}function oh(e,s){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ht(s,e),Yt(e),n&4){try{Qn(3,e,e.return),to(3,e)}catch(b){Ue(e,e.return,b)}try{Qn(5,e,e.return)}catch(b){Ue(e,e.return,b)}}break;case 1:Ht(s,e),Yt(e),n&512&&r!==null&&Wr(r,r.return);break;case 5:if(Ht(s,e),Yt(e),n&512&&r!==null&&Wr(r,r.return),e.flags&32){var a=e.stateNode;try{Xn(a,"")}catch(b){Ue(e,e.return,b)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Pm(a,i),vl(l,o);var d=vl(l,i);for(o=0;o<c.length;o+=2){var h=c[o],u=c[o+1];h==="style"?$m(a,u):h==="dangerouslySetInnerHTML"?Am(a,u):h==="children"?Xn(a,u):pc(a,h,u,d)}switch(l){case"input":hl(a,i);break;case"textarea":Tm(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Jr(a,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?Jr(a,!!i.multiple,i.defaultValue,!0):Jr(a,!!i.multiple,i.multiple?[]:"",!1))}a[la]=i}catch(b){Ue(e,e.return,b)}}break;case 6:if(Ht(s,e),Yt(e),n&4){if(e.stateNode===null)throw Error(Z(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(b){Ue(e,e.return,b)}}break;case 3:if(Ht(s,e),Yt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ra(s.containerInfo)}catch(b){Ue(e,e.return,b)}break;case 4:Ht(s,e),Yt(e);break;case 13:Ht(s,e),Yt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(qc=Ve())),n&4&&Cu(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(at=(d=at)||h,Ht(s,e),at=d):Ht(s,e),Yt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(ne=e,h=e.child;h!==null;){for(u=ne=h;ne!==null;){switch(f=ne,g=f.child,f.tag){case 0:case 11:case 14:case 15:Qn(4,f,f.return);break;case 1:Wr(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){n=f,r=f.return;try{s=n,_.props=s.memoizedProps,_.state=s.memoizedState,_.componentWillUnmount()}catch(b){Ue(n,r,b)}}break;case 5:Wr(f,f.return);break;case 22:if(f.memoizedState!==null){Pu(u);continue}}g!==null?(g.return=f,ne=g):Pu(u)}h=h.sibling}e:for(h=null,u=e;;){if(u.tag===5){if(h===null){h=u;try{a=u.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=u.stateNode,c=u.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Lm("display",o))}catch(b){Ue(e,e.return,b)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(b){Ue(e,e.return,b)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Ht(s,e),Yt(e),n&4&&Cu(e);break;case 21:break;default:Ht(s,e),Yt(e)}}function Yt(e){var s=e.flags;if(s&2){try{e:{for(var r=e.return;r!==null;){if(ah(r)){var n=r;break e}r=r.return}throw Error(Z(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Xn(a,""),n.flags&=-33);var i=Su(e);Ql(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Su(e);Gl(e,l,o);break;default:throw Error(Z(161))}}catch(c){Ue(e,e.return,c)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function _f(e,s,r){ne=e,lh(e)}function lh(e,s,r){for(var n=(e.mode&1)!==0;ne!==null;){var a=ne,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Oa;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||at;l=Oa;var d=at;if(Oa=o,(at=c)&&!d)for(ne=a;ne!==null;)o=ne,c=o.child,o.tag===22&&o.memoizedState!==null?Tu(a):c!==null?(c.return=o,ne=c):Tu(a);for(;i!==null;)ne=i,lh(i),i=i.sibling;ne=a,Oa=l,at=d}Eu(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ne=i):Eu(e)}}function Eu(e){for(;ne!==null;){var s=ne;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:at||to(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!at)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:Wt(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&mu(s,i,n);break;case 3:var o=s.updateQueue;if(o!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}mu(s,o,r)}break;case 5:var l=s.stateNode;if(r===null&&s.flags&4){r=l;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&ra(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}at||s.flags&512&&Jl(s)}catch(f){Ue(s,s.return,f)}}if(s===e){ne=null;break}if(r=s.sibling,r!==null){r.return=s.return,ne=r;break}ne=s.return}}function Pu(e){for(;ne!==null;){var s=ne;if(s===e){ne=null;break}var r=s.sibling;if(r!==null){r.return=s.return,ne=r;break}ne=s.return}}function Tu(e){for(;ne!==null;){var s=ne;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{to(4,s)}catch(c){Ue(s,r,c)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(c){Ue(s,a,c)}}var i=s.return;try{Jl(s)}catch(c){Ue(s,i,c)}break;case 5:var o=s.return;try{Jl(s)}catch(c){Ue(s,o,c)}}}catch(c){Ue(s,s.return,c)}if(s===e){ne=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ne=l;break}ne=s.return}}var kf=Math.ceil,Ii=Ns.ReactCurrentDispatcher,Vc=Ns.ReactCurrentOwner,$t=Ns.ReactCurrentBatchConfig,be=0,Xe=null,qe=null,tt=0,Nt=0,qr=Zs(0),Ze=0,ha=null,hr=0,so=0,Wc=0,Zn=null,xt=null,qc=0,dn=1/0,cs=null,Mi=!1,Zl=null,Rs=null,Ua=!1,zs=null,Di=0,Kn=0,Kl=null,ci=-1,di=0;function ut(){return be&6?Ve():ci!==-1?ci:ci=Ve()}function Fs(e){return e.mode&1?be&2&&tt!==0?tt&-tt:lf.transition!==null?(di===0&&(di=qm()),di):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Xm(e.type)),e):1}function Qt(e,s,r,n){if(50<Kn)throw Kn=0,Kl=null,Error(Z(185));va(e,r,n),(!(be&2)||e!==Xe)&&(e===Xe&&(!(be&2)&&(so|=r),Ze===4&&Ps(e,tt)),jt(e,n),r===1&&be===0&&!(s.mode&1)&&(dn=Ve()+500,Yi&&Ks()))}function jt(e,s){var r=e.callbackNode;og(e,s);var n=ji(e,e===Xe?tt:0);if(n===0)r!==null&&Fd(r),e.callbackNode=null,e.callbackPriority=0;else if(s=n&-n,e.callbackPriority!==s){if(r!=null&&Fd(r),s===1)e.tag===0?of(zu.bind(null,e)):yp(zu.bind(null,e)),sf(function(){!(be&6)&&Ks()}),r=null;else{switch(Jm(n)){case 1:r=yc;break;case 4:r=Vm;break;case 16:r=vi;break;case 536870912:r=Wm;break;default:r=vi}r=gh(r,ch.bind(null,e))}e.callbackPriority=s,e.callbackNode=r}}function ch(e,s){if(ci=-1,di=0,be&6)throw Error(Z(327));var r=e.callbackNode;if(Yr()&&e.callbackNode!==r)return null;var n=ji(e,e===Xe?tt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||s)s=Ri(e,n);else{s=n;var a=be;be|=2;var i=uh();(Xe!==e||tt!==s)&&(cs=null,dn=Ve()+500,cr(e,s));do try{Ef();break}catch(l){dh(e,l)}while(!0);zc(),Ii.current=i,be=a,qe!==null?s=0:(Xe=null,tt=0,s=Ze)}if(s!==0){if(s===2&&(a=_l(e),a!==0&&(n=a,s=Yl(e,a))),s===1)throw r=ha,cr(e,0),Ps(e,n),jt(e,Ve()),r;if(s===6)Ps(e,n);else{if(a=e.current.alternate,!(n&30)&&!Sf(a)&&(s=Ri(e,n),s===2&&(i=_l(e),i!==0&&(n=i,s=Yl(e,i))),s===1))throw r=ha,cr(e,0),Ps(e,n),jt(e,Ve()),r;switch(e.finishedWork=a,e.finishedLanes=n,s){case 0:case 1:throw Error(Z(345));case 2:nr(e,xt,cs);break;case 3:if(Ps(e,n),(n&130023424)===n&&(s=qc+500-Ve(),10<s)){if(ji(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ut(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Al(nr.bind(null,e,xt,cs),s);break}nr(e,xt,cs);break;case 4:if(Ps(e,n),(n&4194240)===n)break;for(s=e.eventTimes,a=-1;0<n;){var o=31-Gt(n);i=1<<o,o=s[o],o>a&&(a=o),n&=~i}if(n=a,n=Ve()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kf(n/1960))-n,10<n){e.timeoutHandle=Al(nr.bind(null,e,xt,cs),n);break}nr(e,xt,cs);break;case 5:nr(e,xt,cs);break;default:throw Error(Z(329))}}}return jt(e,Ve()),e.callbackNode===r?ch.bind(null,e):null}function Yl(e,s){var r=Zn;return e.current.memoizedState.isDehydrated&&(cr(e,s).flags|=256),e=Ri(e,s),e!==2&&(s=xt,xt=r,s!==null&&Xl(s)),e}function Xl(e){xt===null?xt=e:xt.push.apply(xt,e)}function Sf(e){for(var s=e;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Zt(i(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ps(e,s){for(s&=~Wc,s&=~so,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var r=31-Gt(s),n=1<<r;e[r]=-1,s&=~n}}function zu(e){if(be&6)throw Error(Z(327));Yr();var s=ji(e,0);if(!(s&1))return jt(e,Ve()),null;var r=Ri(e,s);if(e.tag!==0&&r===2){var n=_l(e);n!==0&&(s=n,r=Yl(e,n))}if(r===1)throw r=ha,cr(e,0),Ps(e,s),jt(e,Ve()),r;if(r===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,nr(e,xt,cs),jt(e,Ve()),null}function Jc(e,s){var r=be;be|=1;try{return e(s)}finally{be=r,be===0&&(dn=Ve()+500,Yi&&Ks())}}function xr(e){zs!==null&&zs.tag===0&&!(be&6)&&Yr();var s=be;be|=1;var r=$t.transition,n=Te;try{if($t.transition=null,Te=1,e)return e()}finally{Te=n,$t.transition=r,be=s,!(be&6)&&Ks()}}function Gc(){Nt=qr.current,$e(qr)}function cr(e,s){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,tf(r)),qe!==null)for(r=qe.return;r!==null;){var n=r;switch(Ec(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ki();break;case 3:ln(),$e(yt),$e(it),Dc();break;case 5:Mc(n);break;case 4:ln();break;case 13:$e(Re);break;case 19:$e(Re);break;case 10:Ac(n.type._context);break;case 22:case 23:Gc()}r=r.return}if(Xe=e,qe=e=Bs(e.current,null),tt=Nt=s,Ze=0,ha=null,Wc=so=hr=0,xt=Zn=null,ir!==null){for(s=0;s<ir.length;s++)if(r=ir[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ir=null}return e}function dh(e,s){do{var r=qe;try{if(zc(),ii.current=$i,Li){for(var n=Fe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Li=!1}if(pr=0,Ke=Qe=Fe=null,Gn=!1,ua=0,Vc.current=null,r===null||r.return===null){Ze=1,ha=s,qe=null;break}e:{var i=e,o=r.return,l=r,c=s;if(s=tt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=yu(o);if(g!==null){g.flags&=-257,vu(g,o,l,i,s),g.mode&1&&fu(i,d,s),s=g,c=d;var _=s.updateQueue;if(_===null){var b=new Set;b.add(c),s.updateQueue=b}else _.add(c);break e}else{if(!(s&1)){fu(i,d,s),Qc();break e}c=Error(Z(426))}}else if(Ie&&l.mode&1){var w=yu(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),vu(w,o,l,i,s),Pc(cn(c,l));break e}}i=c=cn(c,l),Ze!==4&&(Ze=2),Zn===null?Zn=[i]:Zn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var x=Jp(i,c,s);uu(i,x);break e;case 1:l=c;var y=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Rs===null||!Rs.has(m)))){i.flags|=65536,s&=-s,i.lanes|=s;var j=Gp(i,l,s);uu(i,j);break e}}i=i.return}while(i!==null)}ph(r)}catch(C){s=C,qe===r&&r!==null&&(qe=r=r.return);continue}break}while(!0)}function uh(){var e=Ii.current;return Ii.current=$i,e===null?$i:e}function Qc(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),Xe===null||!(hr&268435455)&&!(so&268435455)||Ps(Xe,tt)}function Ri(e,s){var r=be;be|=2;var n=uh();(Xe!==e||tt!==s)&&(cs=null,cr(e,s));do try{Cf();break}catch(a){dh(e,a)}while(!0);if(zc(),be=r,Ii.current=n,qe!==null)throw Error(Z(261));return Xe=null,tt=0,Ze}function Cf(){for(;qe!==null;)mh(qe)}function Ef(){for(;qe!==null&&!Yx();)mh(qe)}function mh(e){var s=xh(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,s===null?ph(e):qe=s,Vc.current=null}function ph(e){var s=e;do{var r=s.alternate;if(e=s.return,s.flags&32768){if(r=bf(r,s),r!==null){r.flags&=32767,qe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ze=6,qe=null;return}}else if(r=jf(r,s,Nt),r!==null){qe=r;return}if(s=s.sibling,s!==null){qe=s;return}qe=s=e}while(s!==null);Ze===0&&(Ze=5)}function nr(e,s,r){var n=Te,a=$t.transition;try{$t.transition=null,Te=1,Pf(e,s,r,n)}finally{$t.transition=a,Te=n}return null}function Pf(e,s,r,n){do Yr();while(zs!==null);if(be&6)throw Error(Z(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(lg(e,i),e===Xe&&(qe=Xe=null,tt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ua||(Ua=!0,gh(vi,function(){return Yr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=$t.transition,$t.transition=null;var o=Te;Te=1;var l=be;be|=4,Vc.current=null,wf(e,r),oh(r,e),Gg(Tl),bi=!!Pl,Tl=Pl=null,e.current=r,_f(r),Xx(),be=l,Te=o,$t.transition=i}else e.current=r;if(Ua&&(Ua=!1,zs=e,Di=a),i=e.pendingLanes,i===0&&(Rs=null),sg(r.stateNode),jt(e,Ve()),s!==null)for(n=e.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Mi)throw Mi=!1,e=Zl,Zl=null,e;return Di&1&&e.tag!==0&&Yr(),i=e.pendingLanes,i&1?e===Kl?Kn++:(Kn=0,Kl=e):Kn=0,Ks(),null}function Yr(){if(zs!==null){var e=Jm(Di),s=$t.transition,r=Te;try{if($t.transition=null,Te=16>e?16:e,zs===null)var n=!1;else{if(e=zs,zs=null,Di=0,be&6)throw Error(Z(331));var a=be;for(be|=4,ne=e.current;ne!==null;){var i=ne,o=i.child;if(ne.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ne=d;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:Qn(8,h,i)}var u=h.child;if(u!==null)u.return=h,ne=u;else for(;ne!==null;){h=ne;var f=h.sibling,g=h.return;if(nh(h),h===d){ne=null;break}if(f!==null){f.return=g,ne=f;break}ne=g}}}var _=i.alternate;if(_!==null){var b=_.child;if(b!==null){_.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ne=o;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qn(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ne=x;break e}ne=i.return}}var y=e.current;for(ne=y;ne!==null;){o=ne;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,ne=m;else e:for(o=y;ne!==null;){if(l=ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:to(9,l)}}catch(C){Ue(l,l.return,C)}if(l===o){ne=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,ne=j;break e}ne=l.return}}if(be=a,Ks(),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(Ji,e)}catch{}n=!0}return n}finally{Te=r,$t.transition=s}}return!1}function Au(e,s,r){s=cn(r,s),s=Jp(e,s,1),e=Ds(e,s,1),s=ut(),e!==null&&(va(e,1,s),jt(e,s))}function Ue(e,s,r){if(e.tag===3)Au(e,e,r);else for(;s!==null;){if(s.tag===3){Au(s,e,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Rs===null||!Rs.has(n))){e=cn(r,e),e=Gp(s,e,1),s=Ds(s,e,1),e=ut(),s!==null&&(va(s,1,e),jt(s,e));break}}s=s.return}}function Tf(e,s,r){var n=e.pingCache;n!==null&&n.delete(s),s=ut(),e.pingedLanes|=e.suspendedLanes&r,Xe===e&&(tt&r)===r&&(Ze===4||Ze===3&&(tt&130023424)===tt&&500>Ve()-qc?cr(e,0):Wc|=r),jt(e,s)}function hh(e,s){s===0&&(e.mode&1?(s=Aa,Aa<<=1,!(Aa&130023424)&&(Aa=4194304)):s=1);var r=ut();e=vs(e,s),e!==null&&(va(e,s,r),jt(e,r))}function zf(e){var s=e.memoizedState,r=0;s!==null&&(r=s.retryLane),hh(e,r)}function Af(e,s){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Z(314))}n!==null&&n.delete(s),hh(e,r)}var xh;xh=function(e,s,r){if(e!==null)if(e.memoizedProps!==s.pendingProps||yt.current)gt=!0;else{if(!(e.lanes&r)&&!(s.flags&128))return gt=!1,vf(e,s,r);gt=!!(e.flags&131072)}else gt=!1,Ie&&s.flags&1048576&&vp(s,Ei,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;li(e,s),e=s.pendingProps;var a=nn(s,it.current);Kr(s,r),a=Fc(null,s,n,e,a,r);var i=Bc();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,vt(n)?(i=!0,Si(s)):i=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,$c(s),a.updater=eo,s.stateNode=a,a._reactInternals=s,Fl(s,n,e,r),s=Ul(null,s,n,!0,i,r)):(s.tag=0,Ie&&i&&Cc(s),dt(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(li(e,s),e=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=$f(n),e=Wt(n,e),a){case 0:s=Ol(null,s,n,e,r);break e;case 1:s=Nu(null,s,n,e,r);break e;case 11:s=ju(null,s,n,e,r);break e;case 14:s=bu(null,s,n,Wt(n.type,e),r);break e}throw Error(Z(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Wt(n,a),Ol(e,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Wt(n,a),Nu(e,s,n,a,r);case 3:e:{if(Yp(s),e===null)throw Error(Z(387));n=s.pendingProps,i=s.memoizedState,a=i.element,kp(e,s),zi(s,n,null,r);var o=s.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){a=cn(Error(Z(423)),s),s=wu(e,s,n,r,a);break e}else if(n!==a){a=cn(Error(Z(424)),s),s=wu(e,s,n,r,a);break e}else for(wt=Ms(s.stateNode.containerInfo.firstChild),_t=s,Ie=!0,Jt=null,r=wp(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(an(),n===a){s=js(e,s,r);break e}dt(e,s,n,r)}s=s.child}return s;case 5:return Sp(s),e===null&&Ml(s),n=s.type,a=s.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,zl(n,a)?o=null:i!==null&&zl(n,i)&&(s.flags|=32),Kp(e,s),dt(e,s,o,r),s.child;case 6:return e===null&&Ml(s),null;case 13:return Xp(e,s,r);case 4:return Ic(s,s.stateNode.containerInfo),n=s.pendingProps,e===null?s.child=on(s,null,n,r):dt(e,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Wt(n,a),ju(e,s,n,a,r);case 7:return dt(e,s,s.pendingProps,r),s.child;case 8:return dt(e,s,s.pendingProps.children,r),s.child;case 12:return dt(e,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,i=s.memoizedProps,o=a.value,Ae(Pi,n._currentValue),n._currentValue=o,i!==null)if(Zt(i.value,o)){if(i.children===a.children&&!yt.current){s=js(e,s,r);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=hs(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Dl(i.return,r,s),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===s.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Z(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Dl(o,r,s),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===s){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dt(e,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,Kr(s,r),a=Dt(a),n=n(a),s.flags|=1,dt(e,s,n,r),s.child;case 14:return n=s.type,a=Wt(n,s.pendingProps),a=Wt(n.type,a),bu(e,s,n,a,r);case 15:return Qp(e,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:Wt(n,a),li(e,s),s.tag=1,vt(n)?(e=!0,Si(s)):e=!1,Kr(s,r),qp(s,n,a),Fl(s,n,a,r),Ul(null,s,n,!0,e,r);case 19:return eh(e,s,r);case 22:return Zp(e,s,r)}throw Error(Z(156,s.tag))};function gh(e,s){return Hm(e,s)}function Lf(e,s,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,s,r,n){return new Lf(e,s,r,n)}function Zc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $f(e){if(typeof e=="function")return Zc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xc)return 11;if(e===gc)return 14}return 2}function Bs(e,s){var r=e.alternate;return r===null?(r=Lt(e.tag,s,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=s,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ui(e,s,r,n,a,i){var o=2;if(n=e,typeof e=="function")Zc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Mr:return dr(r.children,a,i,s);case hc:o=8,a|=8;break;case cl:return e=Lt(12,r,s,a|2),e.elementType=cl,e.lanes=i,e;case dl:return e=Lt(13,r,s,a),e.elementType=dl,e.lanes=i,e;case ul:return e=Lt(19,r,s,a),e.elementType=ul,e.lanes=i,e;case Sm:return ro(r,a,i,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _m:o=10;break e;case km:o=9;break e;case xc:o=11;break e;case gc:o=14;break e;case Ss:o=16,n=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return s=Lt(o,r,s,a),s.elementType=e,s.type=n,s.lanes=i,s}function dr(e,s,r,n){return e=Lt(7,e,n,s),e.lanes=r,e}function ro(e,s,r,n){return e=Lt(22,e,n,s),e.elementType=Sm,e.lanes=r,e.stateNode={isHidden:!1},e}function Io(e,s,r){return e=Lt(6,e,null,s),e.lanes=r,e}function Mo(e,s,r){return s=Lt(4,e.children!==null?e.children:[],e.key,s),s.lanes=r,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function If(e,s,r,n,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=go(0),this.expirationTimes=go(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=go(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Kc(e,s,r,n,a,i,o,l,c){return e=new If(e,s,r,l,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=Lt(3,null,null,s),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$c(i),e}function Mf(e,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ir,key:n==null?null:""+n,children:e,containerInfo:s,implementation:r}}function fh(e){if(!e)return Hs;e=e._reactInternals;e:{if(vr(e)!==e||e.tag!==1)throw Error(Z(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(vt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Z(171))}if(e.tag===1){var r=e.type;if(vt(r))return fp(e,r,s)}return s}function yh(e,s,r,n,a,i,o,l,c){return e=Kc(r,n,!0,e,a,i,o,l,c),e.context=fh(null),r=e.current,n=ut(),a=Fs(r),i=hs(n,a),i.callback=s??null,Ds(r,i,a),e.current.lanes=a,va(e,a,n),jt(e,n),e}function no(e,s,r,n){var a=s.current,i=ut(),o=Fs(a);return r=fh(r),s.context===null?s.context=r:s.pendingContext=r,s=hs(i,o),s.payload={element:e},n=n===void 0?null:n,n!==null&&(s.callback=n),e=Ds(a,s,o),e!==null&&(Qt(e,a,o,i),ai(e,a,o)),o}function Fi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lu(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<s?r:s}}function Yc(e,s){Lu(e,s),(e=e.alternate)&&Lu(e,s)}function Df(){return null}var vh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}ao.prototype.render=Xc.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(Z(409));no(e,s,null,null)};ao.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;xr(function(){no(null,e,null,null)}),s[ys]=null}};function ao(e){this._internalRoot=e}ao.prototype.unstable_scheduleHydration=function(e){if(e){var s=Zm();e={blockedOn:null,target:e,priority:s};for(var r=0;r<Es.length&&s!==0&&s<Es[r].priority;r++);Es.splice(r,0,e),r===0&&Ym(e)}};function ed(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function io(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $u(){}function Rf(e,s,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Fi(o);i.call(d)}}var o=yh(s,n,e,0,null,!1,!1,"",$u);return e._reactRootContainer=o,e[ys]=o.current,ia(e.nodeType===8?e.parentNode:e),xr(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Fi(c);l.call(d)}}var c=Kc(e,0,!1,null,null,!1,!1,"",$u);return e._reactRootContainer=c,e[ys]=c.current,ia(e.nodeType===8?e.parentNode:e),xr(function(){no(s,c,r,n)}),c}function oo(e,s,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Fi(o);l.call(c)}}no(s,o,e,a)}else o=Rf(r,s,e,a,n);return Fi(o)}Gm=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var r=Bn(s.pendingLanes);r!==0&&(vc(s,r|1),jt(s,Ve()),!(be&6)&&(dn=Ve()+500,Ks()))}break;case 13:xr(function(){var n=vs(e,1);if(n!==null){var a=ut();Qt(n,e,1,a)}}),Yc(e,1)}};jc=function(e){if(e.tag===13){var s=vs(e,134217728);if(s!==null){var r=ut();Qt(s,e,134217728,r)}Yc(e,134217728)}};Qm=function(e){if(e.tag===13){var s=Fs(e),r=vs(e,s);if(r!==null){var n=ut();Qt(r,e,s,n)}Yc(e,s)}};Zm=function(){return Te};Km=function(e,s){var r=Te;try{return Te=e,s()}finally{Te=r}};bl=function(e,s,r){switch(s){case"input":if(hl(e,r),s=r.name,r.type==="radio"&&s!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==e&&n.form===e.form){var a=Ki(n);if(!a)throw Error(Z(90));Em(n),hl(n,a)}}}break;case"textarea":Tm(e,r);break;case"select":s=r.value,s!=null&&Jr(e,!!r.multiple,s,!1)}};Dm=Jc;Rm=xr;var Ff={usingClientEntryPoint:!1,Events:[ba,Br,Ki,Im,Mm,Jc]},$n={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bf={bundleType:$n.bundleType,version:$n.version,rendererPackageName:$n.rendererPackageName,rendererConfig:$n.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Om(e),e===null?null:e.stateNode},findFiberByHostInstance:$n.findFiberByHostInstance||Df,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ha.isDisabled&&Ha.supportsFiber)try{Ji=Ha.inject(Bf),ts=Ha}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ff;Ct.createPortal=function(e,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(s))throw Error(Z(200));return Mf(e,s,null,r)};Ct.createRoot=function(e,s){if(!ed(e))throw Error(Z(299));var r=!1,n="",a=vh;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=Kc(e,1,!1,null,null,r,!1,n,a),e[ys]=s.current,ia(e.nodeType===8?e.parentNode:e),new Xc(s)};Ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=Om(s),e=e===null?null:e.stateNode,e};Ct.flushSync=function(e){return xr(e)};Ct.hydrate=function(e,s,r){if(!io(s))throw Error(Z(200));return oo(null,e,s,!0,r)};Ct.hydrateRoot=function(e,s,r){if(!ed(e))throw Error(Z(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=vh;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),s=yh(s,null,e,1,r??null,a,!1,i,o),e[ys]=s.current,ia(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new ao(s)};Ct.render=function(e,s,r){if(!io(s))throw Error(Z(200));return oo(null,e,s,!1,r)};Ct.unmountComponentAtNode=function(e){if(!io(e))throw Error(Z(40));return e._reactRootContainer?(xr(function(){oo(null,null,e,!1,function(){e._reactRootContainer=null,e[ys]=null})}),!0):!1};Ct.unstable_batchedUpdates=Jc;Ct.unstable_renderSubtreeIntoContainer=function(e,s,r,n){if(!io(r))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return oo(e,s,r,!1,n)};Ct.version="18.3.1-next-f1338f8080-20240426";function jh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jh)}catch(e){console.error(e)}}jh(),jm.exports=Ct;var Of=jm.exports,bh,Iu=Of;bh=Iu.createRoot,Iu.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Mu="popstate";function Uf(e={}){function s(n,a){let{pathname:i,search:o,hash:l}=n.location;return ec("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:xa(a)}return Vf(s,r,null,e)}function Me(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function Ft(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Hf(){return Math.random().toString(36).substring(2,10)}function Du(e,s){return{usr:e.state,key:e.key,idx:s}}function ec(e,s,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof s=="string"?gn(s):s,state:r,key:s&&s.key||n||Hf()}}function xa({pathname:e="/",search:s="",hash:r=""}){return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gn(e){let s={};if(e){let r=e.indexOf("#");r>=0&&(s.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(s.search=e.substring(n),e=e.substring(0,n)),e&&(s.pathname=e)}return s}function Vf(e,s,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l="POP",c=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function u(){l="POP";let w=h(),x=w==null?null:w-d;d=w,c&&c({action:l,location:b.location,delta:x})}function f(w,x){l="PUSH";let y=ec(b.location,w,x);d=h()+1;let m=Du(y,d),j=b.createHref(y);try{o.pushState(m,"",j)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(j)}i&&c&&c({action:l,location:b.location,delta:1})}function g(w,x){l="REPLACE";let y=ec(b.location,w,x);d=h();let m=Du(y,d),j=b.createHref(y);o.replaceState(m,"",j),i&&c&&c({action:l,location:b.location,delta:0})}function _(w){return Wf(w)}let b={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Mu,u),c=w,()=>{a.removeEventListener(Mu,u),c=null}},createHref(w){return s(a,w)},createURL:_,encodeLocation(w){let x=_(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:g,go(w){return o.go(w)}};return b}function Wf(e,s=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Me(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:xa(e);return n=n.replace(/ $/,"%20"),!s&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function Nh(e,s,r="/"){return qf(e,s,r,!1)}function qf(e,s,r,n){let a=typeof s=="string"?gn(s):s,i=bs(a.pathname||"/",r);if(i==null)return null;let o=wh(e);Jf(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=n0(i);l=s0(o[c],d,n)}return l}function wh(e,s=[],r=[],n="",a=!1){let i=(o,l,c=a,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&c)return;Me(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let u=xs([n,h.relativePath]),f=r.concat(h);o.children&&o.children.length>0&&(Me(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),wh(o.children,s,f,u,c)),!(o.path==null&&!o.index)&&s.push({path:u,score:e0(u,o.index),routesMeta:f})};return e.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let d of _h(o.path))i(o,l,!0,d)}),s}function _h(e){let s=e.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=_h(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Jf(e){e.sort((s,r)=>s.score!==r.score?r.score-s.score:t0(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Gf=/^:[\w-]+$/,Qf=3,Zf=2,Kf=1,Yf=10,Xf=-2,Ru=e=>e==="*";function e0(e,s){let r=e.split("/"),n=r.length;return r.some(Ru)&&(n+=Xf),s&&(n+=Zf),r.filter(a=>!Ru(a)).reduce((a,i)=>a+(Gf.test(i)?Qf:i===""?Kf:Yf),n)}function t0(e,s){return e.length===s.length&&e.slice(0,-1).every((n,a)=>n===s[a])?e[e.length-1]-s[s.length-1]:0}function s0(e,s,r=!1){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,h=i==="/"?s:s.slice(i.length)||"/",u=Bi({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),f=c.route;if(!u&&d&&r&&!n[n.length-1].route.index&&(u=Bi({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:xs([i,u.pathname]),pathnameBase:c0(xs([i,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(i=xs([i,u.pathnameBase]))}return o}function Bi(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=r0(e.path,e.caseSensitive,e.end),a=s.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,{paramName:h,isOptional:u},f)=>{if(h==="*"){let _=l[f]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const g=l[f];return u&&!g?d[h]=void 0:d[h]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function r0(e,s=!1,r=!0){Ft(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function n0(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ft(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),e}}function bs(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var a0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i0=e=>a0.test(e);function o0(e,s="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?gn(e):e,i;if(r)if(i0(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Ft(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?i=Fu(r.substring(1),"/"):i=Fu(r,s)}else i=s;return{pathname:i,search:d0(n),hash:u0(a)}}function Fu(e,s){let r=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Do(e,s,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${s}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function l0(e){return e.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function td(e){let s=l0(e);return s.map((r,n)=>n===s.length-1?r.pathname:r.pathnameBase)}function sd(e,s,r,n=!1){let a;typeof e=="string"?a=gn(e):(a={...e},Me(!a.pathname||!a.pathname.includes("?"),Do("?","pathname","search",a)),Me(!a.pathname||!a.pathname.includes("#"),Do("#","pathname","hash",a)),Me(!a.search||!a.search.includes("#"),Do("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let u=s.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),u-=1;a.pathname=f.join("/")}l=u>=0?s[u]:"/"}let c=o0(a,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var xs=e=>e.join("/").replace(/\/\/+/g,"/"),c0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),d0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,u0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function m0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var kh=["POST","PUT","PATCH","DELETE"];new Set(kh);var p0=["GET",...kh];new Set(p0);var fn=p.createContext(null);fn.displayName="DataRouter";var lo=p.createContext(null);lo.displayName="DataRouterState";p.createContext(!1);var Sh=p.createContext({isTransitioning:!1});Sh.displayName="ViewTransition";var h0=p.createContext(new Map);h0.displayName="Fetchers";var x0=p.createContext(null);x0.displayName="Await";var Kt=p.createContext(null);Kt.displayName="Navigation";var wa=p.createContext(null);wa.displayName="Location";var as=p.createContext({outlet:null,matches:[],isDataRoute:!1});as.displayName="Route";var rd=p.createContext(null);rd.displayName="RouteError";function g0(e,{relative:s}={}){Me(yn(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=p.useContext(Kt),{hash:a,pathname:i,search:o}=_a(e,{relative:s}),l=i;return r!=="/"&&(l=i==="/"?r:xs([r,i])),n.createHref({pathname:l,search:o,hash:a})}function yn(){return p.useContext(wa)!=null}function Ys(){return Me(yn(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(wa).location}var Ch="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Eh(e){p.useContext(Kt).static||p.useLayoutEffect(e)}function vn(){let{isDataRoute:e}=p.useContext(as);return e?P0():f0()}function f0(){Me(yn(),"useNavigate() may be used only in the context of a <Router> component.");let e=p.useContext(fn),{basename:s,navigator:r}=p.useContext(Kt),{matches:n}=p.useContext(as),{pathname:a}=Ys(),i=JSON.stringify(td(n)),o=p.useRef(!1);return Eh(()=>{o.current=!0}),p.useCallback((c,d={})=>{if(Ft(o.current,Ch),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=sd(c,JSON.parse(i),a,d.relative==="path");e==null&&s!=="/"&&(h.pathname=h.pathname==="/"?s:xs([s,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[s,r,i,a,e])}p.createContext(null);function _a(e,{relative:s}={}){let{matches:r}=p.useContext(as),{pathname:n}=Ys(),a=JSON.stringify(td(r));return p.useMemo(()=>sd(e,JSON.parse(a),n,s==="path"),[e,a,n,s])}function y0(e,s){return Ph(e,s)}function Ph(e,s,r,n,a){var y;Me(yn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=p.useContext(Kt),{matches:o}=p.useContext(as),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",u=l&&l.route;{let m=u&&u.path||"";Th(d,!u||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let f=Ys(),g;if(s){let m=typeof s=="string"?gn(s):s;Me(h==="/"||((y=m.pathname)==null?void 0:y.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${m.pathname}" was given in the \`location\` prop.`),g=m}else g=f;let _=g.pathname||"/",b=_;if(h!=="/"){let m=h.replace(/^\//,"").split("/");b="/"+_.replace(/^\//,"").split("/").slice(m.length).join("/")}let w=Nh(e,{pathname:b});Ft(u||w!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Ft(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=w0(w&&w.map(m=>Object.assign({},m,{params:Object.assign({},c,m.params),pathname:xs([h,i.encodeLocation?i.encodeLocation(m.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?h:xs([h,i.encodeLocation?i.encodeLocation(m.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:m.pathnameBase])})),o,r,n,a);return s&&x?p.createElement(wa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},x):x}function v0(){let e=E0(),s=m0(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:i},"ErrorBoundary")," or"," ",p.createElement("code",{style:i},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},s),r?p.createElement("pre",{style:a},r):null,o)}var j0=p.createElement(v0,null),b0=class extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){this.props.onError?this.props.onError(e,s):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?p.createElement(as.Provider,{value:this.props.routeContext},p.createElement(rd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function N0({routeContext:e,match:s,children:r}){let n=p.useContext(fn);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),p.createElement(as.Provider,{value:e},r)}function w0(e,s=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(s.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let h=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Me(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let l=!1,c=-1;if(r)for(let h=0;h<i.length;h++){let u=i[h];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=h),u.route.id){let{loaderData:f,errors:g}=r,_=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!g||g[u.route.id]===void 0);if(u.route.lazy||_){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=r&&n?(h,u)=>{var f,g;n(h,{location:r.location,params:((g=(f=r.matches)==null?void 0:f[0])==null?void 0:g.params)??{},errorInfo:u})}:void 0;return i.reduceRight((h,u,f)=>{let g,_=!1,b=null,w=null;r&&(g=o&&u.route.id?o[u.route.id]:void 0,b=u.route.errorElement||j0,l&&(c<0&&f===0?(Th("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,w=null):c===f&&(_=!0,w=u.route.hydrateFallbackElement||null)));let x=s.concat(i.slice(0,f+1)),y=()=>{let m;return g?m=b:_?m=w:u.route.Component?m=p.createElement(u.route.Component,null):u.route.element?m=u.route.element:m=h,p.createElement(N0,{match:u,routeContext:{outlet:h,matches:x,isDataRoute:r!=null},children:m})};return r&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?p.createElement(b0,{location:r.location,revalidation:r.revalidation,component:b,error:g,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:d}):y()},null)}function nd(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _0(e){let s=p.useContext(fn);return Me(s,nd(e)),s}function k0(e){let s=p.useContext(lo);return Me(s,nd(e)),s}function S0(e){let s=p.useContext(as);return Me(s,nd(e)),s}function ad(e){let s=S0(e),r=s.matches[s.matches.length-1];return Me(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function C0(){return ad("useRouteId")}function E0(){var n;let e=p.useContext(rd),s=k0("useRouteError"),r=ad("useRouteError");return e!==void 0?e:(n=s.errors)==null?void 0:n[r]}function P0(){let{router:e}=_0("useNavigate"),s=ad("useNavigate"),r=p.useRef(!1);return Eh(()=>{r.current=!0}),p.useCallback(async(a,i={})=>{Ft(r.current,Ch),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:s,...i}))},[e,s])}var Bu={};function Th(e,s,r){!s&&!Bu[e]&&(Bu[e]=!0,Ft(!1,r))}p.memo(T0);function T0({routes:e,future:s,state:r,unstable_onError:n}){return Ph(e,void 0,r,n,s)}function Oi({to:e,replace:s,state:r,relative:n}){Me(yn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=p.useContext(Kt);Ft(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=p.useContext(as),{pathname:o}=Ys(),l=vn(),c=sd(e,td(i),o,n==="path"),d=JSON.stringify(c);return p.useEffect(()=>{l(JSON.parse(d),{replace:s,state:r,relative:n})},[l,d,n,s,r]),null}function Oe(e){Me(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function z0({basename:e="/",children:s=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){Me(!yn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=p.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof r=="string"&&(r=gn(r));let{pathname:c="/",search:d="",hash:h="",state:u=null,key:f="default"}=r,g=p.useMemo(()=>{let _=bs(c,o);return _==null?null:{location:{pathname:_,search:d,hash:h,state:u,key:f},navigationType:n}},[o,c,d,h,u,f,n]);return Ft(g!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:p.createElement(Kt.Provider,{value:l},p.createElement(wa.Provider,{children:s,value:g}))}function Ou({children:e,location:s}){return y0(tc(e),s)}function tc(e,s=[]){let r=[];return p.Children.forEach(e,(n,a)=>{if(!p.isValidElement(n))return;let i=[...s,a];if(n.type===p.Fragment){r.push.apply(r,tc(n.props.children,i));return}Me(n.type===Oe,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Me(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=tc(n.props.children,i)),r.push(o)}),r}var mi="get",pi="application/x-www-form-urlencoded";function co(e){return e!=null&&typeof e.tagName=="string"}function A0(e){return co(e)&&e.tagName.toLowerCase()==="button"}function L0(e){return co(e)&&e.tagName.toLowerCase()==="form"}function $0(e){return co(e)&&e.tagName.toLowerCase()==="input"}function I0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function M0(e,s){return e.button===0&&(!s||s==="_self")&&!I0(e)}var Va=null;function D0(){if(Va===null)try{new FormData(document.createElement("form"),0),Va=!1}catch{Va=!0}return Va}var R0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ro(e){return e!=null&&!R0.has(e)?(Ft(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pi}"`),null):e}function F0(e,s){let r,n,a,i,o;if(L0(e)){let l=e.getAttribute("action");n=l?bs(l,s):null,r=e.getAttribute("method")||mi,a=Ro(e.getAttribute("enctype"))||pi,i=new FormData(e)}else if(A0(e)||$0(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?bs(c,s):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||mi,a=Ro(e.getAttribute("formenctype"))||Ro(l.getAttribute("enctype"))||pi,i=new FormData(l,e),!D0()){let{name:d,type:h,value:u}=e;if(h==="image"){let f=d?`${d}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else d&&i.append(d,u)}}else{if(co(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=mi,n=null,a=pi,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function id(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function B0(e,s,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:s&&bs(n.pathname,s)==="/"?n.pathname=`${s.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function O0(e,s){if(e.id in s)return s[e.id];try{let r=await import(e.module);return s[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function U0(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function H0(e,s,r){let n=await Promise.all(e.map(async a=>{let i=s.routes[a.route.id];if(i){let o=await O0(i,r);return o.links?o.links():[]}return[]}));return J0(n.flat(1).filter(U0).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Uu(e,s,r,n,a,i){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>{var h;return r[d].pathname!==c.pathname||((h=r[d].route.path)==null?void 0:h.endsWith("*"))&&r[d].params["*"]!==c.params["*"]};return i==="assets"?s.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?s.filter((c,d)=>{var u;let h=n.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((u=r[0])==null?void 0:u.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function V0(e,s,{includeHydrateFallback:r}={}){return W0(e.map(n=>{let a=s.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function W0(e){return[...new Set(e)]}function q0(e){let s={},r=Object.keys(e).sort();for(let n of r)s[n]=e[n];return s}function J0(e,s){let r=new Set;return new Set(s),e.reduce((n,a)=>{let i=JSON.stringify(q0(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function zh(){let e=p.useContext(fn);return id(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function G0(){let e=p.useContext(lo);return id(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var od=p.createContext(void 0);od.displayName="FrameworkContext";function Ah(){let e=p.useContext(od);return id(e,"You must render this element inside a <HydratedRouter> element"),e}function Q0(e,s){let r=p.useContext(od),[n,a]=p.useState(!1),[i,o]=p.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:u}=s,f=p.useRef(null);p.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let b=x=>{x.forEach(y=>{o(y.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[e]),p.useEffect(()=>{if(n){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[n]);let g=()=>{a(!0)},_=()=>{a(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:In(l,g),onBlur:In(c,_),onMouseEnter:In(d,g),onMouseLeave:In(h,_),onTouchStart:In(u,g)}]:[!1,f,{}]}function In(e,s){return r=>{e&&e(r),r.defaultPrevented||s(r)}}function Z0({page:e,...s}){let{router:r}=zh(),n=p.useMemo(()=>Nh(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?p.createElement(Y0,{page:e,matches:n,...s}):null}function K0(e){let{manifest:s,routeModules:r}=Ah(),[n,a]=p.useState([]);return p.useEffect(()=>{let i=!1;return H0(e,s,r).then(o=>{i||a(o)}),()=>{i=!0}},[e,s,r]),n}function Y0({page:e,matches:s,...r}){let n=Ys(),{manifest:a,routeModules:i}=Ah(),{basename:o}=zh(),{loaderData:l,matches:c}=G0(),d=p.useMemo(()=>Uu(e,s,c,a,n,"data"),[e,s,c,a,n]),h=p.useMemo(()=>Uu(e,s,c,a,n,"assets"),[e,s,c,a,n]),u=p.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let _=new Set,b=!1;if(s.forEach(x=>{var m;let y=a.routes[x.route.id];!y||!y.hasLoader||(!d.some(j=>j.route.id===x.route.id)&&x.route.id in l&&((m=i[x.route.id])!=null&&m.shouldRevalidate)||y.hasClientLoader?b=!0:_.add(x.route.id))}),_.size===0)return[];let w=B0(e,o,"data");return b&&_.size>0&&w.searchParams.set("_routes",s.filter(x=>_.has(x.route.id)).map(x=>x.route.id).join(",")),[w.pathname+w.search]},[o,l,n,a,d,s,e,i]),f=p.useMemo(()=>V0(h,a),[h,a]),g=K0(h);return p.createElement(p.Fragment,null,u.map(_=>p.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...r})),f.map(_=>p.createElement("link",{key:_,rel:"modulepreload",href:_,...r})),g.map(({key:_,link:b})=>p.createElement("link",{key:_,nonce:r.nonce,...b})))}function X0(...e){return s=>{e.forEach(r=>{typeof r=="function"?r(s):r!=null&&(r.current=s)})}}var Lh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Lh&&(window.__reactRouterVersion="7.9.6")}catch{}function ey({basename:e,children:s,window:r}){let n=p.useRef();n.current==null&&(n.current=Uf({window:r,v5Compat:!0}));let a=n.current,[i,o]=p.useState({action:a.action,location:a.location}),l=p.useCallback(c=>{p.startTransition(()=>o(c))},[o]);return p.useLayoutEffect(()=>a.listen(l),[a,l]),p.createElement(z0,{basename:e,children:s,location:i.location,navigationType:i.action,navigator:a})}var $h=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ih=p.forwardRef(function({onClick:s,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:u,...f},g){let{basename:_}=p.useContext(Kt),b=typeof d=="string"&&$h.test(d),w,x=!1;if(typeof d=="string"&&b&&(w=d,Lh))try{let P=new URL(window.location.href),z=d.startsWith("//")?new URL(P.protocol+d):new URL(d),H=bs(z.pathname,_);z.origin===P.origin&&H!=null?d=H+z.search+z.hash:x=!0}catch{Ft(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=g0(d,{relative:a}),[m,j,C]=Q0(n,f),F=ry(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:a,viewTransition:u});function L(P){s&&s(P),P.defaultPrevented||F(P)}let $=p.createElement("a",{...f,...C,href:w||y,onClick:x||i?s:L,ref:X0(g,j),target:c,"data-discover":!b&&r==="render"?"true":void 0});return m&&!b?p.createElement(p.Fragment,null,$,p.createElement(Z0,{page:y})):$});Ih.displayName="Link";var hi=p.forwardRef(function({"aria-current":s="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:l,children:c,...d},h){let u=_a(o,{relative:d.relative}),f=Ys(),g=p.useContext(lo),{navigator:_,basename:b}=p.useContext(Kt),w=g!=null&&ly(u)&&l===!0,x=_.encodeLocation?_.encodeLocation(u).pathname:u.pathname,y=f.pathname,m=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(y=y.toLowerCase(),m=m?m.toLowerCase():null,x=x.toLowerCase()),m&&b&&(m=bs(m,b)||m);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let C=y===x||!a&&y.startsWith(x)&&y.charAt(j)==="/",F=m!=null&&(m===x||!a&&m.startsWith(x)&&m.charAt(x.length)==="/"),L={isActive:C,isPending:F,isTransitioning:w},$=C?s:void 0,P;typeof n=="function"?P=n(L):P=[n,C?"active":null,F?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let z=typeof i=="function"?i(L):i;return p.createElement(Ih,{...d,"aria-current":$,className:P,ref:h,style:z,to:o,viewTransition:l},typeof c=="function"?c(L):c)});hi.displayName="NavLink";var ty=p.forwardRef(({discover:e="render",fetcherKey:s,navigate:r,reloadDocument:n,replace:a,state:i,method:o=mi,action:l,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:u,...f},g)=>{let _=iy(),b=oy(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&$h.test(l),y=m=>{if(c&&c(m),m.defaultPrevented)return;m.preventDefault();let j=m.nativeEvent.submitter,C=(j==null?void 0:j.getAttribute("formmethod"))||o;_(j||m.currentTarget,{fetcherKey:s,method:C,navigate:r,replace:a,state:i,relative:d,preventScrollReset:h,viewTransition:u})};return p.createElement("form",{ref:g,method:w,action:b,onSubmit:n?c:y,...f,"data-discover":!x&&e==="render"?"true":void 0})});ty.displayName="Form";function sy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mh(e){let s=p.useContext(fn);return Me(s,sy(e)),s}function ry(e,{target:s,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:o}={}){let l=vn(),c=Ys(),d=_a(e,{relative:i});return p.useCallback(h=>{if(M0(h,s)){h.preventDefault();let u=r!==void 0?r:xa(c)===xa(d);l(e,{replace:u,state:n,preventScrollReset:a,relative:i,viewTransition:o})}},[c,l,d,r,n,s,e,a,i,o])}var ny=0,ay=()=>`__${String(++ny)}__`;function iy(){let{router:e}=Mh("useSubmit"),{basename:s}=p.useContext(Kt),r=C0();return p.useCallback(async(n,a={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=F0(n,s);if(a.navigate===!1){let h=a.fetcherKey||ay();await e.fetch(h,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,s,r])}function oy(e,{relative:s}={}){let{basename:r}=p.useContext(Kt),n=p.useContext(as);Me(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={..._a(e||".",{relative:s})},o=Ys();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(u=>u).forEach(u=>l.append("index",u));let h=l.toString();i.search=h?`?${h}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:xs([r,i.pathname])),xa(i)}function ly(e,{relative:s}={}){let r=p.useContext(Sh);Me(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Mh("useViewTransitionState"),a=_a(e,{relative:s});if(!r.isTransitioning)return!1;let i=bs(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=bs(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Bi(a.pathname,o)!=null||Bi(a.pathname,i)!=null}const cy=[{id:"1",name:"Service Provider",email:"manglaaryan05@gmail.com",phone:"9876543210",status:"approved",specialization:["AC Repair","Electrician Services"],rating:4.8,totalJobs:120},{id:"2",name:"Jane Smith",email:"jane@example.com",phone:"8765432109",status:"approved",specialization:["Salon at Home","Massage Therapy"],rating:4.9,totalJobs:85},{id:"3",name:"Bob Johnson",email:"bob@example.com",phone:"7654321098",status:"pending",specialization:["Plumbing Services","Home Cleaning"],rating:0,totalJobs:0}],Dh=[{id:"1",name:"Regular User",email:"user@blinkcare.com",role:"user",status:"active",phone:"9876543210",address:"123 Main St, Apt 4B"},{id:"2",name:"Service Provider",email:"provider@blinkcare.com",role:"provider",status:"active",phone:"8765432109",address:"456 Park Ave, Suite 10"},{id:"3",name:"Admin User",email:"admin@blinkcare.com",role:"admin",status:"active",phone:"7654321098"}],Fo={};let _r=Dh.filter(e=>e.role==="user"&&e.id).map(e=>({id:e.id,name:e.name||"",email:e.email,phone:e.phone||"",password:e.role==="user"?"Neighshop#user":"Neighshop#admin",role:"user",status:e.status,createdAt:new Date().toISOString()})),Xs=cy.map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone,password:"Neighshop#provider",service:e.specialization[0],pincode:"400001",address:"",documentUrl:"/documents/provider.pdf",role:"provider",status:e.status,createdAt:new Date().toISOString()}));const kr=e=>new Promise(s=>setTimeout(s,e)),er=e=>({id:e.id,name:e.name,email:e.email,role:e.role,status:e.status,phone:e.phone}),Hu=e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(e),Bo=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),Vu=e=>/^\d{10}$/.test(e),Wa=(Fo==null?void 0:Fo.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",qa={login:async(e,s,r)=>{if(await kr(1e3),!Bo(e))return{success:!1,message:"Invalid email format"};if(r==="admin"){if(e==="admin@blinkcare.com"&&s==="Neighshop#admin"){const n=Dh.find(a=>a.role==="admin");if(n)return{success:!0,message:"Admin login successful",user:n}}return{success:!1,message:"Invalid admin credentials"}}if(r==="user"){const n=_r.find(a=>a.email===e);if(n&&n.password===s)return n.status!=="active"?{success:!1,message:"Your account is inactive"}:{success:!0,message:"Login successful",user:er(n)}}if(r==="provider"){const n=Xs.find(a=>a.email===e);if(n&&n.password===s)return n.status!=="approved"?{success:!1,message:"Your account is pending approval"}:{success:!0,message:"Login successful",user:er(n)}}return{success:!1,message:"Invalid credentials"}},registerUser:async e=>{if(await kr(1e3),!Bo(e.email))return{success:!1,message:"Invalid email format"};if(!Vu(e.phone))return{success:!1,message:"Invalid phone number format (10 digits required)"};if(!Hu(e.password))return{success:!1,message:"Password must be at least 8 characters long and contain uppercase, lowercase, number and special character"};if(_r.some(r=>r.email===e.email)||Xs.some(r=>r.email===e.email))return{success:!1,message:"Email already registered"};const s={...e,id:(_r.length+1).toString(),role:"user",status:"active",createdAt:new Date().toISOString()};return _r.push(s),{success:!0,message:"Registration successful",user:er(s)}},registerProvider:async(e,s)=>{if(await kr(1e3),!Bo(e.email))return{success:!1,message:"Invalid email format"};if(!Vu(e.phone))return{success:!1,message:"Invalid phone number format (10 digits required)"};if(!Hu(e.password))return{success:!1,message:"Password must be at least 8 characters long and contain uppercase, lowercase, number and special character"};if(!e.service)return{success:!1,message:"Service selection is required"};if(!e.pincode||!/^\d{6}$/.test(e.pincode))return{success:!1,message:"Invalid pincode format (6 digits required)"};if(_r.some(i=>i.email===e.email)||Xs.some(i=>i.email===e.email))return{success:!1,message:"Email already registered"};if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/png"].includes(s.type))return{success:!1,message:"Invalid document format"};if(s.size>5*1024*1024)return{success:!1,message:"Document size should be less than 5MB"};const n=URL.createObjectURL(s),a={...e,id:(Xs.length+1).toString(),role:"provider",status:"pending",documentUrl:n,createdAt:new Date().toISOString()};return Xs.push(a),{success:!0,message:"Registration submitted for approval. You will be notified once approved.",user:er(a)}},getRegisteredUsers:async()=>(await kr(500),_r.map(er)),getRegisteredProviders:async()=>(await kr(500),Xs.map(er)),updateProviderStatus:async(e,s)=>{await kr(500);const r=Xs.find(n=>n.id===e);return r?(r.status=s,{success:!0,message:`Provider ${s} successfully`,user:er(r)}):{success:!1,message:"Provider not found"}},sendOTP:async e=>{const s=await fetch(`${Wa}/api/provider/send-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(!s.ok)throw new Error("Failed to send OTP");return s.json()},verifyOTP:async(e,s)=>{const r=await fetch(`${Wa}/api/provider/verify-otp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,otp:s})});if(!r.ok)throw new Error("Failed to verify OTP");return r.json()},getServiceProviderInfo:async e=>{const s=await fetch(`${Wa}/create_account_service_provider`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!s.ok)throw new Error("Failed to get service provider info");return s.json()},createServiceProviderAccount:async(e,s)=>{const r=new FormData;r.append("name",s.name),r.append("service_type",s.service_type),r.append("phone_number",s.phone_number),r.append("address",s.address),r.append("pincode",s.pincode),r.append("document",s.document),s.referral&&r.append("referral",s.referral);const n=await fetch(`${Wa}/create_account_service_provider`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:r});if(!n.ok)throw new Error("Failed to create service provider account");return n.json()}},Oo={},Sr=(Oo==null?void 0:Oo.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",Rh=p.createContext(void 0),Bt=()=>{const e=p.useContext(Rh);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},dy=({children:e})=>{const[s,r]=p.useState(null),[n,a]=p.useState(null),[i,o]=p.useState(!0),l=()=>{const w=localStorage.getItem("blinkcare_user"),x=localStorage.getItem("blinkcare_token"),y=localStorage.getItem("blinkcare_role");if(x&&w)try{const m=JSON.parse(w);if(console.log("AuthContext: Restoring user data",{storedRole:y,userData:m}),y==="admin"||m.role==="admin"||m.role==="super_admin")if(x.startsWith("mock_token_")){a(x);const j={...m,role:m.role==="super_admin"?"admin":m.role};console.log("AuthContext: Restoring mock admin session",j),r(j),o(!1)}else fetch(`${Sr}/admin/verify-token`,{headers:{Authorization:`Bearer ${x}`}}).then(j=>{if(j.ok){a(x);const C={...m,role:m.role==="super_admin"?"admin":m.role};console.log("AuthContext: Setting user data after validation",C),r(C)}else localStorage.removeItem("blinkcare_token"),localStorage.removeItem("blinkcare_user"),localStorage.removeItem("blinkcare_role"),a(null),r(null)}).catch(()=>{if(m&&m.role==="admin"){a(x);const j={...m,role:m.role==="super_admin"?"admin":m.role};r(j)}else localStorage.removeItem("blinkcare_token"),localStorage.removeItem("blinkcare_user"),localStorage.removeItem("blinkcare_role"),a(null),r(null)}).finally(()=>{o(!1)});else y==="provider"||m.role==="provider"?(a(x),r(m),o(!1)):fetch(`${Sr}/api/user/profile`,{headers:{Authorization:`Bearer ${x}`}}).then(j=>{j.ok?(a(x),r(m)):(localStorage.removeItem("blinkcare_token"),localStorage.removeItem("blinkcare_user"),localStorage.removeItem("blinkcare_role"),a(null),r(null))}).catch(()=>{localStorage.removeItem("blinkcare_token"),localStorage.removeItem("blinkcare_user"),localStorage.removeItem("blinkcare_role"),a(null),r(null)}).finally(()=>{o(!1)})}catch{localStorage.removeItem("blinkcare_token"),localStorage.removeItem("blinkcare_user"),localStorage.removeItem("blinkcare_role"),a(null),r(null),o(!1)}else o(!1)};p.useEffect(()=>{l();const w=y=>{(y.key==="blinkcare_token"||y.key==="blinkcare_user"||y.key==="blinkcare_role")&&l()},x=()=>{l()};return window.addEventListener("storage",w),window.addEventListener("authUpdate",x),()=>{window.removeEventListener("storage",w),window.removeEventListener("authUpdate",x)}},[]);const b={user:s,isAuthenticated:!!n,isLoading:i,token:n,sendOTP:async w=>{try{await qa.sendOTP(w)}catch(x){throw console.error("Failed to send OTP:",x),x}},verifyOTP:async(w,x)=>{try{const y=await qa.verifyOTP(w,x);if(y.is_existing&&y.token&&y.provider){a(y.token),localStorage.setItem("blinkcare_token",y.token);const m={id:y.provider.id.toString(),email:y.provider.email,role:"provider",status:y.provider.status||"pending",name:y.provider.name||"",phone:y.provider.phone||""};return r(m),localStorage.setItem("blinkcare_user",JSON.stringify(m)),localStorage.setItem("blinkcare_role","provider"),{token:y.token,user:m,isNewUser:!1}}else return{token:null,user:null,isNewUser:!0}}catch(y){throw console.error("OTP verification failed:",y),y}},createServiceProviderAccount:async w=>{if(!n)throw new Error("No authentication token found");try{await qa.createServiceProviderAccount(n,w);const y={email:(await qa.getServiceProviderInfo(n)).email,role:"provider",name:w.name,phone:w.phone_number,status:"pending"};r(y),localStorage.setItem("blinkcare_user",JSON.stringify(y))}catch(x){throw console.error("Failed to create service provider account:",x),x}},adminLogin:async(w,x)=>{try{const y=await fetch(`${Sr}/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:w,password:x})}),m=await y.json();if(!y.ok)throw new Error(m.message||"Login failed");if(m.token){a(m.token);const j=m.admin.role==="super_admin"?"admin":m.admin.role,C={...m.admin,role:j};r(C),localStorage.setItem("blinkcare_token",m.token),localStorage.setItem("blinkcare_user",JSON.stringify(C)),localStorage.setItem("blinkcare_role","admin")}else throw new Error("No token received")}catch(y){throw console.error("Admin login failed:",y),y}},login:async(w,x,y="user")=>{try{const m=await fetch(`${Sr}/api/user/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,password:x})}),j=await m.json();if(!m.ok)throw new Error(j.message||"Login failed");if(j.token&&j.user){a(j.token);const C={id:j.user.id,email:j.user.email,role:y,status:j.user.status||"active",name:j.user.name||"",phone:j.user.phone||""};r(C),localStorage.setItem("blinkcare_token",j.token),localStorage.setItem("blinkcare_user",JSON.stringify(C)),localStorage.setItem("blinkcare_role",y);const F=localStorage.getItem("selectedService"),L=localStorage.getItem("selectedCategory");F?localStorage.removeItem("selectedService"):L&&localStorage.removeItem("selectedCategory")}else throw new Error("No token or user data received")}catch(m){throw console.error("Login failed:",m),m}},logout:()=>{r(null),a(null),localStorage.removeItem("blinkcare_user"),localStorage.removeItem("blinkcare_token"),localStorage.removeItem("blinkcare_role")},refreshUserData:async()=>{try{const w=localStorage.getItem("blinkcare_token"),x=localStorage.getItem("blinkcare_role");if(w&&x)if(x==="admin")try{const y=await fetch(`${Sr}/admin/me`,{headers:{Authorization:`Bearer ${w}`}});if(y.ok){const m=await y.json(),j={...m.admin,role:m.admin.role==="super_admin"?"admin":m.admin.role};r(j),localStorage.setItem("blinkcare_user",JSON.stringify(j)),console.log("Admin data refreshed:",j)}else y.status===404&&console.log("Admin /me endpoint not found, using stored user data")}catch(y){console.log("Admin /me endpoint error, using stored user data:",y)}else if(x==="provider")console.log("Service provider session maintained - no auto-refresh");else{const y=await fetch(`${Sr}/api/user/profile`,{headers:{Authorization:`Bearer ${w}`}});if(y.ok){const j=(await y.json()).profile,C={id:j.id,email:j.email,role:x,status:j.status||"active",name:j.name||"",phone:j.phone||""};console.log("Refreshing user data:",C),r(C),localStorage.setItem("blinkcare_user",JSON.stringify(C)),console.log("User data updated in context and localStorage")}else console.error("Failed to refresh user data:",y.status)}}catch(w){console.error("Error refreshing user data:",w)}}};return t.jsx(Rh.Provider,{value:b,children:e})},Fh=p.createContext(void 0),ot=()=>{const e=p.useContext(Fh);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},uy=({children:e})=>{const[s,r]=p.useState([]),n=p.useCallback((i,o)=>{const l=Math.random().toString(36).substring(2,9);r(c=>[...c,{id:l,message:i,type:o}]),setTimeout(()=>{r(c=>c.filter(d=>d.id!==l))},5e3)},[]),a=p.useCallback(i=>{r(o=>o.filter(l=>l.id!==i))},[]);return t.jsx(Fh.Provider,{value:{toasts:s,addToast:n,removeToast:a},children:e})},my=()=>{const{toasts:e,removeToast:s}=ot();return e.length===0?null:t.jsx("div",{className:"fixed bottom-0 right-0 p-4 z-50 max-w-md w-full",children:t.jsx("div",{className:"space-y-2",children:e.map(r=>t.jsxs("div",{className:`p-4 rounded-lg shadow-lg flex items-start justify-between transition-all duration-300 animate-slide-up
              ${r.type==="success"?"bg-success text-white":r.type==="error"?"bg-error text-white":r.type==="warning"?"bg-warning text-white":"bg-primary text-secondary-dark"}
            `,children:[t.jsx("p",{children:r.message}),t.jsx("button",{onClick:()=>s(r.id),className:"ml-4 text-sm hover:opacity-70",children:""})]},r.id))})})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var py={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),X=(e,s)=>{const r=p.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},h)=>p.createElement("svg",{ref:h,...py,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${hy(e)}`,l].join(" "),...d},[...s.map(([u,f])=>p.createElement(u,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=X("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=X("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=X("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=X("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=X("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=X("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=X("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=X("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=X("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=X("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=X("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=X("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=X("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=X("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=X("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=X("CircleDashed",[["path",{d:"M10.1 2.182a10 10 0 0 1 3.8 0",key:"5ilxe3"}],["path",{d:"M13.9 21.818a10 10 0 0 1-3.8 0",key:"11zvb9"}],["path",{d:"M17.609 3.721a10 10 0 0 1 2.69 2.7",key:"1iw5b2"}],["path",{d:"M2.182 13.9a10 10 0 0 1 0-3.8",key:"c0bmvh"}],["path",{d:"M20.279 17.609a10 10 0 0 1-2.7 2.69",key:"1ruxm7"}],["path",{d:"M21.818 10.1a10 10 0 0 1 0 3.8",key:"qkgqxc"}],["path",{d:"M3.721 6.391a10 10 0 0 1 2.7-2.69",key:"1mcia2"}],["path",{d:"M6.391 20.279a10 10 0 0 1-2.69-2.7",key:"1fvljs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=X("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=X("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=X("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=X("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=X("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=X("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=X("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=X("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=X("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=X("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=X("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=X("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=X("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=X("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=X("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=X("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=X("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=X("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=X("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=X("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=X("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=X("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=X("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M18.4 2.6a2.17 2.17 0 0 1 3 3L16 11l-4 1 1-4Z",key:"1dba1m"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=X("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=X("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=X("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=X("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=X("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=X("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=X("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=X("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=X("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=X("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=X("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=X("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=X("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=X("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=X("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=X("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=X("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=X("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=X("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=X("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=X("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=X("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=X("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=X("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=X("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=X("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=X("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Zu=()=>{const[e,s]=p.useState(""),[r,n]=p.useState(""),[a,i]=p.useState(!1),o=vn(),{adminLogin:l,isAuthenticated:c,user:d,isLoading:h}=Bt(),{addToast:u}=ot();if(p.useEffect(()=>{!h&&c&&(d==null?void 0:d.role)==="admin"&&o("/admin/dashboard",{replace:!0})},[c,d,h,o]),h)return t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});const f=async g=>{if(g.preventDefault(),i(!0),e.trim().toLowerCase()!=="admin"||r!=="admin"){u("Invalid username or password","error"),i(!1);return}try{await l(e,r),u("Login successful!","success");const _=()=>{c&&(d==null?void 0:d.role)==="admin"?o("/admin/dashboard",{replace:!0}):setTimeout(_,50)};setTimeout(_,100)}catch{const b="mock_token_"+Date.now(),w={username:"admin",email:"admin@blinkcare.com",id:1,role:"admin",name:"Admin",created_at:"2024-01-01T10:00:00Z",last_login:new Date().toISOString()};localStorage.setItem("blinkcare_role","admin"),localStorage.setItem("blinkcare_user",JSON.stringify(w)),localStorage.setItem("blinkcare_token",b),window.dispatchEvent(new CustomEvent("authUpdate"));const x=()=>{if(c&&(d==null?void 0:d.role)==="admin")u("Login successful!","success"),o("/admin/dashboard",{replace:!0});else{const y=localStorage.getItem("blinkcare_token"),m=localStorage.getItem("blinkcare_user");y&&m?setTimeout(x,100):setTimeout(x,50)}};setTimeout(x,200)}finally{i(!1)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("button",{onClick:()=>o("/login"),className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[t.jsx(gy,{className:"h-5 w-5 mr-2"}),"Back to Login Selection"]}),t.jsx("div",{children:t.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Admin Login"})}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[t.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),t.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Username",value:e,onChange:g=>s(g.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),t.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:r,onChange:g=>n(g.target.value)})]})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:a?"Logging in...":"Sign in"})})]})]})})},Vy=e=>{const s=new Date,r=s.toISOString().split("T")[0];let n;switch(e){case"7d":n=new Date(s.setDate(s.getDate()-7)).toISOString().split("T")[0];break;case"30d":n=new Date(s.setDate(s.getDate()-30)).toISOString().split("T")[0];break;case"90d":n=new Date(s.setDate(s.getDate()-90)).toISOString().split("T")[0];break;case"1y":n=new Date(s.setFullYear(s.getFullYear()-1)).toISOString().split("T")[0];break;default:n=new Date(s.setDate(s.getDate()-7)).toISOString().split("T")[0]}return{from:n,to:r}},Wy=({dateFrom:e,dateTo:s,onDateRangeChange:r,onExport:n})=>{const a=l=>{const{from:c,to:d}=Vy(l);r(c,d)},i=(l,c)=>{l==="from"?r(c,s):r(e,c)},o=()=>{const c=new Date().toISOString().split("T")[0];if(s===c){const d=Math.ceil((new Date(s).getTime()-new Date(e).getTime())/864e5);if(d<=7)return"7d";if(d<=30)return"30d";if(d<=90)return"90d";if(d<=365)return"1y"}return"custom"};return t.jsx("div",{className:"bg-white/95 backdrop-blur-md border-b border-gray-200/50 z-50 shadow-sm",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"h-16 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-blue-500 via-purple-500 to-indigo-600 rounded-xl shadow-lg",children:t.jsx(vy,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Admin Dashboard"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Platform Analytics & Management"})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"hidden sm:flex items-center space-x-2 bg-gray-50 rounded-lg px-3 py-2",children:[t.jsx(bt,{className:"w-4 h-4 text-gray-400"}),t.jsxs("select",{value:o(),onChange:l=>{l.target.value!=="custom"&&a(l.target.value)},className:"bg-transparent border-none text-sm focus:outline-none focus:ring-0 text-gray-700 font-medium",children:[t.jsx("option",{value:"7d",children:"Last 7 days"}),t.jsx("option",{value:"30d",children:"Last 30 days"}),t.jsx("option",{value:"90d",children:"Last 90 days"}),t.jsx("option",{value:"1y",children:"Last year"}),t.jsx("option",{value:"custom",children:"Custom Range"})]})]}),o()==="custom"&&t.jsxs("div",{className:"hidden md:flex items-center space-x-2 bg-gray-50 rounded-lg px-3 py-2",children:[t.jsx("input",{type:"date",value:e,onChange:l=>i("from",l.target.value),className:"bg-transparent border-none text-sm focus:outline-none focus:ring-0 text-gray-700",max:s}),t.jsx("span",{className:"text-gray-400",children:"to"}),t.jsx("input",{type:"date",value:s,onChange:l=>i("to",l.target.value),className:"bg-transparent border-none text-sm focus:outline-none focus:ring-0 text-gray-700",min:e,max:new Date().toISOString().split("T")[0]})]}),n&&t.jsxs("button",{onClick:n,className:"flex items-center space-x-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[t.jsx(sc,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Export CSV"})]}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(is,{className:"w-5 h-5"})})]})]})})})},Wo={},qy=(Wo==null?void 0:Wo.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",Nn=qy,Ku=(e,s)=>({metrics:{total_revenue:245678.5,total_bookings:1234,completed_bookings:1156,active_users:856,active_providers:234,pending_disputes:12,platform_revenue:24567.85,new_users_today:23,new_providers_today:5,pending_withdrawals:8},growth_rates:{revenue_growth:15.5,booking_growth:22.3,user_growth:18.7},recent_activity:{new_bookings:45,completed_bookings:38,new_disputes:2,payments_received:42},date_range:{from:e,to:s}}),Jy=(e,s)=>{const[r,n]=p.useState(null),[a,i]=p.useState(!0),[o,l]=p.useState(null),{token:c}=Bt();return p.useEffect(()=>{(async()=>{if(!e||!s){i(!1);return}const h=c&&c.startsWith("mock_token_");if(!c||h){setTimeout(()=>{n(Ku(e,s)),i(!1)},500);return}try{const u=await fetch(`${Nn}/admin/analytics/dashboard?date_from=${e}&date_to=${s}`,{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});if(!u.ok)throw u.status===401?new Error("Unauthorized: Please log in again"):u.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${u.status}`);const f=await u.json();if(!f.success)throw new Error(f.message||"Failed to fetch dashboard data");n({metrics:f.metrics,growth_rates:f.growth_rates,recent_activity:f.recent_activity,date_range:f.date_range})}catch(u){console.error("Error fetching dashboard data:",u),n(Ku(e,s)),l(null)}finally{i(!1)}})()},[e,s,c]),{data:r,loading:a,error:o}},Yu=()=>({trend:[{period:"2024-01-01",total_revenue:12500,platform_revenue:1250,transaction_count:45,avg_transaction_value:277.78},{period:"2024-01-02",total_revenue:13800,platform_revenue:1380,transaction_count:52,avg_transaction_value:265.38},{period:"2024-01-03",total_revenue:15200,platform_revenue:1520,transaction_count:58,avg_transaction_value:262.07},{period:"2024-01-04",total_revenue:14100,platform_revenue:1410,transaction_count:54,avg_transaction_value:261.11},{period:"2024-01-05",total_revenue:16700,platform_revenue:1670,transaction_count:63,avg_transaction_value:265.08}],payment_methods:[{method:"Credit Card",total_amount:145678,transaction_count:523},{method:"Debit Card",total_amount:67890,transaction_count:312},{method:"UPI",total_amount:32110,transaction_count:399}],category_revenue:[{category:"Plumbing",total_revenue:45678,booking_count:234,avg_booking_value:195.21},{category:"Electrical",total_revenue:38900,booking_count:198,avg_booking_value:196.46},{category:"Cleaning",total_revenue:32100,booking_count:267,avg_booking_value:120.34},{category:"Carpentry",total_revenue:28900,booking_count:145,avg_booking_value:199.31}],top_providers:[{name:"John Smith",business_name:"Smith Services",total_earnings:12345,booking_count:67},{name:"Sarah Johnson",business_name:"Johnson Pro",total_earnings:11234,booking_count:58},{name:"Mike Williams",business_name:"Williams Solutions",total_earnings:9876,booking_count:52}]}),Gy=(e,s)=>{const[r,n]=p.useState(null),[a,i]=p.useState(!0),[o,l]=p.useState(null),{token:c}=Bt();return p.useEffect(()=>{(async()=>{if(!e||!s){i(!1);return}const h=c&&c.startsWith("mock_token_");if(!c||h){setTimeout(()=>{n(Yu()),i(!1)},500);return}try{const u=await fetch(`${Nn}/admin/analytics/revenue?date_from=${e}&date_to=${s}`,{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});if(!u.ok)throw u.status===401?new Error("Unauthorized: Please log in again"):u.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${u.status}`);const f=await u.json();if(!f.success)throw new Error(f.message||"Failed to fetch revenue data");n(f.revenue_data)}catch(u){console.error("Error fetching revenue data:",u),n(Yu()),l(null)}finally{i(!1)}})()},[e,s,c]),{data:r,loading:a,error:o}},Xu=()=>({registration_trend:[{date:"2024-01-01",new_users:12},{date:"2024-01-02",new_users:18},{date:"2024-01-03",new_users:15},{date:"2024-01-04",new_users:22},{date:"2024-01-05",new_users:19}],activity_metrics:{total_users:856,active_users_30d:623,verified_users:712,users_with_bookings:534},geographic_distribution:[{city:"Mumbai",state:"Maharashtra",user_count:234,active_users:189},{city:"Delhi",state:"Delhi",user_count:198,active_users:156},{city:"Bangalore",state:"Karnataka",user_count:167,active_users:134},{city:"Pune",state:"Maharashtra",user_count:123,active_users:98}],engagement_metrics:{avg_bookings_per_user:2.3,avg_spent_per_user:456.78,repeat_user_rate:68.5},cohort_analysis:[{month:"2024-01",users_count:234,retention_rate:85.2},{month:"2023-12",users_count:198,retention_rate:82.3},{month:"2023-11",users_count:167,retention_rate:79.6}]}),Qy=(e,s)=>{const[r,n]=p.useState(null),[a,i]=p.useState(!0),[o,l]=p.useState(null),{token:c}=Bt();return p.useEffect(()=>{(async()=>{if(!e||!s){i(!1);return}const h=c&&c.startsWith("mock_token_");if(!c||h){setTimeout(()=>{n(Xu()),i(!1)},500);return}try{const u=await fetch(`${Nn}/admin/analytics/users?date_from=${e}&date_to=${s}`,{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});if(!u.ok)throw u.status===401?new Error("Unauthorized: Please log in again"):u.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${u.status}`);const f=await u.json();n(f.user_analytics)}catch(u){console.error("Error fetching user analytics:",u),n(Xu()),l(null)}finally{i(!1)}})()},[e,s,c]),{data:r,loading:a,error:o}},em=()=>({booking_trend:[{date:"2024-01-01",total_bookings:45,completed_bookings:42,cancelled_bookings:3,completion_rate:93.3},{date:"2024-01-02",total_bookings:52,completed_bookings:48,cancelled_bookings:4,completion_rate:92.3},{date:"2024-01-03",total_bookings:58,completed_bookings:55,cancelled_bookings:3,completion_rate:94.8},{date:"2024-01-04",total_bookings:54,completed_bookings:51,cancelled_bookings:3,completion_rate:94.4},{date:"2024-01-05",total_bookings:63,completed_bookings:60,cancelled_bookings:3,completion_rate:95.2}],status_distribution:[{status:"completed",count:1156},{status:"pending",count:45},{status:"in_progress",count:23},{status:"cancelled",count:10}],peak_booking_times:[{hour:9,booking_count:45},{hour:10,booking_count:67},{hour:11,booking_count:89},{hour:14,booking_count:78},{hour:15,booking_count:92},{hour:16,booking_count:85}],category_performance:[{category:"Plumbing",total_bookings:234,completed_bookings:221,completion_rate:94.4,avg_booking_value:195.21,avg_rating:4.6},{category:"Electrical",total_bookings:198,completed_bookings:187,completion_rate:94.4,avg_booking_value:196.46,avg_rating:4.7},{category:"Cleaning",total_bookings:267,completed_bookings:254,completion_rate:95.1,avg_booking_value:120.34,avg_rating:4.5}],conversion_funnel:{searches:5678,profile_views:3456,bookings:1234,completed_bookings:1156,search_to_booking_rate:21.7,booking_completion_rate:93.7}}),Zy=(e,s)=>{const[r,n]=p.useState(null),[a,i]=p.useState(!0),[o,l]=p.useState(null),{token:c}=Bt();return p.useEffect(()=>{(async()=>{if(!e||!s){i(!1);return}const h=c&&c.startsWith("mock_token_");if(!c||h){setTimeout(()=>{n(em()),i(!1)},500);return}try{const u=await fetch(`${Nn}/admin/analytics/bookings?date_from=${e}&date_to=${s}`,{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});if(!u.ok)throw u.status===401?new Error("Unauthorized: Please log in again"):u.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${u.status}`);const f=await u.json();n(f.booking_analytics)}catch(u){console.error("Error fetching booking analytics:",u),n(em()),l(null)}finally{i(!1)}})()},[e,s,c]),{data:r,loading:a,error:o}},tm=()=>({registration_trend:[{date:"2024-01-01",new_providers:3},{date:"2024-01-02",new_providers:5},{date:"2024-01-03",new_providers:4},{date:"2024-01-04",new_providers:6},{date:"2024-01-05",new_providers:5}],status_distribution:[{status:"approved",verification_status:"verified",count:189},{status:"approved",verification_status:"pending",count:45},{status:"pending",verification_status:"pending",count:23},{status:"rejected",verification_status:"rejected",count:12}],top_performers:[{name:"John Smith",business_name:"Smith Services",rating:4.8,total_bookings:67,completed_bookings:65,completion_rate:97,total_earnings:12345},{name:"Sarah Johnson",business_name:"Johnson Pro",rating:4.7,total_bookings:58,completed_bookings:56,completion_rate:96.6,total_earnings:11234},{name:"Mike Williams",business_name:"Williams Solutions",rating:4.6,total_bookings:52,completed_bookings:50,completion_rate:96.2,total_earnings:9876}],performance_metrics:{avg_platform_rating:4.5,active_providers:234,verified_providers:189,avg_completion_rate:94.2},category_distribution:[{category:"Plumbing",provider_count:67,avg_rating:4.6},{category:"Electrical",provider_count:54,avg_rating:4.7},{category:"Cleaning",provider_count:78,avg_rating:4.5},{category:"Carpentry",provider_count:35,avg_rating:4.6}]}),Ky=(e,s)=>{const[r,n]=p.useState(null),[a,i]=p.useState(!0),[o,l]=p.useState(null),{token:c}=Bt();return p.useEffect(()=>{(async()=>{if(!e||!s){i(!1);return}const h=c&&c.startsWith("mock_token_");if(!c||h){setTimeout(()=>{n(tm()),i(!1)},500);return}try{const u=await fetch(`${Nn}/admin/analytics/providers?date_from=${e}&date_to=${s}`,{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});if(!u.ok)throw u.status===401?new Error("Unauthorized: Please log in again"):u.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${u.status}`);const f=await u.json();if(!f.success)throw new Error(f.message||"Failed to fetch provider analytics");n(f.provider_analytics)}catch(u){console.error("Error fetching provider analytics:",u),n(tm()),l(null)}finally{i(!1)}})()},[e,s,c]),{data:r,loading:a,error:o}},sm=()=>({current_metrics:{avg_response_time_ms:145,avg_db_query_time_ms:23,avg_server_load:45.6,avg_memory_usage:62.3,avg_error_rate:.12,avg_uptime:99.8},time_series:[{timestamp:"2024-01-05T00:00:00Z",response_time:142,db_query_time:21,active_sessions:234,server_load:43.2,memory_usage:60.1,error_rate:.1},{timestamp:"2024-01-05T01:00:00Z",response_time:145,db_query_time:23,active_sessions:256,server_load:45.6,memory_usage:62.3,error_rate:.12},{timestamp:"2024-01-05T02:00:00Z",response_time:148,db_query_time:24,active_sessions:278,server_load:47.8,memory_usage:64.5,error_rate:.14},{timestamp:"2024-01-05T03:00:00Z",response_time:143,db_query_time:22,active_sessions:245,server_load:44.1,memory_usage:61.2,error_rate:.11}]}),Yy=()=>{const[e,s]=p.useState(null),[r,n]=p.useState(!0),[a,i]=p.useState(null),{token:o}=Bt();return p.useEffect(()=>{(async()=>{const c=o&&o.startsWith("mock_token_");if(!o||c){setTimeout(()=>{s(sm()),n(!1)},500);return}try{const d=await fetch(`${Nn}/admin/analytics/system-performance`,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(!d.ok)throw d.status===401?new Error("Unauthorized: Please log in again"):d.status===500?new Error("Server error: Please try again later"):new Error(`HTTP error! status: ${d.status}`);const h=await d.json();if(!h.success)throw new Error(h.message||"Failed to fetch system performance data");s(h.performance_data)}catch(d){console.error("Error fetching system performance data:",d),s(sm()),i(null)}finally{n(!1)}})()},[o]),{data:e,loading:r,error:a}},Xy=({dateFrom:e,dateTo:s})=>{const{data:r,loading:n,error:a}=Jy(e,s);if(n)return t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((o,l)=>t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl"}),t.jsx("div",{className:"w-20 h-6 bg-gray-200 rounded-full"})]}),t.jsx("div",{className:"w-24 h-8 bg-gray-200 rounded mb-2"}),t.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]},l))});if(a||!r)return t.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:a||"Failed to load metrics"});const i=[{name:"Total Revenue",value:`$${r.metrics.total_revenue.toLocaleString()}`,change:`${r.growth_rates.revenue_growth>0?"+":""}${r.growth_rates.revenue_growth}%`,changeType:r.growth_rates.revenue_growth>=0?"positive":"negative",icon:ga,gradient:"from-emerald-400 to-teal-500"},{name:"Total Bookings",value:r.metrics.total_bookings.toLocaleString(),change:`${r.growth_rates.booking_growth>0?"+":""}${r.growth_rates.booking_growth}%`,changeType:r.growth_rates.booking_growth>=0?"positive":"negative",icon:bt,gradient:"from-blue-400 to-cyan-500"},{name:"Completed Bookings",value:r.metrics.completed_bookings.toLocaleString(),change:`${(r.metrics.completed_bookings/r.metrics.total_bookings*100).toFixed(1)}%`,changeType:"positive",icon:Os,gradient:"from-green-400 to-emerald-500"},{name:"Active Users",value:r.metrics.active_users.toLocaleString(),change:`${r.growth_rates.user_growth>0?"+":""}${r.growth_rates.user_growth}%`,changeType:r.growth_rates.user_growth>=0?"positive":"negative",icon:Gs,gradient:"from-purple-400 to-indigo-500"},{name:"Active Providers",value:r.metrics.active_providers.toLocaleString(),change:`${r.metrics.new_providers_today>0?"+":""}${r.metrics.new_providers_today}`,changeType:"positive",icon:Wh,gradient:"from-orange-400 to-red-500"},{name:"Pending Withdrawals",value:`$${r.metrics.pending_withdrawals.toLocaleString()}`,change:"Pending",changeType:"negative",icon:St,gradient:"from-yellow-400 to-orange-500"},{name:"New Users Today",value:r.metrics.new_users_today.toLocaleString(),change:"Today",changeType:"positive",icon:pd,gradient:"from-pink-400 to-rose-500"},{name:"Pending Disputes",value:r.metrics.pending_disputes.toLocaleString(),change:"Active",changeType:"negative",icon:Bh,gradient:"from-slate-400 to-gray-500"}];return t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:i.map((o,l)=>{const c=o.icon;return t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-white/20 hover:scale-105 hover:bg-white/90",style:{animationDelay:`${l*50}ms`},children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:`flex items-center justify-center w-12 h-12 bg-gradient-to-br ${o.gradient} rounded-xl shadow-md`,children:t.jsx(c,{className:"w-6 h-6 text-white"})}),t.jsx("div",{className:`text-sm font-semibold px-3 py-1 rounded-full ${o.changeType==="positive"?"text-emerald-700 bg-emerald-100 border border-emerald-200":"text-red-700 bg-red-100 border border-red-200"}`,children:o.change})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:o.value}),t.jsx("p",{className:"text-sm text-gray-600 font-medium",children:o.name})]})]},o.name)})})},ev=[{name:"Revenue Growth",value:"12.5%",icon:nc,color:"emerald",gradient:"from-emerald-400 to-teal-500"},{name:"Booking Growth",value:"8.2%",icon:bt,color:"blue",gradient:"from-blue-400 to-cyan-500"},{name:"User Growth",value:"15.3%",icon:nc,color:"purple",gradient:"from-purple-400 to-indigo-500"}],tv=[{type:"New Bookings",count:47,color:"blue",icon:bt,gradient:"from-blue-400 to-cyan-500"},{type:"Completed Bookings",count:32,color:"emerald",icon:bt,gradient:"from-emerald-400 to-teal-500"},{type:"New Disputes",count:3,color:"red",icon:Bh,gradient:"from-red-400 to-rose-500"},{type:"Payments Received",count:28,color:"green",icon:br,gradient:"from-green-400 to-emerald-500"}],sv=()=>t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-blue-50/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[t.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full mr-3"}),"Growth Overview"]}),t.jsx("div",{className:"grid grid-cols-3 gap-4",children:ev.map(e=>{const s=e.icon;return t.jsxs("div",{className:"text-center group",children:[t.jsx("div",{className:`flex items-center justify-center w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br ${e.gradient} shadow-lg group-hover:scale-110 transition-transform duration-300`,children:t.jsx(s,{className:"w-8 h-8 text-white"})}),t.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:e.value}),t.jsx("p",{className:"text-sm text-gray-600 font-medium",children:e.name})]},e.name)})})]}),t.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-purple-50/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[t.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-purple-500 to-pink-600 rounded-full mr-3"}),"Recent Activity"]}),t.jsx("div",{className:"space-y-4",children:tv.map(e=>{const s=e.icon;return t.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/60 backdrop-blur-sm hover:bg-white/80 transition-all duration-200 border border-white/30 hover:shadow-md",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-xl bg-gradient-to-br ${e.gradient} shadow-md`,children:t.jsx(s,{className:"w-6 h-6 text-white"})}),t.jsx("span",{className:"font-semibold text-gray-900",children:e.type})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"text-2xl font-bold text-gray-900",children:e.count}),t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Today"})]})]},e.type)})})]})]}),rv=({dateFrom:e,dateTo:s})=>{const{data:r,loading:n,error:a}=Gy(e,s);if(n)return t.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-emerald-50/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("div",{className:"w-32 h-8 bg-gray-200 rounded"}),t.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded-full"})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:t.jsx("div",{className:"space-y-4",children:[...Array(6)].map((c,d)=>t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-8 h-6 bg-gray-200 rounded"}),t.jsx("div",{className:"flex-1 h-6 bg-gray-200 rounded-full"}),t.jsx("div",{className:"w-16 h-6 bg-gray-200 rounded"})]},d))})})]});if(a||!r)return t.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:a||"Failed to load revenue insights"});const i=Math.max(...r.trend.map(c=>c.total_revenue));r.trend.reduce((c,d)=>c+d.total_revenue,0);const o=Math.max(...r.payment_methods.map(c=>c.total_amount)),l=Math.max(...r.category_revenue.map(c=>c.total_revenue));return t.jsxs("div",{className:"bg-gradient-to-br from-white/90 to-emerald-50/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[t.jsx("div",{className:"w-2 h-6 bg-gradient-to-b from-emerald-500 to-teal-600 rounded-full mr-3"}),"Revenue Insights"]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-white/30",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-6 flex items-center",children:[t.jsx(nc,{className:"w-5 h-5 mr-2 text-emerald-600"}),"Revenue Over Time"]}),t.jsx("div",{className:"space-y-4",children:r.trend.map((c,d)=>t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("span",{className:"w-20 text-sm font-semibold text-gray-700",children:c.period}),t.jsxs("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative overflow-hidden",children:[t.jsx("div",{className:"bg-gradient-to-r from-emerald-400 via-teal-500 to-blue-500 h-6 rounded-full transition-all duration-1000 shadow-sm",style:{width:`${i>0?c.total_revenue/i*100:0}%`,animationDelay:`${d*200}ms`}}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})]}),t.jsxs("span",{className:"w-20 text-sm font-bold text-gray-900 text-right",children:["$",c.total_revenue.toLocaleString()]})]},c.period))})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-white/30",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx(br,{className:"w-5 h-5 mr-2 text-blue-600"}),"Payment Methods"]}),t.jsx("div",{className:"space-y-3",children:r.payment_methods.map((c,d)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/40 rounded-lg border border-white/20",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-r from-blue-400 to-blue-600 shadow-sm"}),t.jsx("span",{className:"text-sm font-semibold text-gray-700 capitalize",children:c.method})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5",children:t.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-2.5 rounded-full transition-all duration-1000",style:{width:`${o>0?c.total_amount/o*100:0}%`,animationDelay:`${d*150}ms`}})}),t.jsxs("span",{className:"text-sm font-bold text-gray-900 min-w-[80px] text-right",children:["$",c.total_amount.toLocaleString()]})]})]},c.method))})]}),t.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-white/30",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx($y,{className:"w-5 h-5 mr-2 text-purple-600"}),"Revenue by Category"]}),t.jsx("div",{className:"space-y-3",children:r.category_revenue.map((c,d)=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 capitalize",children:c.category}),t.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["$",c.total_revenue.toLocaleString()]})]}),t.jsx("div",{className:"bg-gray-200 rounded-full h-3 overflow-hidden",children:t.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-purple-600 h-3 rounded-full transition-all duration-1000 shadow-sm",style:{width:`${l>0?c.total_revenue/l*100:0}%`,animationDelay:`${d*200}ms`}})})]},c.category))})]})]})]}),t.jsxs("div",{className:"mt-8",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-6 flex items-center",children:[t.jsx(Js,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Top Earning Providers"]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:r.top_providers.map((c,d)=>t.jsxs("div",{className:"bg-white/60 backdrop-blur-sm p-6 rounded-xl border border-white/30 hover:bg-white/80 hover:shadow-lg transition-all duration-300 hover:scale-105",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold shadow-md",children:c.name.split(" ").map(h=>h[0]).join("")}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-semibold text-gray-900 truncate",children:c.name}),t.jsx("p",{className:"text-sm text-gray-600 truncate",children:c.business_name})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-xl font-bold text-emerald-600",children:["$",c.total_earnings.toLocaleString()]}),t.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-100 px-2 py-1 rounded-full",children:[t.jsx(Js,{className:"w-4 h-4 text-yellow-500 fill-current"}),t.jsxs("span",{className:"text-sm font-semibold text-yellow-700",children:[c.booking_count," bookings"]})]})]})]},c.name))})]})]})},nv=({dateFrom:e,dateTo:s})=>{const{data:r,loading:n,error:a}=Qy(e,s);if(n)return t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("div",{className:"w-32 h-8 bg-gray-200 rounded"}),t.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded-full"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((u,f)=>t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-xl"}),t.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded"}),t.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]},f))})]});if(a||!r)return t.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:a||"Failed to load user analytics"});const i=r.activity_metrics||{};r.engagement_metrics;const o=i.total_users||0,l=i.active_users_30d||0,c=i.verified_users||0,d=i.users_with_bookings||0,h=[{name:"Total Users",value:o.toLocaleString(),change:`${c} verified`,changeType:"positive",icon:Gs,gradient:"from-blue-400 to-cyan-500"},{name:"Active Users (30d)",value:l.toLocaleString(),change:"Last 30 days",changeType:"positive",icon:pd,gradient:"from-green-400 to-emerald-500"},{name:"Users with Bookings",value:d.toLocaleString(),change:`${o>0?Math.round(d/o*100):0}% of total`,changeType:"positive",icon:Oy,gradient:"from-purple-400 to-indigo-500"},{name:"Verified Users",value:c.toLocaleString(),change:`${o>0?Math.round(c/o*100):0}% verified`,changeType:"positive",icon:Uy,gradient:"from-red-400 to-rose-500"}];return t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Analytics"}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleString()]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map(u=>{const f=u.icon;return t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:`flex items-center justify-center w-16 h-16 bg-gradient-to-br ${u.gradient} rounded-xl shadow-md`,children:t.jsx(f,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.value}),t.jsx("p",{className:"text-sm text-gray-600",children:u.name})]}),t.jsx("div",{className:`text-sm font-medium px-3 py-1 rounded-full inline-block ${u.changeType==="positive"?"text-emerald-700 bg-emerald-100 border border-emerald-200":"text-red-700 bg-red-100 border border-red-200"}`,children:u.change})]},u.name)})})]})},av=({dateFrom:e,dateTo:s})=>{const{data:r,loading:n,error:a}=Zy(e,s);if(n)return t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("div",{className:"w-32 h-8 bg-gray-200 rounded"}),t.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded-full"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((u,f)=>t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-xl"}),t.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded"}),t.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]},f))})]});if(a||!r)return t.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:a||"Failed to load booking analytics"});const i=r.booking_trend&&r.booking_trend.length>0?r.booking_trend[r.booking_trend.length-1]:null,o=r.booking_trend?r.booking_trend.reduce((u,f)=>u+f.total_bookings,0):0,l=r.booking_trend?r.booking_trend.reduce((u,f)=>u+f.completed_bookings,0):0,c=r.booking_trend?r.booking_trend.reduce((u,f)=>u+f.cancelled_bookings,0):0,d=r.booking_trend&&r.booking_trend.length>0?r.booking_trend.reduce((u,f)=>u+f.completion_rate,0)/r.booking_trend.length:0,h=[{name:"Total Bookings",value:o.toLocaleString(),change:`${(i==null?void 0:i.total_bookings)||0} today`,changeType:"positive",icon:bt,gradient:"from-blue-400 to-cyan-500"},{name:"Completed Bookings",value:l.toLocaleString(),change:`${d.toFixed(1)}% avg completion`,changeType:"positive",icon:Os,gradient:"from-green-400 to-emerald-500"},{name:"Cancelled Bookings",value:c.toLocaleString(),change:`${(c/o*100).toFixed(1)}% cancellation rate`,changeType:"negative",icon:Sa,gradient:"from-red-400 to-rose-500"},{name:"Peak Hour",value:`${r.peak_booking_times&&r.peak_booking_times.length>0?r.peak_booking_times.reduce((u,f)=>u.booking_count>f.booking_count?u:f).hour:0}:00`,change:"Most Active",changeType:"positive",icon:Ot,gradient:"from-yellow-400 to-orange-500"},{name:"Search to Booking",value:`${r.conversion_funnel.search_to_booking_rate.toFixed(1)}%`,change:`${r.conversion_funnel.searches.toLocaleString()} searches`,changeType:"positive",icon:ga,gradient:"from-purple-400 to-indigo-500"},{name:"Profile Views",value:r.conversion_funnel.profile_views.toLocaleString(),change:`${(r.conversion_funnel.profile_views/r.conversion_funnel.searches*100).toFixed(1)}% view rate`,changeType:"positive",icon:St,gradient:"from-orange-400 to-red-500"}];return t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Booking Analytics"}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleString()]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(u=>{const f=u.icon;return t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:`flex items-center justify-center w-16 h-16 bg-gradient-to-br ${u.gradient} rounded-xl shadow-md`,children:t.jsx(f,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.value}),t.jsx("p",{className:"text-sm text-gray-600",children:u.name})]}),t.jsx("div",{className:`text-sm font-medium px-3 py-1 rounded-full inline-block ${u.changeType==="positive"?"text-emerald-700 bg-emerald-100 border border-emerald-200":u.changeType==="negative"?"text-red-700 bg-red-100 border border-red-200":"text-yellow-700 bg-yellow-100 border border-yellow-200"}`,children:u.change})]},u.name)})})]})},iv=({dateFrom:e,dateTo:s})=>{var d,h,u;const{data:r,loading:n,error:a}=Ky(e,s);if(n)return t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("div",{className:"w-32 h-8 bg-gray-200 rounded"}),t.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded-full"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((f,g)=>t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-xl"}),t.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded"}),t.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]},g))})]});if(a||!r)return t.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:a||"Failed to load provider analytics"});const i=r.registration_trend&&r.registration_trend.length>0?r.registration_trend[r.registration_trend.length-1]:null,o=r.status_distribution?r.status_distribution.reduce((f,g)=>f+g.count,0):0,l=r.status_distribution?r.status_distribution.filter(f=>f.verification_status==="verified").reduce((f,g)=>f+g.count,0):0,c=[{name:"Total Providers",value:o.toLocaleString(),change:`${(i==null?void 0:i.new_providers)||0} new today`,changeType:"positive",icon:Wh,gradient:"from-blue-400 to-cyan-500"},{name:"Verified Providers",value:l.toLocaleString(),change:`${(l/o*100).toFixed(1)}% verified`,changeType:"positive",icon:pd,gradient:"from-green-400 to-emerald-500"},{name:"Average Rating",value:r.performance_metrics.avg_platform_rating.toFixed(1),change:`${r.performance_metrics.avg_completion_rate.toFixed(1)}% completion`,changeType:"positive",icon:Js,gradient:"from-yellow-400 to-orange-500"},{name:"Active Providers",value:r.performance_metrics.active_providers.toLocaleString(),change:`${(r.performance_metrics.active_providers/o*100).toFixed(1)}% active`,changeType:"positive",icon:ga,gradient:"from-purple-400 to-indigo-500"},{name:"Top Performer",value:((d=r.top_performers[0])==null?void 0:d.name)||"N/A",change:`${((h=r.top_performers[0])==null?void 0:h.rating.toFixed(1))||"0"} rating`,changeType:"positive",icon:Ot,gradient:"from-pink-400 to-rose-500"},{name:"Category Leaders",value:r.category_distribution.length.toString(),change:`${((u=r.category_distribution[0])==null?void 0:u.category)||"N/A"} leading`,changeType:"positive",icon:St,gradient:"from-orange-400 to-red-500"}];return t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Provider Analytics"}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleString()]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(f=>{const g=f.icon;return t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:`flex items-center justify-center w-16 h-16 bg-gradient-to-br ${f.gradient} rounded-xl shadow-md`,children:t.jsx(g,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.value}),t.jsx("p",{className:"text-sm text-gray-600",children:f.name})]}),t.jsx("div",{className:`text-sm font-medium px-3 py-1 rounded-full inline-block ${f.changeType==="positive"?"text-emerald-700 bg-emerald-100 border border-emerald-200":"text-red-700 bg-red-100 border border-red-200"}`,children:f.change})]},f.name)})})]})},ov=()=>{const{data:e,loading:s,error:r}=Yy();if(s)return t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20 animate-pulse",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("div",{className:"w-32 h-8 bg-gray-200 rounded"}),t.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded-full"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((a,i)=>t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-xl"}),t.jsx("div",{className:"w-24 h-6 bg-gray-200 rounded"}),t.jsx("div",{className:"w-32 h-4 bg-gray-200 rounded"})]},i))})]});if(r||!e)return t.jsx("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:r||"Failed to load system performance data"});const n=[{name:"Response Time",value:`${e.current_metrics.avg_response_time_ms}ms`,change:`${e.current_metrics.avg_response_time_ms<200?"Good":"Slow"}`,changeType:e.current_metrics.avg_response_time_ms<200?"positive":"negative",icon:Ot,gradient:"from-blue-400 to-cyan-500"},{name:"DB Query Time",value:`${e.current_metrics.avg_db_query_time_ms}ms`,change:`${e.current_metrics.avg_db_query_time_ms<100?"Fast":"Slow"}`,changeType:e.current_metrics.avg_db_query_time_ms<100?"positive":"negative",icon:_y,gradient:"from-purple-400 to-indigo-500"},{name:"Server Load",value:`${e.current_metrics.avg_server_load}%`,change:`${e.current_metrics.avg_server_load<80?"Normal":"High"}`,changeType:e.current_metrics.avg_server_load<80?"positive":"negative",icon:Dy,gradient:"from-emerald-400 to-teal-500"},{name:"Memory Usage",value:`${e.current_metrics.avg_memory_usage}%`,change:`${e.current_metrics.avg_memory_usage<80?"Good":"High"}`,changeType:e.current_metrics.avg_memory_usage<80?"positive":"negative",icon:Sy,gradient:"from-orange-400 to-red-500"},{name:"Error Rate",value:`${e.current_metrics.avg_error_rate}%`,change:`${e.current_metrics.avg_error_rate<1?"Low":"High"}`,changeType:e.current_metrics.avg_error_rate<1?"positive":"negative",icon:St,gradient:"from-pink-400 to-rose-500"},{name:"Uptime",value:`${e.current_metrics.avg_uptime}%`,change:`${e.current_metrics.avg_uptime>99.9?"Excellent":"Good"}`,changeType:"positive",icon:xy,gradient:"from-yellow-400 to-orange-500"}];return t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-white/20",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"System Performance"}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleString()]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(a=>{const i=a.icon;return t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:`flex items-center justify-center w-16 h-16 bg-gradient-to-br ${a.gradient} rounded-xl shadow-md`,children:t.jsx(i,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.value}),t.jsx("p",{className:"text-sm text-gray-600",children:a.name})]}),t.jsx("div",{className:`text-sm font-medium px-3 py-1 rounded-full inline-block ${a.changeType==="positive"?"text-emerald-700 bg-emerald-100 border border-emerald-200":"text-red-700 bg-red-100 border border-red-200"}`,children:a.change})]},a.name)})})]})},rm=({isMobile:e,toggleSidebar:s})=>{const{user:r,logout:n}=Bt(),a=[{name:"Dashboard",to:"/admin/dashboard",icon:t.jsx(qu,{size:20})},{name:"Pet Trainers",to:"/admin/providers",icon:t.jsx(bn,{size:20})},{name:"Pet Owners",to:"/admin/users",icon:t.jsx(ft,{size:20})},{name:"Pet Services",to:"/admin/services",icon:t.jsx(Gu,{size:20})},{name:"Pet Categories",to:"/admin/categories",icon:t.jsx(Gu,{size:20})},{name:"Leads",to:"/admin/leads",icon:t.jsx(wy,{size:20}),badge:"New"},{name:"Site Management",to:"/admin/site",icon:t.jsx(xi,{size:20}),badge:"New"},{name:"Commission",to:"/admin/commission",icon:t.jsx(qh,{size:20})},{name:"Bookings",to:"/admin/bookings",icon:t.jsx(bt,{size:20})},{name:"Bill Management",to:"/admin/bills",icon:t.jsx(Qu,{size:20})},{name:"Transactions",to:"/admin/transactions",icon:t.jsx(Qu,{size:20})},{name:"Coupons",to:"/admin/coupons",icon:t.jsx(Fy,{size:20})},{name:"Disputes",to:"/admin/disputes",icon:t.jsx(St,{size:20})}],i=[{name:"Dashboard",to:"/provider",icon:t.jsx(qu,{size:20})},{name:"Opportunities",to:"/provider/opportunities",icon:t.jsx(Ui,{size:20}),badge:"New"},{name:"My Tasks",to:"/provider/tasks",icon:t.jsx(cd,{size:20})},{name:"Raise Request",to:"/provider/request",icon:t.jsx(ky,{size:20})},{name:"Previous Work",to:"/provider/history",icon:t.jsx(Py,{size:20})},{name:"Profile",to:"/provider/profile",icon:t.jsx(ft,{size:20})}],o=[{name:"My Services",to:"/user",icon:t.jsx(jy,{size:20})},{name:"Book Service",to:"/user/new-service",icon:t.jsx(Ws,{size:20})},{name:"Payment History",to:"/user/payments",icon:t.jsx(br,{size:20})},{name:"Report Issue",to:"/user/report",icon:t.jsx(St,{size:20})}],l=[{name:"Home",to:"/",icon:t.jsx(Cy,{size:20})},{name:"Login",to:"/login",icon:t.jsx(ft,{size:20})}],d=(()=>{if(!r)return l;switch(r.role){case"admin":return a;case"provider":return i;case"user":return o;default:return l}})();return t.jsxs("div",{className:`h-screen bg-gradient-to-b from-orange-950 via-orange-900 to-orange-950 text-white flex flex-col transition-all duration-300 ${e?"fixed top-0 left-0 z-40 w-64 shadow-2xl transform":"w-64"}`,children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-orange-800/30",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"h-10 w-10 rounded-xl bg-white flex items-center justify-center shadow-lg ring-2 ring-orange-400/40 overflow-hidden",children:t.jsx("img",{src:"/src/assets/logo.png",alt:"Petnex Logo",className:"w-full h-full object-cover"})}),t.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-orange-950"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-xl bg-gradient-to-r from-orange-200 to-yellow-200 bg-clip-text text-transparent",children:"Petnex"}),t.jsx("div",{className:"text-xs text-orange-200/80 mt-0.5",children:(r==null?void 0:r.role)==="admin"?"Admin Portal":(r==null?void 0:r.role)==="provider"?"Trainer Hub":(r==null?void 0:r.role)==="user"?"Pet Care":"Welcome"})]})]}),e&&t.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-orange-900/40 transition-colors",children:t.jsx(He,{size:20})})]}),r&&t.jsx("div",{className:"p-6 border-b border-orange-800/30",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-500 to-yellow-400 flex items-center justify-center shadow-lg",children:t.jsx(ft,{size:20,className:"text-white"})}),t.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-emerald-500 rounded-full border-2 border-orange-950 flex items-center justify-center",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-semibold text-white truncate",children:r.name||"User"}),t.jsx("p",{className:"text-sm text-orange-200/80 truncate",children:r.email})]})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto py-6 px-4",children:[t.jsx("nav",{className:"space-y-2",children:d.map(h=>t.jsxs("div",{className:"relative",children:[t.jsxs(hi,{to:h.to,className:({isActive:u})=>`group flex items-center justify-between p-3 rounded-xl transition-all duration-200 ${u?"bg-gradient-to-r from-orange-500 to-yellow-400 text-orange-50 shadow-lg transform scale-[1.02]":"text-orange-100/80 hover:bg-orange-900/40 hover:text-white hover:transform hover:scale-[1.02]"}`,onClick:e?s:void 0,children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"relative",children:[h.icon,h.badge&&t.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-amber-400 rounded-full"})]}),t.jsx("span",{className:"font-medium",children:h.name})]}),h.badge&&t.jsx("span",{className:"px-2 py-1 text-xs bg-amber-400 text-orange-950 font-semibold rounded-full",children:h.badge})]}),t.jsx("div",{className:`absolute inset-0 rounded-xl bg-gradient-to-r from-orange-500/20 to-yellow-400/20 transition-opacity duration-300 ${window.location.pathname===h.to?"opacity-100":"opacity-0"}`,style:{zIndex:-1}})]},h.name))}),(r==null?void 0:r.role)==="user"&&t.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-r from-orange-900/30 to-yellow-800/20 rounded-xl border border-orange-800/30",children:[t.jsx("h3",{className:"text-sm font-semibold text-orange-100 mb-3",children:"Quick Actions"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(hi,{to:"/user/new-service",className:"flex items-center space-x-2 p-2 rounded-lg text-amber-300 hover:bg-orange-900/30 transition-colors",children:[t.jsx(Hy,{size:16}),t.jsx("span",{className:"text-sm",children:"Book Service"})]}),t.jsxs(hi,{to:"/user/services",className:"flex items-center space-x-2 p-2 rounded-lg text-orange-200 hover:bg-orange-900/30 transition-colors",children:[t.jsx(Js,{size:16}),t.jsx("span",{className:"text-sm",children:"Rate Services"})]})]})]})]}),r&&t.jsx("div",{className:"p-4 border-t border-orange-800/30",children:t.jsxs("button",{onClick:n,className:"flex items-center justify-center w-full p-3 rounded-xl text-orange-100/80 hover:bg-orange-900/40 hover:text-red-200 transition-all duration-200 group",children:[t.jsx(dd,{size:20,className:"mr-3 group-hover:transform group-hover:scale-110 transition-transform"}),t.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]})},lv=({toggleSidebar:e})=>{const s=vn(),{user:r,logout:n,refreshUserData:a}=Bt(),[i,o]=p.useState(!1),[l,c]=p.useState(!1),[d,h]=p.useState(0),[u,f]=p.useState(!1),g=p.useRef(null),_=p.useRef(null),b=p.useRef(),w=p.useRef(),x=()=>{n(),s("/login")},y=async()=>{f(!0);try{await a(),await new Promise(L=>setTimeout(L,100)),console.log("Header refresh completed")}catch(L){console.error("Error refreshing user data:",L)}finally{setTimeout(()=>f(!1),1e3)}},m=()=>{h(L=>L+1),w.current&&clearTimeout(w.current),d>=2?(y(),h(0)):w.current=setTimeout(()=>{h(0)},2e3)},j=[{id:1,type:"service",title:"Service Completed",message:"Your AC repair service has been completed successfully.",time:"2 hours ago",read:!1},{id:2,type:"promotion",title:"Special Offer",message:"Get 20% off on your next home cleaning service.",time:"1 day ago",read:!1},{id:3,type:"reminder",title:"Upcoming Service",message:"Your plumbing service is scheduled for tomorrow at 10:00 AM.",time:"2 days ago",read:!0}],C=j.filter(L=>!L.read).length;p.useEffect(()=>{const L=P=>{g.current&&!g.current.contains(P.target)&&o(!1),_.current&&!_.current.contains(P.target)&&c(!1)},$=P=>{P.ctrlKey&&P.shiftKey&&P.key==="R"&&(P.preventDefault(),y())};return document.addEventListener("mousedown",L),document.addEventListener("keydown",$),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("keydown",$),b.current&&clearTimeout(b.current),w.current&&clearTimeout(w.current)}},[]),p.useEffect(()=>{r&&r.id&&a()},[r==null?void 0:r.id]);const F=L=>{switch(L){case"service":return t.jsx(Js,{size:16,className:"text-orange-500"});case"promotion":return t.jsx(Ju,{size:16,className:"text-amber-500"});case"reminder":return t.jsx(Ot,{size:16,className:"text-rose-400"});default:return t.jsx(Ui,{size:16,className:"text-orange-300"})}};return t.jsxs("header",{className:"bg-gradient-to-r from-orange-50/95 via-white/95 to-orange-50/95 backdrop-blur-sm shadow-sm border-b border-orange-100/70 h-16 flex items-center justify-between px-4 lg:px-6 relative z-30 text-orange-950",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("button",{onClick:e,className:"p-2 rounded-xl text-orange-500 hover:bg-orange-100/80 hover:text-orange-700 lg:hidden transition-all duration-200",children:t.jsx(Ty,{size:24})})}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>c(!l),className:"relative p-2 rounded-xl text-orange-500 hover:bg-orange-100/80 hover:text-orange-700 transition-all duration-200 group",children:[t.jsx(Ui,{size:20}),C>0&&t.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-orange-500 to-amber-400 text-white text-xs rounded-full flex items-center justify-center font-semibold animate-pulse",children:C})]}),l&&t.jsxs("div",{ref:_,className:"absolute right-0 mt-2 w-80 bg-white/95 rounded-xl shadow-xl border border-orange-100 py-2 z-50 transform transition-all duration-200 ease-in-out",children:[t.jsx("div",{className:"px-4 py-3 border-b border-orange-100 bg-gradient-to-r from-orange-50 to-amber-50",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-orange-900",children:"Notifications"}),t.jsxs("span",{className:"text-xs text-orange-500",children:[C," new"]})]})}),t.jsx("div",{className:"max-h-80 overflow-y-auto",children:j.map(L=>t.jsx("div",{className:`px-4 py-3 hover:bg-orange-50/60 cursor-pointer transition-colors duration-200 ${L.read?"":"bg-orange-50/70"}`,children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"mt-1",children:F(L.type)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"font-medium text-orange-900 text-sm",children:L.title}),!L.read&&t.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full ml-2"})]}),t.jsx("p",{className:"text-orange-700/80 text-sm mt-1",children:L.message}),t.jsx("p",{className:"text-orange-400 text-xs mt-1",children:L.time})]})]})},L.id))}),t.jsx("div",{className:"px-4 py-3 border-t border-orange-100 bg-orange-50/60",children:t.jsx("button",{className:"w-full text-center text-sm text-orange-600 hover:text-orange-700 font-medium",children:"View all notifications"})})]})]}),r?t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer p-2 rounded-xl hover:bg-orange-100/60 transition-all duration-200",onClick:()=>o(!i),onDoubleClick:m,children:[t.jsxs("div",{className:"hidden sm:block text-right",children:[t.jsx("p",{className:"text-sm font-medium text-orange-900",children:r.name||"User"}),t.jsx("p",{className:"text-xs text-orange-500 capitalize",children:r.role})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-500 to-amber-400 flex items-center justify-center shadow-md",children:u?t.jsx(Vi,{size:20,className:"text-orange-50 animate-spin"}):t.jsx(ft,{size:20,className:"text-white"})}),t.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-white"}),u&&t.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-500 rounded-full border-2 border-white animate-pulse"})]}),t.jsx(jr,{size:16,className:"text-orange-400 hidden sm:block"})]}),i&&t.jsxs("div",{ref:g,className:"absolute right-0 mt-2 w-80 bg-white/95 rounded-xl shadow-xl border border-orange-100 py-3 z-50 transform transition-all duration-200 ease-in-out",children:[t.jsx("div",{className:"px-4 py-3 border-b border-orange-100 bg-gradient-to-r from-orange-50 to-amber-50",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-orange-500 to-amber-400 flex items-center justify-center shadow-md",children:t.jsx(ft,{size:24,className:"text-white"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-semibold text-orange-900 truncate",children:r.name||"User"}),t.jsx("p",{className:"text-sm text-orange-600 truncate",children:r.email}),t.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700 capitalize",children:r.role}),t.jsxs("span",{className:"flex items-center text-xs text-emerald-600",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"Online"]})]})]})]})}),t.jsx("div",{className:"px-4 py-3",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(bt,{size:16,className:"text-orange-400"}),t.jsx("span",{className:"text-orange-600",children:"Member since"})]}),t.jsx("span",{className:"text-orange-900",children:"Jan 2024"})]}),r.role==="user"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Js,{size:16,className:"text-orange-400"}),t.jsx("span",{className:"text-orange-600",children:"Services booked"})]}),t.jsx("span",{className:"text-orange-900",children:"12"})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ju,{size:16,className:"text-orange-400"}),t.jsx("span",{className:"text-orange-600",children:"Loyalty points"})]}),t.jsx("span",{className:"text-amber-600 font-semibold",children:"850"})]})]})]})}),t.jsx("div",{className:"px-4 py-2 border-t border-orange-100 bg-orange-50/60",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("button",{onClick:()=>s(`/${r.role}/profile`),className:"w-full flex items-center space-x-3 text-sm text-orange-700 hover:bg-orange-100/70 py-2 px-3 rounded-lg transition-colors duration-200",children:[t.jsx(ud,{size:16}),t.jsx("span",{children:"Account Settings"})]}),t.jsxs("button",{onClick:x,className:"w-full flex items-center space-x-3 text-sm text-red-600 hover:bg-red-50 py-2 px-3 rounded-lg transition-colors duration-200",children:[t.jsx(dd,{size:16}),t.jsx("span",{children:"Sign Out"})]})]})})]})]}):t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("button",{onClick:()=>s("/login"),className:"px-4 py-2 text-sm font-medium text-orange-700 hover:text-orange-900 transition-colors duration-200",children:"Sign In"}),t.jsx("button",{onClick:()=>s("/register"),className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-orange-500 to-amber-400 hover:from-orange-600 hover:to-amber-500 rounded-lg transition-all duration-200",children:"Get Started"})]})]})]})},mt=({children:e})=>{const{user:s}=Bt(),[r,n]=p.useState(!1),a=()=>{n(!r)};return t.jsxs("div",{className:"flex h-screen bg-[#fff7f0]",children:[t.jsx("div",{className:"hidden lg:block",children:t.jsx(rm,{isMobile:!1,toggleSidebar:a})}),r&&t.jsxs("div",{className:"lg:hidden",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30",onClick:a}),t.jsx(rm,{isMobile:!0,toggleSidebar:a})]}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsx(lv,{toggleSidebar:a}),t.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e})]})]})},cv=()=>{const[e,s]=p.useState("30d"),[r,n]=p.useState(""),[a,i]=p.useState("");p.useEffect(()=>{const l=new Date,c=l.toISOString().split("T")[0];let d;switch(e){case"7d":d=new Date(l.setDate(l.getDate()-7)).toISOString().split("T")[0];break;case"30d":d=new Date(l.setDate(l.getDate()-30)).toISOString().split("T")[0];break;case"90d":d=new Date(l.setDate(l.getDate()-90)).toISOString().split("T")[0];break;case"1y":d=new Date(l.setFullYear(l.getFullYear()-1)).toISOString().split("T")[0];break;default:d=new Date(l.setDate(l.getDate()-7)).toISOString().split("T")[0]}n(d),i(c)},[e]);const o=(l,c)=>{n(l),i(c)};return t.jsx(mt,{children:t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[t.jsx(Wy,{dateFrom:r,dateTo:a,onDateRangeChange:o}),t.jsx("div",{className:"pt-20 pb-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8",children:[t.jsx(Xy,{dateFrom:r,dateTo:a}),t.jsx(sv,{}),t.jsx(rv,{dateFrom:r,dateTo:a}),t.jsx(nv,{dateFrom:r,dateTo:a}),t.jsx(av,{dateFrom:r,dateTo:a}),t.jsx(iv,{dateFrom:r,dateTo:a}),t.jsx(ov,{})]})})]})})},Ee=({children:e,className:s=""})=>t.jsx("div",{className:`bg-white rounded-lg shadow-card overflow-hidden ${s}`,children:e}),It=({children:e,className:s=""})=>t.jsx("div",{className:`p-6 border-b border-gray-200 ${s}`,children:e}),Mt=({children:e,className:s=""})=>t.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${s}`,children:e}),Pe=({children:e,className:s=""})=>t.jsx("div",{className:`p-6 ${s}`,children:e});function Jh(e){var s,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(s=0;s<a;s++)e[s]&&(r=Jh(e[s]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function dv(){for(var e,s,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(s=Jh(e))&&(n&&(n+=" "),n+=s);return n}const uv=(e,s)=>{const r=new Array(e.length+s.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<s.length;n++)r[e.length+n]=s[n];return r},mv=(e,s)=>({classGroupId:e,validator:s}),Gh=(e=new Map,s=null,r)=>({nextPart:e,validators:s,classGroupId:r}),Wi="-",nm=[],pv="arbitrary..",hv=e=>{const s=gv(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return xv(o);const l=o.split(Wi),c=l[0]===""&&l.length>1?1:0;return Qh(l,c,s)},getConflictingClassGroupIds:(o,l)=>{if(l){const c=n[o],d=r[o];return c?d?uv(d,c):c:d||nm}return r[o]||nm}}},Qh=(e,s,r)=>{if(e.length-s===0)return r.classGroupId;const a=e[s],i=r.nextPart.get(a);if(i){const d=Qh(e,s+1,i);if(d)return d}const o=r.validators;if(o===null)return;const l=s===0?e.join(Wi):e.slice(s).join(Wi),c=o.length;for(let d=0;d<c;d++){const h=o[d];if(h.validator(l))return h.classGroupId}},xv=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const s=e.slice(1,-1),r=s.indexOf(":"),n=s.slice(0,r);return n?pv+n:void 0})(),gv=e=>{const{theme:s,classGroups:r}=e;return fv(r,s)},fv=(e,s)=>{const r=Gh();for(const n in e){const a=e[n];hd(a,r,n,s)}return r},hd=(e,s,r,n)=>{const a=e.length;for(let i=0;i<a;i++){const o=e[i];yv(o,s,r,n)}},yv=(e,s,r,n)=>{if(typeof e=="string"){vv(e,s,r);return}if(typeof e=="function"){jv(e,s,r,n);return}bv(e,s,r,n)},vv=(e,s,r)=>{const n=e===""?s:Zh(s,e);n.classGroupId=r},jv=(e,s,r,n)=>{if(Nv(e)){hd(e(n),s,r,n);return}s.validators===null&&(s.validators=[]),s.validators.push(mv(r,e))},bv=(e,s,r,n)=>{const a=Object.entries(e),i=a.length;for(let o=0;o<i;o++){const[l,c]=a[o];hd(c,Zh(s,l),r,n)}},Zh=(e,s)=>{let r=e;const n=s.split(Wi),a=n.length;for(let i=0;i<a;i++){const o=n[i];let l=r.nextPart.get(o);l||(l=Gh(),r.nextPart.set(o,l)),r=l}return r},Nv=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,wv=e=>{if(e<1)return{get:()=>{},set:()=>{}};let s=0,r=Object.create(null),n=Object.create(null);const a=(i,o)=>{r[i]=o,s++,s>e&&(s=0,n=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return a(i,o),o},set(i,o){i in r?r[i]=o:a(i,o)}}},ic="!",am=":",_v=[],im=(e,s,r,n,a)=>({modifiers:e,hasImportantModifier:s,baseClassName:r,maybePostfixModifierPosition:n,isExternal:a}),kv=e=>{const{prefix:s,experimentalParseClassName:r}=e;let n=a=>{const i=[];let o=0,l=0,c=0,d;const h=a.length;for(let b=0;b<h;b++){const w=a[b];if(o===0&&l===0){if(w===am){i.push(a.slice(c,b)),c=b+1;continue}if(w==="/"){d=b;continue}}w==="["?o++:w==="]"?o--:w==="("?l++:w===")"&&l--}const u=i.length===0?a:a.slice(c);let f=u,g=!1;u.endsWith(ic)?(f=u.slice(0,-1),g=!0):u.startsWith(ic)&&(f=u.slice(1),g=!0);const _=d&&d>c?d-c:void 0;return im(i,g,f,_)};if(s){const a=s+am,i=n;n=o=>o.startsWith(a)?i(o.slice(a.length)):im(_v,!1,o,void 0,!0)}if(r){const a=n;n=i=>r({className:i,parseClassName:a})}return n},Sv=e=>{const s=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{s.set(r,1e6+n)}),r=>{const n=[];let a=[];for(let i=0;i<r.length;i++){const o=r[i],l=o[0]==="[",c=s.has(o);l||c?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(o)):a.push(o)}return a.length>0&&(a.sort(),n.push(...a)),n}},Cv=e=>({cache:wv(e.cacheSize),parseClassName:kv(e),sortModifiers:Sv(e),...hv(e)}),Ev=/\s+/,Pv=(e,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:i}=s,o=[],l=e.trim().split(Ev);let c="";for(let d=l.length-1;d>=0;d-=1){const h=l[d],{isExternal:u,modifiers:f,hasImportantModifier:g,baseClassName:_,maybePostfixModifierPosition:b}=r(h);if(u){c=h+(c.length>0?" "+c:c);continue}let w=!!b,x=n(w?_.substring(0,b):_);if(!x){if(!w){c=h+(c.length>0?" "+c:c);continue}if(x=n(_),!x){c=h+(c.length>0?" "+c:c);continue}w=!1}const y=f.length===0?"":f.length===1?f[0]:i(f).join(":"),m=g?y+ic:y,j=m+x;if(o.indexOf(j)>-1)continue;o.push(j);const C=a(x,w);for(let F=0;F<C.length;++F){const L=C[F];o.push(m+L)}c=h+(c.length>0?" "+c:c)}return c},Tv=(...e)=>{let s=0,r,n,a="";for(;s<e.length;)(r=e[s++])&&(n=Kh(r))&&(a&&(a+=" "),a+=n);return a},Kh=e=>{if(typeof e=="string")return e;let s,r="";for(let n=0;n<e.length;n++)e[n]&&(s=Kh(e[n]))&&(r&&(r+=" "),r+=s);return r},zv=(e,...s)=>{let r,n,a,i;const o=c=>{const d=s.reduce((h,u)=>u(h),e());return r=Cv(d),n=r.cache.get,a=r.cache.set,i=l,l(c)},l=c=>{const d=n(c);if(d)return d;const h=Pv(c,r);return a(c,h),h};return i=o,(...c)=>i(Tv(...c))},Av=[],Ge=e=>{const s=r=>r[e]||Av;return s.isThemeGetter=!0,s},Yh=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Xh=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Lv=/^\d+\/\d+$/,$v=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Iv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Mv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Dv=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Rv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Cr=e=>Lv.test(e),ye=e=>!!e&&!Number.isNaN(Number(e)),_s=e=>!!e&&Number.isInteger(Number(e)),qo=e=>e.endsWith("%")&&ye(e.slice(0,-1)),os=e=>$v.test(e),Fv=()=>!0,Bv=e=>Iv.test(e)&&!Mv.test(e),ex=()=>!1,Ov=e=>Dv.test(e),Uv=e=>Rv.test(e),Hv=e=>!oe(e)&&!le(e),Vv=e=>wn(e,rx,ex),oe=e=>Yh.test(e),tr=e=>wn(e,nx,Bv),Jo=e=>wn(e,Qv,ye),om=e=>wn(e,tx,ex),Wv=e=>wn(e,sx,Uv),Ja=e=>wn(e,ax,Ov),le=e=>Xh.test(e),Mn=e=>_n(e,nx),qv=e=>_n(e,Zv),lm=e=>_n(e,tx),Jv=e=>_n(e,rx),Gv=e=>_n(e,sx),Ga=e=>_n(e,ax,!0),wn=(e,s,r)=>{const n=Yh.exec(e);return n?n[1]?s(n[1]):r(n[2]):!1},_n=(e,s,r=!1)=>{const n=Xh.exec(e);return n?n[1]?s(n[1]):r:!1},tx=e=>e==="position"||e==="percentage",sx=e=>e==="image"||e==="url",rx=e=>e==="length"||e==="size"||e==="bg-size",nx=e=>e==="length",Qv=e=>e==="number",Zv=e=>e==="family-name",ax=e=>e==="shadow",Kv=()=>{const e=Ge("color"),s=Ge("font"),r=Ge("text"),n=Ge("font-weight"),a=Ge("tracking"),i=Ge("leading"),o=Ge("breakpoint"),l=Ge("container"),c=Ge("spacing"),d=Ge("radius"),h=Ge("shadow"),u=Ge("inset-shadow"),f=Ge("text-shadow"),g=Ge("drop-shadow"),_=Ge("blur"),b=Ge("perspective"),w=Ge("aspect"),x=Ge("ease"),y=Ge("animate"),m=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],C=()=>[...j(),le,oe],F=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto","contain","none"],$=()=>[le,oe,c],P=()=>[Cr,"full","auto",...$()],z=()=>[_s,"none","subgrid",le,oe],H=()=>["auto",{span:["full",_s,le,oe]},_s,le,oe],q=()=>[_s,"auto",le,oe],k=()=>["auto","min","max","fr",le,oe],S=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],M=()=>["start","end","center","stretch","center-safe","end-safe"],I=()=>["auto",...$()],O=()=>[Cr,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...$()],E=()=>[e,le,oe],B=()=>[...j(),lm,om,{position:[le,oe]}],Q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],A=()=>["auto","cover","contain",Jv,Vv,{size:[le,oe]}],W=()=>[qo,Mn,tr],ee=()=>["","none","full",d,le,oe],ie=()=>["",ye,Mn,tr],v=()=>["solid","dashed","dotted","double"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>[ye,qo,lm,om],K=()=>["","none",_,le,oe],ae=()=>["none",ye,le,oe],ce=()=>["none",ye,le,oe],T=()=>[ye,le,oe],D=()=>[Cr,"full",...$()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[os],breakpoint:[os],color:[Fv],container:[os],"drop-shadow":[os],ease:["in","out","in-out"],font:[Hv],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[os],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[os],shadow:[os],spacing:["px",ye],text:[os],"text-shadow":[os],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Cr,oe,le,w]}],container:["container"],columns:[{columns:[ye,oe,le,l]}],"break-after":[{"break-after":m()}],"break-before":[{"break-before":m()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:C()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[_s,"auto",le,oe]}],basis:[{basis:[Cr,"full","auto",l,...$()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ye,Cr,"auto","initial","none",oe]}],grow:[{grow:["",ye,le,oe]}],shrink:[{shrink:["",ye,le,oe]}],order:[{order:[_s,"first","last","none",le,oe]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:$()}],"gap-x":[{"gap-x":$()}],"gap-y":[{"gap-y":$()}],"justify-content":[{justify:[...S(),"normal"]}],"justify-items":[{"justify-items":[...M(),"normal"]}],"justify-self":[{"justify-self":["auto",...M()]}],"align-content":[{content:["normal",...S()]}],"align-items":[{items:[...M(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...M(),{baseline:["","last"]}]}],"place-content":[{"place-content":S()}],"place-items":[{"place-items":[...M(),"baseline"]}],"place-self":[{"place-self":["auto",...M()]}],p:[{p:$()}],px:[{px:$()}],py:[{py:$()}],ps:[{ps:$()}],pe:[{pe:$()}],pt:[{pt:$()}],pr:[{pr:$()}],pb:[{pb:$()}],pl:[{pl:$()}],m:[{m:I()}],mx:[{mx:I()}],my:[{my:I()}],ms:[{ms:I()}],me:[{me:I()}],mt:[{mt:I()}],mr:[{mr:I()}],mb:[{mb:I()}],ml:[{ml:I()}],"space-x":[{"space-x":$()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":$()}],"space-y-reverse":["space-y-reverse"],size:[{size:O()}],w:[{w:[l,"screen",...O()]}],"min-w":[{"min-w":[l,"screen","none",...O()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...O()]}],h:[{h:["screen","lh",...O()]}],"min-h":[{"min-h":["screen","lh","none",...O()]}],"max-h":[{"max-h":["screen","lh",...O()]}],"font-size":[{text:["base",r,Mn,tr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,le,Jo]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",qo,oe]}],"font-family":[{font:[qv,oe,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,le,oe]}],"line-clamp":[{"line-clamp":[ye,"none",le,Jo]}],leading:[{leading:[i,...$()]}],"list-image":[{"list-image":["none",le,oe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",le,oe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:E()}],"text-color":[{text:E()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...v(),"wavy"]}],"text-decoration-thickness":[{decoration:[ye,"from-font","auto",le,tr]}],"text-decoration-color":[{decoration:E()}],"underline-offset":[{"underline-offset":[ye,"auto",le,oe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",le,oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",le,oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:B()}],"bg-repeat":[{bg:Q()}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_s,le,oe],radial:["",le,oe],conic:[_s,le,oe]},Gv,Wv]}],"bg-color":[{bg:E()}],"gradient-from-pos":[{from:W()}],"gradient-via-pos":[{via:W()}],"gradient-to-pos":[{to:W()}],"gradient-from":[{from:E()}],"gradient-via":[{via:E()}],"gradient-to":[{to:E()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:ie()}],"border-w-x":[{"border-x":ie()}],"border-w-y":[{"border-y":ie()}],"border-w-s":[{"border-s":ie()}],"border-w-e":[{"border-e":ie()}],"border-w-t":[{"border-t":ie()}],"border-w-r":[{"border-r":ie()}],"border-w-b":[{"border-b":ie()}],"border-w-l":[{"border-l":ie()}],"divide-x":[{"divide-x":ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...v(),"hidden","none"]}],"divide-style":[{divide:[...v(),"hidden","none"]}],"border-color":[{border:E()}],"border-color-x":[{"border-x":E()}],"border-color-y":[{"border-y":E()}],"border-color-s":[{"border-s":E()}],"border-color-e":[{"border-e":E()}],"border-color-t":[{"border-t":E()}],"border-color-r":[{"border-r":E()}],"border-color-b":[{"border-b":E()}],"border-color-l":[{"border-l":E()}],"divide-color":[{divide:E()}],"outline-style":[{outline:[...v(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ye,le,oe]}],"outline-w":[{outline:["",ye,Mn,tr]}],"outline-color":[{outline:E()}],shadow:[{shadow:["","none",h,Ga,Ja]}],"shadow-color":[{shadow:E()}],"inset-shadow":[{"inset-shadow":["none",u,Ga,Ja]}],"inset-shadow-color":[{"inset-shadow":E()}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:E()}],"ring-offset-w":[{"ring-offset":[ye,tr]}],"ring-offset-color":[{"ring-offset":E()}],"inset-ring-w":[{"inset-ring":ie()}],"inset-ring-color":[{"inset-ring":E()}],"text-shadow":[{"text-shadow":["none",f,Ga,Ja]}],"text-shadow-color":[{"text-shadow":E()}],opacity:[{opacity:[ye,le,oe]}],"mix-blend":[{"mix-blend":[...R(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":R()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ye]}],"mask-image-linear-from-pos":[{"mask-linear-from":U()}],"mask-image-linear-to-pos":[{"mask-linear-to":U()}],"mask-image-linear-from-color":[{"mask-linear-from":E()}],"mask-image-linear-to-color":[{"mask-linear-to":E()}],"mask-image-t-from-pos":[{"mask-t-from":U()}],"mask-image-t-to-pos":[{"mask-t-to":U()}],"mask-image-t-from-color":[{"mask-t-from":E()}],"mask-image-t-to-color":[{"mask-t-to":E()}],"mask-image-r-from-pos":[{"mask-r-from":U()}],"mask-image-r-to-pos":[{"mask-r-to":U()}],"mask-image-r-from-color":[{"mask-r-from":E()}],"mask-image-r-to-color":[{"mask-r-to":E()}],"mask-image-b-from-pos":[{"mask-b-from":U()}],"mask-image-b-to-pos":[{"mask-b-to":U()}],"mask-image-b-from-color":[{"mask-b-from":E()}],"mask-image-b-to-color":[{"mask-b-to":E()}],"mask-image-l-from-pos":[{"mask-l-from":U()}],"mask-image-l-to-pos":[{"mask-l-to":U()}],"mask-image-l-from-color":[{"mask-l-from":E()}],"mask-image-l-to-color":[{"mask-l-to":E()}],"mask-image-x-from-pos":[{"mask-x-from":U()}],"mask-image-x-to-pos":[{"mask-x-to":U()}],"mask-image-x-from-color":[{"mask-x-from":E()}],"mask-image-x-to-color":[{"mask-x-to":E()}],"mask-image-y-from-pos":[{"mask-y-from":U()}],"mask-image-y-to-pos":[{"mask-y-to":U()}],"mask-image-y-from-color":[{"mask-y-from":E()}],"mask-image-y-to-color":[{"mask-y-to":E()}],"mask-image-radial":[{"mask-radial":[le,oe]}],"mask-image-radial-from-pos":[{"mask-radial-from":U()}],"mask-image-radial-to-pos":[{"mask-radial-to":U()}],"mask-image-radial-from-color":[{"mask-radial-from":E()}],"mask-image-radial-to-color":[{"mask-radial-to":E()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[ye]}],"mask-image-conic-from-pos":[{"mask-conic-from":U()}],"mask-image-conic-to-pos":[{"mask-conic-to":U()}],"mask-image-conic-from-color":[{"mask-conic-from":E()}],"mask-image-conic-to-color":[{"mask-conic-to":E()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:B()}],"mask-repeat":[{mask:Q()}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",le,oe]}],filter:[{filter:["","none",le,oe]}],blur:[{blur:K()}],brightness:[{brightness:[ye,le,oe]}],contrast:[{contrast:[ye,le,oe]}],"drop-shadow":[{"drop-shadow":["","none",g,Ga,Ja]}],"drop-shadow-color":[{"drop-shadow":E()}],grayscale:[{grayscale:["",ye,le,oe]}],"hue-rotate":[{"hue-rotate":[ye,le,oe]}],invert:[{invert:["",ye,le,oe]}],saturate:[{saturate:[ye,le,oe]}],sepia:[{sepia:["",ye,le,oe]}],"backdrop-filter":[{"backdrop-filter":["","none",le,oe]}],"backdrop-blur":[{"backdrop-blur":K()}],"backdrop-brightness":[{"backdrop-brightness":[ye,le,oe]}],"backdrop-contrast":[{"backdrop-contrast":[ye,le,oe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ye,le,oe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ye,le,oe]}],"backdrop-invert":[{"backdrop-invert":["",ye,le,oe]}],"backdrop-opacity":[{"backdrop-opacity":[ye,le,oe]}],"backdrop-saturate":[{"backdrop-saturate":[ye,le,oe]}],"backdrop-sepia":[{"backdrop-sepia":["",ye,le,oe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":$()}],"border-spacing-x":[{"border-spacing-x":$()}],"border-spacing-y":[{"border-spacing-y":$()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",le,oe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ye,"initial",le,oe]}],ease:[{ease:["linear","initial",x,le,oe]}],delay:[{delay:[ye,le,oe]}],animate:[{animate:["none",y,le,oe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,le,oe]}],"perspective-origin":[{"perspective-origin":C()}],rotate:[{rotate:ae()}],"rotate-x":[{"rotate-x":ae()}],"rotate-y":[{"rotate-y":ae()}],"rotate-z":[{"rotate-z":ae()}],scale:[{scale:ce()}],"scale-x":[{"scale-x":ce()}],"scale-y":[{"scale-y":ce()}],"scale-z":[{"scale-z":ce()}],"scale-3d":["scale-3d"],skew:[{skew:T()}],"skew-x":[{"skew-x":T()}],"skew-y":[{"skew-y":T()}],transform:[{transform:[le,oe,"","none","gpu","cpu"]}],"transform-origin":[{origin:C()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:D()}],"translate-x":[{"translate-x":D()}],"translate-y":[{"translate-y":D()}],"translate-z":[{"translate-z":D()}],"translate-none":["translate-none"],accent:[{accent:E()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:E()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",le,oe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",le,oe]}],fill:[{fill:["none",...E()]}],"stroke-w":[{stroke:[ye,Mn,tr,Jo]}],stroke:[{stroke:["none",...E()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Yv=zv(Kv);function xd(...e){return Yv(dv(e))}const gd=({value:e,onValueChange:s,children:r,className:n})=>t.jsx("div",{className:xd("w-full",n),children:Tt.Children.map(r,a=>Tt.isValidElement(a)?Tt.cloneElement(a,{children:Tt.Children.map(a.props.children,i=>Tt.isValidElement(i)?Tt.cloneElement(i,{onValueChange:s}):i)}):a)}),fd=({children:e,className:s})=>t.jsx("div",{className:xd("inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500",s),children:e}),un=({value:e,children:s,className:r,onValueChange:n})=>t.jsx("button",{className:xd("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","text-gray-500 hover:text-gray-900",r),onClick:()=>n==null?void 0:n(e),children:s}),Xv=({fieldVisibility:e})=>t.jsx("thead",{children:t.jsxs("tr",{className:"border-b",children:[e.name&&t.jsx("th",{className:"text-left pb-4",children:"Provider"}),e.contact&&t.jsx("th",{className:"text-left pb-4",children:"Contact"}),e.location&&t.jsx("th",{className:"text-left pb-4",children:"Location"}),e.status&&t.jsx("th",{className:"text-left pb-4",children:"Status"}),e.verification&&t.jsx("th",{className:"text-left pb-4",children:"Verification"}),e.earnings&&t.jsx("th",{className:"text-left pb-4",children:"Earnings"}),e.experience&&t.jsx("th",{className:"text-left pb-4",children:"Experience"}),e.featured&&t.jsx("th",{className:"text-left pb-4",children:"Featured"}),e.action&&t.jsx("th",{className:"text-left pb-4",children:"Actions"})]})}),J=({variant:e="primary",size:s="md",children:r,fullWidth:n=!1,isLoading:a=!1,className:i="",disabled:o,...l})=>{const c="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",d={primary:"bg-primary hover:bg-primary-dark text-secondary-dark",secondary:"bg-secondary text-white hover:bg-secondary-light",outline:"border border-primary bg-transparent text-secondary-dark hover:bg-primary/10",ghost:"bg-transparent hover:bg-gray-100 text-gray-800",link:"bg-transparent underline-offset-4 hover:underline text-primary p-0 h-auto"},h={sm:"h-9 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"},u=n?"w-full":"";return t.jsxs("button",{className:`${c} ${d[e]} ${h[s]} ${u} ${i}`,disabled:o||a,...l,children:[a?t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current\\",xmlns:"http://www.w3.org/2000/svg\\",fill:"none\\",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25\\",cx:"12\\",cy:"12\\",r:"10\\",stroke:"currentColor\\",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,r]})},ej=({provider:e,onStatusAction:s})=>t.jsxs("div",{className:"flex items-center space-x-2",children:[e.status==="pending"&&t.jsxs(t.Fragment,{children:[t.jsxs(J,{onClick:()=>s(e.id,"approve"),className:"flex items-center space-x-1 bg-green-600 hover:bg-green-700 text-white text-xs px-2 py-1",children:[t.jsx(Os,{size:12}),t.jsx("span",{children:"Approve"})]}),t.jsxs(J,{onClick:()=>s(e.id,"reject"),className:"flex items-center space-x-1 bg-red-600 hover:bg-red-700 text-white text-xs px-2 py-1",children:[t.jsx(Sa,{size:12}),t.jsx("span",{children:"Reject"})]})]}),e.status==="approved"&&t.jsxs(J,{onClick:()=>s(e.id,"suspend"),className:"flex items-center space-x-1 bg-yellow-600 hover:bg-yellow-700 text-white text-xs px-2 py-1",children:[t.jsx(qs,{size:12}),t.jsx("span",{children:"Suspend"})]}),e.status==="suspended"&&t.jsxs(J,{onClick:()=>s(e.id,"reinstate"),className:"flex items-center space-x-1 bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1",children:[t.jsx(Os,{size:12}),t.jsx("span",{children:"Reinstate"})]}),e.status==="blocked"&&t.jsxs(J,{onClick:()=>s(e.id,"approve"),className:"flex items-center space-x-1 bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1",children:[t.jsx(Os,{size:12}),t.jsx("span",{children:"Approve"})]})]}),tj=({provider:e,formatDate:s})=>{const r=a=>{switch(a){case"approved":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"blocked":return"bg-red-100 text-red-700";case"suspended":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},n=a=>{switch(a){case"approved":return t.jsx(Os,{size:14,className:"text-green-600"});case"pending":return t.jsx(Ot,{size:14,className:"text-yellow-600"});case"blocked":return t.jsx(Sa,{size:14,className:"text-red-600"});case"suspended":return t.jsx(qs,{size:14,className:"text-orange-600"});default:return null}};return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[n(e.status),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Joined: ",s(e.created_at)]})]})},sj=({provider:e,fieldVisibility:s,expandingUsers:r,onStatusAction:n,onToggleDropdown:a,formatDate:i,formatCurrency:o,isExpanded:l=!1,isLoading:c=!1})=>{const d=c&&r.has(e.id),h=l||r.has(e.id);return t.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[t.jsx("td",{className:"py-4",children:t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx(J,{variant:"outline",size:"sm",onClick:()=>a(e.id),className:"transition-all duration-200 hover:bg-blue-50 hover:border-blue-300 hover:shadow-md",disabled:d,children:d?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}):t.jsxs(t.Fragment,{children:[t.jsx(jn,{size:14,className:"mr-1"}),t.jsx("span",{children:h?"Hide":"Details"}),h?t.jsx(ka,{size:14,className:"ml-1"}):t.jsx(jr,{size:14,className:"ml-1"})]})})})}),s.name&&t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium text-primary",children:e.name.charAt(0)})}),t.jsx("div",{children:t.jsx("p",{className:"font-medium text-gray-900",children:e.name})})]})}),s.contact&&t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Vs,{size:14,className:"text-gray-400"}),t.jsx("span",{className:"text-sm",children:e.email})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Nr,{size:14,className:"text-gray-400"}),t.jsx("span",{className:"text-sm",children:e.phone})]})]})}),s.location&&t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"text-sm",children:[e.city,", ",e.state]}),t.jsx("div",{className:"text-sm text-gray-500",children:e.pincode})]})}),s.status&&t.jsx("td",{className:"py-4",children:t.jsx(tj,{provider:e,formatDate:i})}),s.verification&&t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[e.verification_status==="verified"?t.jsx(qs,{size:16,className:"text-green-500"}):t.jsx(qs,{size:16,className:"text-gray-400"}),t.jsx("span",{className:"text-sm",children:e.verification_status})]})}),s.earnings&&t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-sm font-medium",children:o(e.total_earnings)}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Commission: ",e.commission_rate,"%"]})]})}),s.experience&&t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ot,{size:14,className:"text-gray-400"}),t.jsxs("span",{className:"text-sm",children:[e.experience_years," years"]})]})}),s.featured&&t.jsx("td",{className:"py-4",children:e.is_featured?t.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:"Featured"}):t.jsx("span",{className:"text-gray-400 text-xs",children:"Not Featured"})}),s.action&&t.jsx("td",{className:"py-4",children:t.jsx(ej,{provider:e,onStatusAction:n})})]})},rj=({provider:e,formatDate:s,serviceCatalog:r})=>{const n=!!(e.bank_details&&(e.bank_details.account_holder_name||e.bank_details.bank_name||e.bank_details.account_number||e.bank_details.ifsc_code)),a=p.useMemo(()=>{var u;const h=new Map;return Object.entries(r.categories).forEach(([f,g])=>{h.set(Number(f),g.name)}),(u=e.subcategory_links)==null||u.forEach(f=>{f.category_name&&f.category_id&&h.set(f.category_id,f.category_name)}),h},[e.subcategory_links,r]),i=p.useMemo(()=>{var f;const h=new Map,u=(g,_)=>{const b=g!==null?`cat-${g}`:`misc-${_}`;return h.has(b)||h.set(b,{key:b,category_id:g,category_name:_,subcategories:[],services:[]}),h.get(b)};return(e.category_ids??[]).forEach(g=>{const _=a.get(g)||`Category ${g}`;u(g,_)}),(e.subcategory_links??[]).forEach(g=>{var y,m;const _=g.category_id||null,b=_&&g.subcategory_id?((m=(y=r.categories[_])==null?void 0:y.services)==null?void 0:m[g.subcategory_id])??null:null,w=g.category_name||(_?a.get(_)||`Category ${_}`:"Other");u(_,w).subcategories.push({id:g.subcategory_id||null,rawName:g.subcategory_name,catalogName:b})}),(e.services??[]).forEach(g=>{const _=g.category_name||"General",w=(e.category_ids??[]).find(y=>a.get(y)===g.category_name)??null;u(w,_).services.push(g)}),h.size===0&&(((f=e.services)==null?void 0:f.length)??0)>0&&h.set("general",{key:"general",category_id:null,category_name:"Services",subcategories:[],services:e.services??[]}),Array.from(h.values())},[e.category_ids,e.subcategory_links,e.services,a,r]),o=i.length>0,[l,c]=p.useState(new Set),d=h=>{c(u=>{const f=new Set(u);return f.has(h)?f.delete(h):f.add(h),f})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(Gs,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:"Provider Overview"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-purple-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Provider ID"})]}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["#",e.id]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-green-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Joined Date"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:s(e.created_at)})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(Vs,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-purple-900",children:"Contact Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(Vs,{size:16,className:"text-blue-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Email"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-sm text-gray-800",children:e.email}),e.email_verified&&t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Verified"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(Nr,{size:16,className:"text-green-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Phone"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-sm text-gray-800",children:e.phone}),e.phone_verified&&t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Verified"})]})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 rounded-lg p-4 border border-amber-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-amber-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(gs,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-amber-900",children:"Location Information"})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-amber-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(gs,{size:16,className:"text-amber-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Address"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:e.address}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.city,", ",e.state," - ",e.pincode]})]})]}),e.services&&e.services.length>0&&t.jsxs("div",{className:"bg-gradient-to-r from-rose-50 to-pink-50 rounded-lg p-4 border border-rose-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-rose-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(ld,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-rose-900",children:"Services"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.services.map(h=>t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-rose-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h5",{className:"font-medium text-gray-900",children:h.service_name}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.status})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:h.description}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("span",{className:"text-gray-500",children:[h.duration_minutes," mins"]}),t.jsxs("span",{className:"font-medium text-primary",children:["",h.price_min," - ",h.price_max]})]}),t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:h.category_name})})]},h.id))})]}),e.service_areas&&e.service_areas.length>0&&t.jsxs("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-lg p-4 border border-teal-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-teal-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(gs,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-teal-900",children:"Service Areas"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.service_areas.map((h,u)=>t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-teal-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h5",{className:"font-medium text-gray-900",children:h.area_name}),h.is_primary&&t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Primary"})]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[h.city,", ",h.state]}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Pincode: ",h.pincode]})]},u))})]}),e.documents&&e.documents.length>0&&t.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg p-4 border border-orange-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(Uh,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-orange-900",children:"Documents"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.documents.map(h=>t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-orange-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h5",{className:"font-medium text-gray-900 capitalize",children:h.document_type}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h.status==="approved"?"bg-green-100 text-green-800":h.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:h.status})]}),t.jsx("p",{className:"text-sm text-gray-600",children:h.document_name}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Uploaded: ",s(h.uploaded_at)]}),h.verified_at&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Verified: ",s(h.verified_at)]}),h.rejection_reason&&t.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded-md",children:[t.jsx("p",{className:"text-sm font-medium text-red-700",children:"Rejection Reason"}),t.jsx("p",{className:"text-sm text-red-600 mt-1",children:h.rejection_reason})]}),h.document_url&&t.jsx(J,{variant:"outline",size:"sm",className:"mt-3 w-full",onClick:()=>window.open(h.document_url,"_blank","noopener,noreferrer"),children:"View Document"})]},h.id))})]}),o&&t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg p-4 border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(Ey,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:"Service Coverage"})]}),t.jsx("div",{className:"space-y-3",children:i.map(h=>{const u=l.has(h.key)||h.services.length===0;return t.jsxs("div",{className:"bg-white rounded-lg border border-blue-100 shadow-sm",children:[t.jsxs("button",{type:"button",onClick:()=>d(h.key),className:"w-full flex items-center justify-between px-4 py-3 text-left",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:h.category_name}),h.category_id!==null&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Category ID: ",h.category_id]}),h.services.length>0&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[h.services.length," service",h.services.length>1?"s":""]})]}),h.services.length>0&&t.jsx(jr,{size:16,className:`text-blue-500 transition-transform ${u?"rotate-180":""}`})]}),h.subcategories.length>0&&t.jsxs("div",{className:"px-4 pb-3",children:[t.jsx("span",{className:"text-xs font-medium text-gray-500 block mb-2",children:"Services"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:h.subcategories.map((f,g)=>{var b;const _=f.catalogName||(f.id?r.servicesById[f.id]:null)||f.rawName||(((b=h.services.find(w=>w.id===f.id))==null?void 0:b.service_name)??null)||`Service ${f.id||g+1}`;return t.jsxs("div",{className:"px-3 py-2 rounded-lg bg-blue-50 border border-blue-100 text-sm text-blue-700 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ps,{size:14,className:"text-blue-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:_}),f.id&&t.jsxs("p",{className:"text-xs text-blue-400",children:["Service ID: ",f.id]})]})]}),h.services.length>0&&t.jsx("button",{type:"button",onClick:()=>d(h.key),className:"text-xs text-blue-500 hover:underline",children:"View details"})]},`${h.key}-${f.id??g}`)})})]}),h.services.length>0&&u&&t.jsx("div",{className:"border-t border-blue-50 bg-blue-50/50 px-4 py-3 space-y-2",children:h.services.map(f=>t.jsxs("div",{className:"bg-white rounded-lg border border-blue-100 p-3 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("p",{className:"font-medium text-sm text-gray-900",children:f.service_name}),(f.price_min||f.price_max)&&t.jsxs("span",{className:"text-xs font-semibold text-blue-600",children:["",f.price_min," - ",f.price_max]})]}),f.description&&t.jsx("p",{className:"text-xs text-gray-600 mb-2",children:f.description}),t.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-500",children:[f.duration_minutes>0&&t.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 rounded-full",children:["Duration: ",f.duration_minutes," mins"]}),f.status&&t.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 rounded-full capitalize",children:["Status: ",f.status]})]})]},`${h.key}-service-${f.id}`))})]},h.key)})})]}),n&&e.bank_details&&t.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-cyan-50 rounded-lg p-4 border border-slate-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-cyan-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(br,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-cyan-900",children:"Account Verification"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-slate-100",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Account Holder Name"}),t.jsx("p",{className:"text-sm text-gray-800",children:e.bank_details.account_holder_name||"N/A"})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-slate-100",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Bank Name"}),t.jsx("p",{className:"text-sm text-gray-800",children:e.bank_details.bank_name||"N/A"})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-slate-100",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600 block mb-1",children:"Account Number"}),t.jsx("p",{className:"text-sm text-gray-800",children:e.bank_details.account_number||"N/A"})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-slate-100",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600 block mb-1",children:"IFSC Code"}),t.jsx("p",{className:"text-sm text-gray-800 uppercase",children:e.bank_details.ifsc_code||"N/A"})]})]})]}),e.portfolio&&e.portfolio.length>0&&t.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 rounded-lg p-4 border border-indigo-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(Un,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-indigo-900",children:"Portfolio"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.portfolio.map(h=>t.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-indigo-100",children:[t.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:h.title}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:h.description}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-gray-200",children:[t.jsx("img",{src:h.before_image,alt:"Before",className:"object-cover w-full h-full"}),t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs",children:"Before"})]}),t.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-gray-200",children:[t.jsx("img",{src:h.after_image,alt:"After",className:"object-cover w-full h-full"}),t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xs",children:"After"})]})]}),t.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[t.jsxs("span",{className:"text-gray-500",children:["Created: ",s(h.created_at)]}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.status})]})]},h.id))})]})]})},nj=({searchTerm:e,onSearchChange:s})=>t.jsxs("div",{className:"relative w-64",children:[t.jsx(is,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),t.jsx("input",{type:"text",placeholder:"Search providers...",className:"pl-8 pr-4 py-2 w-full rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/20",value:e,onChange:r=>s(r.target.value)})]}),aj=({showFieldManagement:e,onToggleSettings:s,fieldVisibility:r,onToggleField:n,onResetFields:a})=>t.jsxs("div",{className:"relative",children:[t.jsxs(J,{variant:"outline",size:"sm",onClick:s,className:"hover:bg-gray-100",children:[t.jsx(ud,{size:16,className:"mr-2"}),"Fields"]}),e&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-[400px] flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 pb-3 border-b border-gray-100 flex-shrink-0",children:[t.jsx("h3",{className:"font-semibold text-gray-800",children:"Field Visibility"}),t.jsx(J,{variant:"ghost",size:"sm",onClick:s,className:"h-6 w-6 p-0",children:t.jsx(He,{size:14})})]}),t.jsx("div",{className:"overflow-y-auto flex-1 px-4 py-3 min-h-0",children:t.jsx("div",{className:"space-y-2",children:Object.entries(r).map(([i,o])=>t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:()=>n(i),disabled:["name","status","action"].includes(i),className:`rounded border-gray-300 text-primary focus:ring-primary ${["name","status","action"].includes(i)?"opacity-50":""}`}),t.jsxs("span",{className:`text-sm capitalize ${["name","status","action"].includes(i)?"font-medium":""}`,children:[i.replace(/([A-Z])/g," $1").trim(),["name","status","action"].includes(i)&&" (Required)"]})]},i))})}),t.jsx("div",{className:"p-4 pt-3 border-t border-gray-200 flex-shrink-0",children:t.jsx(J,{variant:"outline",size:"sm",onClick:a,className:"w-full",children:"Reset to Default"})})]})]}),ij=({currentPage:e,totalPages:s,startIndex:r,itemsPerPage:n,totalItems:a,onPageChange:i})=>t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",r+1," to ",Math.min(r+n,a)," of ",a," providers"]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(J,{onClick:()=>i(Math.max(e-1,1)),disabled:e===1,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(fr,{size:16})}),t.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",e," of ",s]}),t.jsx(J,{onClick:()=>i(Math.min(e+1,s)),disabled:e===s,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(ns,{size:16})})]})]}),oj=({isOpen:e,providerId:s,action:r,reason:n,notes:a,onClose:i,onConfirm:o,onReasonChange:l,onNotesChange:c})=>{if(!e||!s||!r)return null;const d=()=>{switch(r){case"approve":return"Approve Provider";case"reject":return"Reject Provider";case"suspend":return"Suspend Provider";case"reinstate":return"Reinstate Provider";default:return""}},h=()=>{switch(r){case"approve":return"bg-green-600 text-white hover:bg-green-700";case"reject":return"bg-red-600 text-white hover:bg-red-700";case"suspend":return"bg-yellow-600 text-white hover:bg-yellow-700";case"reinstate":return"bg-blue-600 text-white hover:bg-blue-700";default:return""}},u=()=>{switch(r){case"approve":return"Approve";case"reject":return"Reject";case"suspend":return"Suspend";case"reinstate":return"Reinstate";default:return""}};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:d()}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),t.jsx("textarea",{className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:"Enter reason for this action...",value:n,onChange:f=>l(f.target.value)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),t.jsx("textarea",{className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:"Enter any additional notes...",value:a,onChange:f=>c(f.target.value)})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[t.jsx(J,{variant:"outline",onClick:i,children:"Cancel"}),t.jsx(J,{variant:"outline",onClick:()=>o(s,r,n,a),className:h(),children:u()})]})]})})},lj=({isOpen:e,providerId:s,documentId:r,action:n,reason:a,onClose:i,onConfirm:o,onReasonChange:l})=>!e||!s||!r||!n?null:t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:n==="approve"?"Approve Document":"Reject Document"}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason"}),t.jsx("textarea",{className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:"Enter reason for this action...",value:a,onChange:c=>l(c.target.value)})]})}),t.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[t.jsx(J,{variant:"outline",onClick:i,children:"Cancel"}),t.jsx(J,{variant:"outline",onClick:()=>o(s,r,n,a),className:`${n==="approve"?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700"}`,children:n==="approve"?"Approve":"Reject"})]})]})}),Go={},Qo={pending:{status:"pending",verification_status:"pending"},verification_in_progress:{status:"pending",verification_status:"pending"},in_progress:{status:"pending",verification_status:"pending"},approved:{status:"approved",verification_status:"verified"},verified:{status:"approved",verification_status:"verified"},active:{status:"approved",verification_status:"verified"},rejected:{status:"blocked",verification_status:"rejected"},blocked:{status:"blocked",verification_status:"rejected"},suspend:{status:"suspended",verification_status:"verified"},suspended:{status:"suspended",verification_status:"verified"}},cj=e=>{if(!e)return Qo.pending;const s=e.toLowerCase();return Qo[s]||Qo.pending},Ye=(e,s=0)=>{if(e==null||e==="")return s;const r=Number(e);return Number.isFinite(r)?r:s},$r=(e,s=!1)=>{if(e==null)return s;if(typeof e=="string"){const r=e.trim().toLowerCase();if(["true","1","yes","verified","approved"].includes(r))return!0;if(["false","0","no","pending","rejected"].includes(r))return!1}return!!e},ke=(e,s="")=>{if(e==null)return s;const r=String(e).trim();return r.length>0?r:s},mn=(e,s=null)=>{if(e==null)return s;const r=String(e).trim();return r.length>0?r:s},dj=e=>{if(!e)return[];if(Array.isArray(e))return e.map(s=>ke(s)).filter(Boolean);if(typeof e=="string"){try{const s=JSON.parse(e);if(Array.isArray(s))return s.map(r=>ke(r)).filter(Boolean)}catch{return e.split(",").map(s=>s.trim()).filter(Boolean)}return e?[e]:[]}return[]},uj=e=>Array.isArray(e)?e.map((s,r)=>({id:Ye(s==null?void 0:s.id,r+1),service_name:ke((s==null?void 0:s.service_name)??(s==null?void 0:s.title),`Service ${r+1}`),description:ke(s==null?void 0:s.description,""),price_min:Ye((s==null?void 0:s.price_min)??(s==null?void 0:s.price)??(s==null?void 0:s.price_original),0),price_max:Ye((s==null?void 0:s.price_max)??(s==null?void 0:s.price)??(s==null?void 0:s.price_original),0),duration_minutes:Ye((s==null?void 0:s.duration_minutes)??(s==null?void 0:s.duration),0),status:ke(s==null?void 0:s.status,"active"),category_name:ke((s==null?void 0:s.category_name)??(s==null?void 0:s.category),"General")})):[],mj=(e,s,r)=>Array.isArray(e)?e.map((n,a)=>({pincode:ke(n==null?void 0:n.pincode,""),area_name:ke((n==null?void 0:n.area_name)??(n==null?void 0:n.name),`Area ${a+1}`),city:ke(n==null?void 0:n.city,s),state:ke(n==null?void 0:n.state,r),is_primary:$r((n==null?void 0:n.is_primary)??(n==null?void 0:n.primary),a===0)})):[],pj=(e,s)=>{if(Array.isArray(e==null?void 0:e.documents)&&e.documents.length>0)return e.documents.map((o,l)=>({id:Ye(o==null?void 0:o.id,l+1),document_type:ke((o==null?void 0:o.document_type)??(o==null?void 0:o.type),`document_${l+1}`),document_name:ke((o==null?void 0:o.document_name)??(o==null?void 0:o.document_type)??(o==null?void 0:o.type),`Document ${l+1}`),status:ke(o==null?void 0:o.status,o!=null&&o.verified_at?"approved":o!=null&&o.rejection_reason?"rejected":"submitted"),uploaded_at:ke(o==null?void 0:o.uploaded_at,(e==null?void 0:e.created_at)||(s==null?void 0:s.created_at)||new Date().toISOString()),verified_at:(o==null?void 0:o.verified_at)??null,rejection_reason:(o==null?void 0:o.rejection_reason)??null,document_url:mn((o==null?void 0:o.document_url)??(o==null?void 0:o.url)??(o==null?void 0:o.file_url)??(o==null?void 0:o.path)??(o==null?void 0:o.link)??null,null)}));const r=[],n=new Set,a=(o,l)=>{const c=o.trim();if(!c)return;const d=c.toLowerCase();n.has(d)||(n.add(d),r.push({id:r.length+1,document_type:c,document_name:c,status:"submitted",uploaded_at:(e==null?void 0:e.created_at)||(s==null?void 0:s.created_at)||new Date().toISOString(),verified_at:null,rejection_reason:null,document_url:mn(l??null,null)}))};return e!=null&&e.documents&&typeof e.documents=="object"&&Object.entries(e.documents).forEach(([o,l])=>{if(!l)return;const c=o.replace(/_url|_doc_url/g,"").replace(/_/g," ").trim();if(c){if(Array.isArray(l))l.forEach((d,h)=>{if(!d)return;const u=l.length>1?`${c} ${h+1}`:c;if(typeof d=="string")a(u,d);else if(typeof d=="object"){const f=d.url??(d==null?void 0:d.document_url)??(d==null?void 0:d.path)??(d==null?void 0:d.file_url);f&&a(u,String(f))}});else if(typeof l=="string")a(c,l);else if(typeof l=="object"){const d=l.url??(l==null?void 0:l.document_url)??(l==null?void 0:l.path)??(l==null?void 0:l.file_url);d&&a(c,String(d))}}}),[{key:"profile_photo_url",label:"Profile Photo"},{key:"aadhaar_doc_url",label:"Aadhaar Document"},{key:"pan_doc_url",label:"PAN Document"},{key:"degree_doc_url",label:"Degree Document"}].forEach(({key:o,label:l})=>{e!=null&&e[o]&&a(l,e[o])}),r.length===0&&(s!=null&&s.documents)?s.documents:r},hj=(e,s)=>{if(Array.isArray(e==null?void 0:e.portfolio)&&e.portfolio.length>0)return e.portfolio;const r=dj(e==null?void 0:e.previous_work_images);return r.length===0?(s==null?void 0:s.portfolio)??[]:r.map((n,a)=>({id:a+1,title:`Work ${a+1}`,description:"",image_path:n,before_image:n,after_image:n,display_order:a+1,status:"active",created_at:(e==null?void 0:e.created_at)||(s==null?void 0:s.created_at)||new Date().toISOString()}))},xj=(e,s)=>{if(!e&&!s)return null;const r=e||s;return r?{account_holder_name:ke(r.account_holder_name,(s==null?void 0:s.account_holder_name)??""),bank_name:ke(r.bank_name,(s==null?void 0:s.bank_name)??""),account_number:ke(r.account_number,(s==null?void 0:s.account_number)??""),ifsc_code:ke(r.ifsc_code,(s==null?void 0:s.ifsc_code)??"")}:null},gj=(e,s)=>Array.isArray(e)?e.map(r=>Ye(r)).filter(r=>Number.isFinite(r)&&r>0):s||[],fj=(e,s)=>{if(Array.isArray(e)){const r=[];return e.forEach((n,a)=>{const i=Ye(n==null?void 0:n.category_id,n!=null&&n.category?Number(n==null?void 0:n.category):0),o=Ye(n==null?void 0:n.subcategory_id,a+1);!i&&!o||r.push({category_id:i,subcategory_id:o,category_name:mn((n==null?void 0:n.category_name)??(n==null?void 0:n.category)??null,null),subcategory_name:mn((n==null?void 0:n.subcategory_name)??(n==null?void 0:n.subcategory)??null,null)})}),r}return s||[]},Er=(e,s)=>{var y;if(!e&&s)return s;if(!e)return{id:0,name:"",email:"",phone:"",business_name:"",address:"",pincode:"",city:"",state:"",profile_image:null,business_logo:null,experience_years:0,description:null,status:"pending",verification_status:"pending",email_verified:!1,phone_verified:!1,identity_verified:!1,documents_verified:!1,average_rating:0,total_reviews:0,total_bookings:0,total_earnings:0,commission_rate:0,is_featured:!1,created_at:new Date().toISOString(),services:[],service_areas:[],documents:[],portfolio:[]};const r=e!=null&&e.details?{...e.details,...e}:e,{status:n,verification_status:a}=cj(r==null?void 0:r.status),i=ke(r==null?void 0:r.city,(s==null?void 0:s.city)??""),o=ke(r==null?void 0:r.state,(s==null?void 0:s.state)??""),l=uj(r==null?void 0:r.services),c=mj(r==null?void 0:r.service_areas,i,o),d=pj(r,s),h=hj(r,s),u=xj(r==null?void 0:r.bank_details,s==null?void 0:s.bank_details),f=gj(r==null?void 0:r.categories,s==null?void 0:s.category_ids),g=fj(r==null?void 0:r.subcategories,s==null?void 0:s.subcategory_links),_=ke(r==null?void 0:r.created_at,(s==null?void 0:s.created_at)??new Date().toISOString()),b=(r==null?void 0:r.average_rating)??(r==null?void 0:r.rating),w=(r==null?void 0:r.total_reviews)??(Array.isArray(r==null?void 0:r.reviews)?r.reviews.length:void 0),x=(r==null?void 0:r.total_bookings)??(r==null?void 0:r.completed_appointments);return{id:Ye((r==null?void 0:r.id)??(r==null?void 0:r.provider_id),(s==null?void 0:s.id)??0),name:ke((r==null?void 0:r.full_name)??(r==null?void 0:r.name),(s==null?void 0:s.name)??""),email:ke(r==null?void 0:r.email,(s==null?void 0:s.email)??""),phone:ke((r==null?void 0:r.phone_number)??(r==null?void 0:r.phone),(s==null?void 0:s.phone)??""),business_name:ke(r==null?void 0:r.business_name,(s==null?void 0:s.business_name)??""),address:ke(r==null?void 0:r.address,(s==null?void 0:s.address)??""),pincode:ke(r==null?void 0:r.pincode,(s==null?void 0:s.pincode)??""),city:i,state:o,profile_image:mn((r==null?void 0:r.profile_photo_url)??(r==null?void 0:r.profile_image)??((y=r==null?void 0:r.documents)==null?void 0:y.profile_photo_url),(s==null?void 0:s.profile_image)??null),business_logo:mn(r==null?void 0:r.business_logo,(s==null?void 0:s.business_logo)??null),experience_years:Ye(r==null?void 0:r.experience_years,(s==null?void 0:s.experience_years)??0),description:(r==null?void 0:r.description)??(s==null?void 0:s.description)??null,status:n,verification_status:a,email_verified:$r(r==null?void 0:r.email_verified,(s==null?void 0:s.email_verified)??!1),phone_verified:$r(r==null?void 0:r.phone_verified,(s==null?void 0:s.phone_verified)??!1),identity_verified:$r(r==null?void 0:r.identity_verified,(s==null?void 0:s.identity_verified)??!1),documents_verified:$r(r==null?void 0:r.documents_verified,(s==null?void 0:s.documents_verified)??n==="approved"),average_rating:Ye(b,(s==null?void 0:s.average_rating)??0),total_reviews:Ye(w,(s==null?void 0:s.total_reviews)??0),total_bookings:Ye(x,(s==null?void 0:s.total_bookings)??0),total_earnings:Ye(r==null?void 0:r.total_earnings,(s==null?void 0:s.total_earnings)??0),commission_rate:Ye(r==null?void 0:r.commission_rate,(s==null?void 0:s.commission_rate)??0),is_featured:$r(r==null?void 0:r.is_featured,(s==null?void 0:s.is_featured)??!1),created_at:_,services:l.length>0?l:(s==null?void 0:s.services)??[],service_areas:c.length>0?c:(s==null?void 0:s.service_areas)??[],documents:d.length>0?d:(s==null?void 0:s.documents)??[],portfolio:h.length>0?h:(s==null?void 0:s.portfolio)??[],bank_details:u,category_ids:f,subcategory_links:g}},Qa=(e,s)=>{if(!s)return e;const r=e.findIndex(a=>a.id===s.id);if(r===-1)return e;const n=[...e];return n[r]=s,n},yj={approve:{apiAction:"approve",nextStatus:"approved",verification:"verified"},reject:{apiAction:"reject",nextStatus:"blocked",verification:"rejected"},suspend:{apiAction:"suspend",nextStatus:"suspended",verification:"verified"},reinstate:{apiAction:"reinstate",nextStatus:"approved",verification:"verified"}},vj=()=>{const{addToast:e}=ot(),[s,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(""),[l,c]=p.useState(1),[d,h]=p.useState(new Set),[u,f]=p.useState(!1),[g,_]=p.useState({name:!0,status:!0,action:!0,contact:!0,location:!1,verification:!1,earnings:!1,experience:!1,featured:!1}),b=5,w=(Go==null?void 0:Go.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",[x,y]=p.useState("all"),[m,j]=p.useState([]),[C,F]=p.useState(!1),[L,$]=p.useState({isOpen:!1,providerId:null,action:null,reason:"",notes:""}),[P,z]=p.useState({isOpen:!1,providerId:null,documentId:null,action:null}),[H,q]=p.useState({categories:{},servicesById:{}}),k=p.useCallback(async()=>{const T=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");try{const[D,V]=await Promise.all([fetch(`${w}/admin/categories`,{headers:{"Content-Type":"application/json",...T?{Authorization:`Bearer ${T}`}:{}}}),fetch(`${w}/admin/services`,{headers:{"Content-Type":"application/json",...T?{Authorization:`Bearer ${T}`}:{}}})]),te=await D.json(),se=await V.json();if(D.ok&&Array.isArray(te.categories)){const xe={};te.categories.forEach(Y=>{const Se=Ye(Y==null?void 0:Y.id,0);if(!Se)return;const he={},We=Array.isArray(Y==null?void 0:Y.subcategories)?Y.subcategories:Y==null?void 0:Y.services;Array.isArray(We)&&We.forEach((Ne,Ce)=>{const ze=Ye(Ne==null?void 0:Ne.id,Ce+1);ze&&(he[ze]=ke((Ne==null?void 0:Ne.name)??(Ne==null?void 0:Ne.title)??(Ne==null?void 0:Ne.service_name),`Service ${ze}`))}),xe[Se]={name:ke(Y==null?void 0:Y.name,`Category ${Se}`),services:he}});const de={};V.ok&&Array.isArray(se.services)&&se.services.forEach((Y,Se)=>{const he=Ye(Y==null?void 0:Y.id,Se+1);he&&(de[he]=ke((Y==null?void 0:Y.title)??(Y==null?void 0:Y.name)??(Y==null?void 0:Y.service_name),`Service ${he}`))}),q({categories:xe,servicesById:de})}else throw new Error(te.message||"Failed to fetch categories")}catch(D){console.error("Error fetching categories catalog:",D);const V=D instanceof Error?D.message:"Failed to fetch categories";e(V,"error")}},[w,e]),S=p.useCallback(async(T=!1)=>{const D=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!D){e("Please login to view providers","error"),T&&a(!1);return}T&&a(!0);try{const V=await fetch(`${w}/admin/providers`,{headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"}});if(!V.ok)throw new Error(`HTTP error! status: ${V.status}`);const te=V.headers.get("content-type");if(!te||!te.includes("application/json")){console.warn("Response is not JSON, treating as empty list"),r([]);return}const se=await V.text();if(!se||se.trim()===""){console.warn("Empty response body, treating as empty list"),r([]);return}let xe;try{xe=JSON.parse(se)}catch(de){throw console.error("JSON parse error:",de,"Response text:",se),new Error("Invalid JSON response from server")}if(Array.isArray(xe.data)){const de=xe.data.map(Y=>Er(Y));r(de)}else if(xe.success===!1)console.warn("API returned error:",xe.message),r([]);else throw new Error(xe.message||"Failed to fetch providers")}catch(V){console.error("Error fetching providers:",V);const te=V instanceof Error?V.message:"Failed to fetch providers";e(te,"error"),r([])}finally{T&&a(!1)}},[w,e]),M=p.useCallback(async()=>{F(!0);const T=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!T){e("Please login to view pending providers","error"),F(!1);return}try{const D=await fetch(`${w}/admin/providers?list=pending`,{headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);const V=D.headers.get("content-type");if(!V||!V.includes("application/json")){console.warn("Response is not JSON, treating as empty list"),j([]);return}const te=await D.text();if(!te||te.trim()===""){console.warn("Empty response body, treating as empty list"),j([]);return}let se;try{se=JSON.parse(te)}catch(xe){throw console.error("JSON parse error:",xe,"Response text:",te),new Error("Invalid JSON response from server")}if(Array.isArray(se.data)){const xe=se.data.map(de=>Er(de));j(xe)}else if(se.success===!1)console.warn("API returned error:",se.message),j([]);else throw new Error(se.message||"Failed to fetch pending providers")}catch(D){console.error("Error fetching pending providers:",D);const V=D instanceof Error?D.message:"Failed to fetch pending providers";e(V,"error"),j([])}finally{F(!1)}},[w,e]);p.useEffect(()=>{S(!0),M(),k()},[S,M,k]),p.useEffect(()=>{x==="pending"||S(),M()},[x,M,S]),p.useEffect(()=>{const T=setInterval(()=>{S(),M()},3e4);return()=>clearInterval(T)},[M,S]);const I=async T=>{const D=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!D){e("Please login to view provider details","error");return}try{const V=await fetch(`${w}/admin/providers?provider_id=${T}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`}}),te=await V.json(),se=Array.isArray(te==null?void 0:te.data)?te.data[0]:te==null?void 0:te.data;if(V.ok&&se){const xe=se;let de=null;r(Y=>{const Se=Y.find(he=>he.id===T);return de=Er(xe,Se),Qa(Y,de)}),j(Y=>{if(!de){const Se=Y.find(he=>he.id===T);de=Er(xe,Se)}return Qa(Y,de)})}else throw new Error(te.message||"Failed to fetch provider details")}catch(V){console.error("Error fetching provider details:",V),e(V instanceof Error?V.message:"Failed to fetch provider details","error")}},O=T=>{const D=new Set(d);d.has(T)?D.delete(T):(D.add(T),I(T)),h(D)},E=T=>{T==="name"||T==="status"||T==="action"||_(D=>({...D,[T]:!D[T]}))},B=()=>{_({name:!0,status:!0,action:!0,contact:!0,location:!1,verification:!1,earnings:!1,experience:!1,featured:!1})},Q=()=>{$({isOpen:!1,providerId:null,action:null,reason:"",notes:""})},A=(T,D)=>{if(D==="reject"||D==="suspend"){$({isOpen:!0,providerId:T,action:D,reason:"",notes:""});return}R(T,D)},W=s.filter(T=>T.name.toLowerCase().includes(i.toLowerCase())||T.email.toLowerCase().includes(i.toLowerCase())||T.phone.includes(i)||T.city.toLowerCase().includes(i.toLowerCase())),ee=Math.ceil(W.length/b),ie=(l-1)*b,v=W.slice(ie,ie+b),R=async(T,D,V,te)=>{var de;const se=yj[D];if(!se)return;const xe=(te||V||"").trim();if((D==="reject"||D==="suspend")&&!xe){e("Please provide a reason for this action","error");return}try{const Y=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!Y){e("Please login to verify provider","error");return}const Se={action:se.apiAction};xe&&(Se.notes=xe);const he=await fetch(`${w}/admin/provider/verify/${T}`,{method:"PUT",headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!he.ok){let Ce="Failed to update provider status";try{const ze=await he.json();Ce=ze.message||((de=ze.error)==null?void 0:de.message)||Ce}catch{Ce=`Failed to update provider status: ${he.status} ${he.statusText}`}throw new Error(Ce)}let We={};if(he.status!==204)try{const Ce=he.headers.get("content-type");if(Ce&&Ce.includes("application/json")){const ze=await he.text();ze&&ze.trim()&&(We=JSON.parse(ze))}}catch(Ce){console.warn("Failed to parse response JSON, but response was successful. Provider status was updated:",Ce),We={}}const Ne=se.nextStatus!=="pending";if(We.provider){const Ce=We.provider;let ze=null;r(G=>{const me=G.find(ge=>ge.id===T);return ze=Er(Ce,me),Qa(G,ze)}),j(G=>{if(!ze){const ve=G.find(ge=>ge.id===T);ze=Er(Ce,ve)}const me=Qa(G,ze);return Ne?me.filter(ve=>ve.id!==T):me})}else r(Ce=>Ce.map(ze=>ze.id===T?{...ze,status:se.nextStatus,verification_status:se.verification}:ze)),j(Ce=>{const ze=Ce.map(G=>G.id===T?{...G,status:se.nextStatus,verification_status:se.verification}:G);return Ne?ze.filter(G=>G.id!==T):ze});Q(),e(We.message||`Provider ${D}d successfully`,"success");try{await S()}catch(Ce){console.error("Error refreshing providers list:",Ce)}try{await M()}catch(Ce){console.error("Error refreshing pending providers list:",Ce)}}catch(Y){console.error("Error updating provider status:",Y),e(Y instanceof Error?Y.message:"Failed to update provider status","error")}},U=async(T,D,V,te)=>{try{const se=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!se){e("Please login to update document","error");return}const de=await(await fetch(`${w}/admin/providers/${T}/documents/${D}`,{method:"POST",headers:{Authorization:`Bearer ${se}`,"Content-Type":"application/json"},body:JSON.stringify({action:V,reason:te})})).json();de.success&&(r(Y=>Y.map(Se=>{var he;return Se.id===T?{...Se,documents:(he=Se.documents)==null?void 0:he.map(We=>We.id===D?{...We,status:V==="approve"?"approved":"rejected",rejection_reason:te||null}:We)}:Se})),e(de.message,"success"))}catch(se){console.error("Error updating document status:",se),e("Failed to update document status","error")}},K=T=>T?new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",ae=T=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(T),ce=()=>{const T=x==="pending"?m:v;return x==="pending"&&!C&&m.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:Object.values(g).filter(Boolean).length+1,className:"py-12",children:t.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:t.jsx(Gs,{size:24,className:"text-gray-400"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Providers"}),t.jsx("p",{className:"text-gray-500 max-w-sm",children:"There are currently no service providers waiting for approval."})]})})}):C&&x==="pending"?t.jsx("tr",{children:t.jsx("td",{colSpan:Object.values(g).filter(Boolean).length+1,className:"py-12",children:t.jsxs("div",{className:"flex flex-col items-center justify-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading pending providers..."})]})})}):T.map(D=>t.jsxs(Tt.Fragment,{children:[t.jsx(sj,{provider:D,fieldVisibility:g,expandingUsers:d,onStatusAction:A,onToggleDropdown:O,formatDate:K,formatCurrency:ae,isExpanded:d.has(D.id)}),d.has(D.id)&&t.jsx("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50/30 border-l-4 border-primary/20",children:t.jsx("td",{colSpan:Object.values(g).filter(Boolean).length+1,className:"p-6",children:t.jsx(rj,{provider:D,formatDate:K,serviceCatalog:H})})})]},D.id))};return t.jsxs(mt,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Pet Trainers"}),t.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center",children:t.jsx(Gs,{className:"h-5 w-5 text-white"})}),t.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"About"})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-blue-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Description"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:"Manage and approve pet trainer profiles, monitor their performance, and handle verification requests for training experts."})]})]})]}),n&&x==="all"?t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading pet trainers..."})]}):t.jsxs(Ee,{children:[t.jsxs(It,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(Mt,{children:"Pet Trainers"}),t.jsx(gd,{value:x,onValueChange:T=>y(T),children:t.jsxs(fd,{children:[t.jsxs(un,{value:"all",className:"relative",children:["All Trainers",t.jsx("span",{className:"absolute -top-1 -right-1 bg-gray-200 text-gray-700 text-xs px-2 py-0.5 rounded-full",children:s.length})]}),t.jsxs(un,{value:"pending",className:"relative",children:["Pending Trainers",t.jsx("span",{className:"absolute -top-1 -right-1 bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded-full",children:m.length})]})]})})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(aj,{showFieldManagement:u,onToggleSettings:()=>f(!u),fieldVisibility:g,onToggleField:E,onResetFields:B}),t.jsx(nj,{searchTerm:i,onSearchChange:o})]})]}),t.jsxs(Pe,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx(Xv,{fieldVisibility:g}),t.jsx("tbody",{children:ce()})]})}),x==="all"&&ee>1&&t.jsx(ij,{currentPage:l,totalPages:ee,startIndex:ie,itemsPerPage:b,totalItems:W.length,onPageChange:c})]})]}),t.jsx(oj,{isOpen:L.isOpen,providerId:L.providerId,action:L.action,reason:L.reason,notes:L.notes,onClose:Q,onConfirm:R,onReasonChange:T=>$(D=>({...D,reason:T})),onNotesChange:T=>$(D=>({...D,notes:T}))}),t.jsx(lj,{isOpen:P.isOpen,providerId:P.providerId,documentId:P.documentId,action:P.action,reason:P.reason,onClose:()=>z({isOpen:!1,providerId:null,documentId:null,action:null}),onConfirm:U,onReasonChange:T=>z(D=>({...D,reason:T}))})]})},jj=({isOpen:e,onClose:s,onConfirm:r,userName:n})=>e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[t.jsx("div",{className:"flex items-center justify-center mb-4",children:t.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:t.jsx(St,{className:"h-6 w-6 text-red-600"})})}),t.jsx("h3",{className:"text-lg font-semibold text-center mb-2",children:"Delete User"}),t.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Are you sure you want to delete ",n,"? This action cannot be undone."]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx(J,{variant:"outline",onClick:s,className:"hover:bg-gray-100",children:"Cancel"}),t.jsx(J,{onClick:r,className:"bg-red-600 text-white hover:bg-red-700 border-red-600 hover:border-red-700",children:"Delete"})]})]})}):null,Xr=()=>t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading users..."})]}),bj=({currentPage:e,totalPages:s,startIndex:r,itemsPerPage:n,totalItems:a,onPageChange:i})=>s<=1?null:t.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200",children:[t.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",r+1," to ",Math.min(r+n,a)," of ",a," users"]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(J,{variant:"outline",size:"sm",onClick:()=>i(Math.max(e-1,1)),disabled:e===1,className:"hover:bg-gray-100",children:[t.jsx(fr,{size:16}),"Previous"]}),t.jsxs("span",{className:"px-3 py-1 text-sm text-gray-600 bg-gray-100 rounded",children:[e," of ",s]}),t.jsxs(J,{variant:"outline",size:"sm",onClick:()=>i(Math.min(e+1,s)),disabled:e===s,className:"hover:bg-gray-100",children:["Next",t.jsx(ns,{size:16})]})]})]}),ix=({searchTerm:e,onSearchChange:s})=>t.jsxs("div",{className:"relative w-64",children:[t.jsx(is,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),t.jsx("input",{type:"text",placeholder:"Search users...",className:"pl-8 pr-4 py-2 w-full rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/20",value:e,onChange:r=>s(r.target.value)})]}),Nj=({user:e,formatDate:s,getActivityIcon:r})=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(ft,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:"User Overview"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-purple-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"User ID"})]}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["#",e.id]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-green-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Joined Date"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:s(e.created_at)})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-orange-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Last Login"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:s(e.last_login)})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center mr-3",children:t.jsx(Vs,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Contact Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(Vs,{size:16,className:"text-blue-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Email"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-sm text-gray-800",children:e.email}),e.email_verified&&t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Verified"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(Nr,{size:16,className:"text-green-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Phone"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-sm text-gray-800",children:e.phone}),e.phone_verified&&t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Verified"})]})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(gs,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-purple-900",children:"Location Information"})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(gs,{size:16,className:"text-purple-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Address"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:e.address}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.city,", ",e.state," - ",e.pincode]})]})]})]}),wj=({columnVisibility:e})=>t.jsx("thead",{children:t.jsxs("tr",{className:"border-b",children:[e.name&&t.jsx("th",{className:"text-left pb-4",children:"Name"}),e.contact&&t.jsx("th",{className:"text-left pb-4",children:"Contact"}),e.location&&t.jsx("th",{className:"text-left pb-4",children:"Location"}),e.status&&t.jsx("th",{className:"text-left pb-4",children:"Status"}),e.activity&&t.jsx("th",{className:"text-left pb-4",children:"Activity"}),e.actions&&t.jsx("th",{className:"text-left pb-4",children:"Actions"})]})}),_j=({user:e,columnVisibility:s,expandingUsers:r,onStatusChange:n,onToggleDropdown:a,onDelete:i,formatDate:o})=>t.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[s.name&&t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center ring-2 ring-primary/10",children:t.jsx("span",{className:"text-sm font-semibold text-primary",children:e.name.charAt(0).toUpperCase()})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:e.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})]})}),s.contact&&t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Vs,{size:14,className:"text-gray-400"}),t.jsx("span",{className:"text-sm",children:e.email}),e.email_verified&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(qs,{size:14,className:"text-green-500"}),t.jsx("span",{className:"text-xs text-green-600 ml-1",children:"Verified"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Nr,{size:14,className:"text-gray-400"}),t.jsx("span",{className:"text-sm",children:e.phone}),e.phone_verified&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(qs,{size:14,className:"text-green-500"}),t.jsx("span",{className:"text-xs text-green-600 ml-1",children:"Verified"})]})]})]})}),s.location&&t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{className:"font-medium",children:[e.city,", ",e.state]}),t.jsxs("p",{className:"text-gray-500 flex items-center",children:[t.jsx(gs,{size:12,className:"mr-1"}),e.pincode]})]})}),s.status&&t.jsx("td",{className:"py-4",children:t.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${e.status==="active"?"bg-green-100 text-green-700 border border-green-200":e.status==="suspended"?"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[t.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${e.status==="active"?"bg-green-500":e.status==="suspended"?"bg-red-500":"bg-gray-500"}`}),e.status==="inactive"?"Active":e.status.charAt(0).toUpperCase()+e.status.slice(1)]})}),s.activity&&t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(bt,{size:14,className:"text-gray-400"}),t.jsxs("span",{className:"text-sm",children:["Last: ",o(e.last_login)]})]}),t.jsxs("div",{className:"text-sm text-gray-500 flex items-center space-x-3",children:[t.jsxs("span",{className:"flex items-center",children:[t.jsx(bt,{size:12,className:"mr-1"}),e.total_bookings," bookings"]}),t.jsxs("span",{className:"flex items-center",children:[t.jsx(br,{size:12,className:"mr-1"}),"",e.total_spent.toLocaleString()]})]})]})}),s.actions&&t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("select",{value:e.status,onChange:l=>n(e.id,l.target.value),className:"px-3 py-1.5 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"suspended",children:"Suspended"})]}),t.jsx(J,{variant:"outline",size:"sm",onClick:()=>a(e.id),className:"transition-all duration-200 hover:bg-blue-50 hover:border-blue-300 hover:shadow-md",disabled:r.has(e.id),children:r.has(e.id)?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}):t.jsxs(t.Fragment,{children:[t.jsx(jn,{size:14,className:"mr-1"}),t.jsx("span",{children:"Details"}),e.expanded?t.jsx(ka,{size:14,className:"ml-1"}):t.jsx(jr,{size:14,className:"ml-1"})]})}),t.jsxs(J,{variant:"outline",size:"sm",onClick:()=>i(e.id,e.name),className:"transition-all duration-200 hover:bg-red-600 hover:shadow-lg text-red-600 border-red-200",children:[t.jsx(He,{size:14,className:"mr-1"}),"Delete"]})]})})]}),Zo={},Ko=(Zo==null?void 0:Zo.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",kj=e=>({id:e.id||0,name:e.full_name||e.name||"Unknown",email:e.email||"",phone:e.phone_number||e.phone||"",address:e.address||"",pincode:e.pincode||"",city:e.city||"",state:e.state||"",profile_image:e.profile_photo_url||e.profile_image||"",status:e.status==="active"||e.status==="inactive"||e.status==="suspended"?e.status:"active",email_verified:e.email_verified!==void 0?e.email_verified:!0,phone_verified:e.phone_verified!==void 0?e.phone_verified:!0,created_at:e.created_at||new Date().toISOString(),updated_at:e.updated_at||e.created_at||new Date().toISOString(),last_login:e.last_login||e.updated_at||e.created_at||new Date().toISOString(),total_bookings:e.total_bookings||e.completed_appointments||0,total_spent:e.total_spent||0,recent_activities:(e.recent_activities||e.activities||[]).map(s=>({activity_type:s.activity_type||s.type||"unknown",description:s.description||"",ip_address:s.ip_address||"",created_at:s.created_at||new Date().toISOString()})),expanded:!1}),Sj=()=>{const[e,s]=p.useState([]),[r,n]=p.useState(!0),[a,i]=p.useState(""),[o,l]=p.useState(1),[c,d]=p.useState(new Set),h={name:!0,contact:!0,location:!0,status:!0,activity:!0,actions:!0},u=5,{addToast:f}=ot(),{user:g}=Bt(),[_,b]=p.useState({isOpen:!1,userId:null,userName:""}),w=p.useCallback(async()=>{const z=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!z){f("Please login to view users","error"),n(!1);return}try{n(!0);const H=await fetch(`${Ko}/admin/users`,{headers:{Authorization:`Bearer ${z}`,"Content-Type":"application/json"}});if(!H.ok){if(H.status===401){f("Authentication failed. Please log in again.","error"),n(!1);return}throw new Error(`HTTP error! status: ${H.status}`)}const q=H.headers.get("content-type");if(!q||!q.includes("application/json")){console.warn("Response is not JSON, treating as empty list"),s([]),n(!1);return}const k=await H.text();if(!k||k.trim()===""){console.warn("Empty response body, treating as empty list"),s([]),n(!1);return}let S;try{S=JSON.parse(k)}catch(O){throw console.error("JSON parse error:",O,"Response text:",k),new Error("Invalid JSON response from server")}let M=[];if(Array.isArray(S.data))M=S.data;else if(Array.isArray(S.users))M=S.users;else if(Array.isArray(S))M=S;else if(S.success===!1){console.warn("API returned error:",S.message),s([]),n(!1);return}else throw new Error(S.message||"Invalid response format from server");const I=M.map(O=>kj(O));s(I)}catch(H){console.error("Error fetching users:",H);const q=H instanceof Error?H.message:"Failed to fetch users";f(q,"error"),s([])}finally{n(!1)}},[f]);p.useEffect(()=>{w()},[w]);const x=e.filter(z=>z.name.toLowerCase().includes(a.toLowerCase())||z.email.toLowerCase().includes(a.toLowerCase())||z.phone.includes(a)||z.city.toLowerCase().includes(a.toLowerCase())),y=Math.ceil(x.length/u),m=(o-1)*u,j=x.slice(m,m+u),C=async(z,H)=>{var M;const q=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!q){f("Please login to update user status","error");return}let k={};const S=(g==null?void 0:g.name)||(g==null?void 0:g.full_name)||"Admin User";H==="suspended"?k={action:"suspend",notes:"User suspended by admin",admin_name:S}:k={action:"activate"};try{s(e.map(Q=>Q.id===z?{...Q,status:H,updated_at:new Date().toISOString()}:Q));const I=await fetch(`${Ko}/admin/users/${z}/status`,{method:"PUT",headers:{Authorization:`Bearer ${q}`,"Content-Type":"application/json"},body:JSON.stringify(k)});let O=null;const E=I.headers.get("content-type");if(E&&E.includes("application/json")&&I.status!==204)try{const Q=await I.text();Q&&Q.trim()&&(O=JSON.parse(Q))}catch(Q){console.warn("Could not parse response:",Q)}if(!I.ok){w();let Q="Failed to update user status";throw O?Q=O.message||((M=O.error)==null?void 0:M.message)||Q:I.status===404?Q="User status update endpoint not found. The API endpoint may not be implemented yet.":I.status===401?Q="Authentication failed. Please log in again.":I.status===403?Q="You do not have permission to update user status.":Q=`Server error: ${I.status} ${I.statusText}`,new Error(Q)}f((O==null?void 0:O.message)||`User status updated to ${H}`,"success"),w()}catch(I){console.error("Error updating user status:",I);const O=I instanceof Error?I.message:"Failed to update user status";f(O,"error"),w()}},F=async z=>{const H=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!H){f("Please login to delete user","error");return}try{if(!(await fetch(`${Ko}/admin/users/${z}`,{method:"DELETE",headers:{Authorization:`Bearer ${H}`,"Content-Type":"application/json"}})).ok)throw new Error("Failed to delete user");s(e.filter(k=>k.id!==z)),f("User deleted successfully","success"),b({isOpen:!1,userId:null,userName:""})}catch(q){console.error("Error deleting user:",q),f("Failed to delete user","error"),b({isOpen:!1,userId:null,userName:""})}},L=z=>{const H=e.find(q=>q.id===z);H!=null&&H.expanded||(d(q=>new Set(q).add(z)),setTimeout(()=>{d(q=>{const k=new Set(q);return k.delete(z),k})},300)),s(q=>q.map(k=>k.id===z?{...k,expanded:!k.expanded}:k))},$=z=>new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=(z,H)=>{b({isOpen:!0,userId:z,userName:H})};return t.jsxs(mt,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Pet Owners"}),t.jsx("p",{className:"text-gray-600",children:"Support pet owner accounts, engagement, and booking activity."})]}),r?t.jsx(Xr,{}):t.jsxs(Ee,{children:[t.jsxs(It,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[t.jsx(Mt,{children:"All Pet Owners"}),t.jsx("div",{className:"flex items-center space-x-3",children:t.jsx(ix,{searchTerm:a,onSearchChange:i})})]}),t.jsxs(Pe,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx(wj,{columnVisibility:h}),t.jsx("tbody",{children:j.map(z=>t.jsxs(Tt.Fragment,{children:[t.jsx(_j,{user:z,columnVisibility:h,expandingUsers:c,onStatusChange:C,onToggleDropdown:L,onDelete:P,formatDate:$}),z.expanded&&t.jsx("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50/30 border-l-4 border-primary/20",children:t.jsx("td",{colSpan:Object.values(h).filter(Boolean).length,className:"py-6 px-6",children:t.jsx(Nj,{user:z,formatDate:$})})})]},z.id))})]})}),y>1&&t.jsx(bj,{currentPage:o,totalPages:y,startIndex:m,itemsPerPage:u,totalItems:x.length,onPageChange:l})]})]}),t.jsx(jj,{isOpen:_.isOpen,onClose:()=>b({isOpen:!1,userId:null,userName:""}),onConfirm:()=>_.userId&&F(_.userId),userName:_.userName})]})},ox=({searchTerm:e,onSearchChange:s})=>t.jsxs("div",{className:"relative w-64",children:[t.jsx(is,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),t.jsx("input",{type:"text",placeholder:"Search categories...",className:"pl-8 pr-4 py-2 w-full rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/20",value:e,onChange:r=>s(r.target.value)})]}),lx=({currentPage:e,totalPages:s,startIndex:r,itemsPerPage:n,totalItems:a,onPageChange:i})=>t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",r+1," to ",Math.min(r+n,a)," of ",a," categories"]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(J,{onClick:()=>i(Math.max(e-1,1)),disabled:e===1,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(fr,{size:16})}),t.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",e," of ",s]}),t.jsx(J,{onClick:()=>i(Math.min(e+1,s)),disabled:e===s,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(ns,{size:16})})]})]}),Cj=({isOpen:e,onClose:s,onSave:r,category:n,isSubmitting:a=!1,initialImageUrl:i})=>{const[o,l]=p.useState({name:"",description:"",icon:"",image:"",status:"active",sort_order:0}),[c,d]=p.useState(null);p.useEffect(()=>{n?(l({name:n.name,description:"",icon:"",image:typeof i=="string"?i:"",status:"active",sort_order:0}),d(typeof i=="string"&&i?i:null)):(l({name:"",description:"",icon:"",image:"",status:"active",sort_order:0}),d(null))},[n,e,i]);const h=u=>{u.preventDefault(),r(o)};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:n?"Edit Category":"Add New Category"}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:t.jsx(He,{size:20})})]}),t.jsxs("form",{onSubmit:h,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),t.jsx("input",{type:"text",required:!0,value:o.name,onChange:u=>l({...o,name:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image (upload a file or paste a URL)"}),t.jsxs("div",{className:"grid gap-3",children:[t.jsx("div",{children:t.jsxs("label",{className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md cursor-pointer bg-gray-50 hover:bg-gray-100",children:[t.jsx(ac,{className:"mr-2 h-4 w-4"}),t.jsx("span",{children:"Choose file"}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:u=>{const f=u.target.files&&u.target.files[0];if(f){const g=URL.createObjectURL(f);d(g),l({...o,image:f})}}})]})}),t.jsx("div",{children:t.jsx("input",{type:"url",value:typeof o.image=="string"?o.image:"",onChange:u=>{l({...o,image:u.target.value}),d(u.target.value||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"/public/images/cat.jpg or https://..."})})]}),c&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:c,alt:"Preview",className:"max-h-24 max-w-full rounded border"})})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(J,{type:"button",onClick:s,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),t.jsx(J,{type:"submit",disabled:a,className:"bg-primary hover:bg-primary/90 text-white",children:a?"Saving...":n?"Update":"Create"})]})]})]})}):null},Ej=({isOpen:e,onClose:s,onConfirm:r,category:n,isSubmitting:a=!1})=>e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Delete Category"}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:t.jsx(He,{size:20})})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete "',n==null?void 0:n.name,'"? This action cannot be undone.']}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx(J,{onClick:s,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),t.jsx(J,{onClick:r,disabled:a,className:"bg-red-600 hover:bg-red-700 text-white",children:a?"Deleting...":"Delete"})]})]})]})}):null,en={},Pr=(en==null?void 0:en.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",Pj=(en==null?void 0:en.VITE_BACKEND_BASE_URL)||"https://backendpetify.mycartly.in",Tj=e=>{const s=typeof e=="string"?e.trim():"";if(!s)return"";if(/^https?:\/\//i.test(s))return s;let r=s.replace(/\\/g,"/");return r.startsWith("public/")?r=r.slice(7):r.startsWith("/public/")&&(r=r.slice(8)),r=r.startsWith("/")?r:`/${r}`,`${Pj}${r}`},zj=()=>{const{addToast:e}=ot(),[s,r]=p.useState([]),[n,a]=p.useState(!1),[i,o]=p.useState(""),[l,c]=p.useState(1),[d,h]=p.useState(!1),[u,f]=p.useState("add"),[g,_]=p.useState(null),[b,w]=p.useState(!1),x=10,y=async()=>{a(!0);try{const k=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token"),S=await fetch(`${Pr}/admin/categories`,{method:"GET",headers:{"Content-Type":"application/json",...k?{Authorization:`Bearer ${k}`}:{}}}),M=await S.json();if(S.ok&&M.categories&&Array.isArray(M.categories)){const O=M.categories.map(E=>({id:E.id,name:E.name,image_url:typeof E.image_url=="string"?E.image_url:"",created_at:E.created_at||new Date().toISOString(),updated_at:E.updated_at||new Date().toISOString()}));r(O)}else throw new Error(M.message||"Failed to fetch categories")}catch(k){console.error("Error fetching categories:",k);const S=k instanceof Error?k.message:"Failed to fetch categories";e(S,"error")}finally{a(!1)}};p.useEffect(()=>{y()},[]);const m=()=>{f("add"),_(null),h(!0)},j=k=>{f("edit"),_(k),h(!0)},C=k=>{f("delete"),_(k),h(!0)},F=async k=>{w(!0);try{const S=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!S){e("Please login to save category","error"),w(!1);return}const M=I=>{if(!I)return"Request failed";if(typeof I=="string")return I;if(I.message&&typeof I.message=="string")return I.message;if(I.error&&typeof I.error=="string")return I.error;if(I.errors&&typeof I.errors=="object"){const O=Object.keys(I.errors)[0],E=Array.isArray(I.errors[O])?I.errors[O][0]:I.errors[O];return typeof E=="string"?E:"Validation failed"}try{return JSON.stringify(I)}catch{return"Unknown error"}};if(u==="add"){let I;if(k.image instanceof File){const B=new FormData;B.append("name",k.name),B.append("image",k.image),I=await fetch(`${Pr}/admin/categories`,{method:"POST",headers:{Authorization:`Bearer ${S}`},body:B})}else{const B={name:k.name};typeof k.image=="string"&&k.image.trim()!==""&&(B.image=k.image),I=await fetch(`${Pr}/admin/categories`,{method:"POST",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},body:JSON.stringify(B)})}const O=await I.text(),E=(()=>{try{return O?JSON.parse(O):{}}catch{return{raw:O}}})();if(I.ok&&E.category)await y(),e("Category created successfully","success"),h(!1);else throw new Error(M(E)||"Failed to create category")}else if(u==="edit"&&g){let I;if(k.image instanceof File){const B=new FormData;B.append("name",k.name),B.append("image",k.image),I=await fetch(`${Pr}/admin/categories/${g.id}`,{method:"PUT",headers:{Authorization:`Bearer ${S}`},body:B})}else{const B={name:k.name};typeof k.image=="string"&&k.image.trim()!==""&&(B.image=k.image),I=await fetch(`${Pr}/admin/categories/${g.id}`,{method:"PUT",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},body:JSON.stringify(B)})}const O=await I.text(),E=(()=>{try{return O?JSON.parse(O):{}}catch{return{raw:O}}})();if(I.ok&&E.category)await y(),e("Category updated successfully","success"),h(!1);else throw new Error(M(E)||"Failed to update category")}}catch(S){console.error("Error saving category:",S);const M=S instanceof Error?S.message:typeof S=="string"?S:"Failed to save category";e(M,"error")}finally{w(!1)}},L=async()=>{if(g){w(!0);try{const k=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!k){e("Please login to delete category","error"),w(!1);return}const S=await fetch(`${Pr}/admin/categories/${g.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}}),M=await S.json();if(S.ok)r(I=>I.filter(O=>O.id!==g.id)),e("Category deleted successfully","success"),h(!1),y();else throw new Error(M.message||M.error||"Failed to delete category")}catch(k){console.error("Error deleting category:",k);const S=k instanceof Error?k.message:"Failed to delete category";e(S,"error")}finally{w(!1)}}},$=s.filter(k=>k.name.toLowerCase().includes(i.toLowerCase())),P=Math.ceil($.length/x),z=(l-1)*x,H=$.slice(z,z+x),q=k=>new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return t.jsxs(mt,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Pet Categories"}),t.jsx("p",{className:"text-gray-600",children:"Manage categories, images and details."})]}),n?t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading categories..."})]}):t.jsxs(Ee,{children:[t.jsxs(It,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[t.jsx(Mt,{children:"All Pet Categories"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(ox,{searchTerm:i,onSearchChange:o}),t.jsxs(J,{onClick:m,className:"flex items-center space-x-2",children:[t.jsx(Ws,{size:16}),t.jsx("span",{children:"Add Category"})]})]})]}),t.jsxs(Pe,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{className:"text-left pb-4",children:"Image"}),t.jsx("th",{className:"text-left pb-4",children:"Name"}),t.jsx("th",{className:"text-left pb-4",children:"Published"}),t.jsx("th",{className:"text-left pb-4",children:"Actions"})]})}),t.jsx("tbody",{children:H.map(k=>t.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[t.jsx("td",{className:"py-4",children:k.image_url?t.jsx("img",{src:Tj(k.image_url),alt:k.name,className:"h-10 w-10 rounded object-cover border",onError:S=>{const M=S.currentTarget;M.src!==k.image_url&&(M.src=k.image_url)}}):t.jsx("div",{className:"h-10 w-10 rounded bg-gray-100 border"})}),t.jsxs("td",{className:"py-4",children:[t.jsx("div",{className:"text-gray-900 font-medium",children:k.name}),t.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",k.id]})]}),t.jsx("td",{className:"py-4",children:t.jsx("div",{className:"text-sm text-gray-600",children:q(k.created_at)})}),t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(J,{onClick:()=>j(k),children:"Edit"}),t.jsx(J,{onClick:()=>C(k),className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})})]},k.id))})]})}),P>1&&t.jsx(lx,{currentPage:l,totalPages:P,startIndex:z,itemsPerPage:x,totalItems:$.length,onPageChange:c})]})]}),(u==="add"||u==="edit")&&t.jsx(Cj,{isOpen:d,onClose:()=>h(!1),onSave:F,category:g?{id:g.id,name:g.name,description:"",icon:"",status:"active",total_services:0,created_at:g.created_at,updated_at:g.updated_at}:void 0,initialImageUrl:g==null?void 0:g.image_url,isSubmitting:b}),u==="delete"&&t.jsx(Ej,{isOpen:d,onClose:()=>h(!1),onConfirm:L,category:g,isSubmitting:b})]})};let Aj=0;const Lj=({value:e,onChange:s,placeholder:r="",height:n=400,disabled:a=!1,htmlMode:i=!1})=>{const o=p.useRef(null),l=p.useRef(null),c=p.useRef(!1),d=p.useRef(!0),h=p.useRef(`tinymce-editor-${++Aj}-${Date.now()}-${Math.random().toString(36).substring(2,11)}`);return p.useEffect(()=>{if(!o.current||c.current)return;const u=async()=>{try{if(window.tinymce)setTimeout(()=>{f()},100);else{const _=["/tinymce/js/tinymce/tinymce.min.js","/tinymce/tinymce/tinymce.min.js"];let b=!1;const w=x=>{if(x>=_.length){console.error("Failed to load TinyMCE from all attempted paths");return}const y=document.createElement("script");y.src=_[x],y.async=!0,y.onload=()=>{!b&&window.tinymce&&(b=!0,window.tinymce.baseURL="/tinymce/js/tinymce",setTimeout(()=>{f()},100))},y.onerror=()=>{w(x+1)},document.head.appendChild(y)};w(0)}}catch(_){console.error("Error initializing TinyMCE editor:",_)}},f=()=>{try{if(!window.tinymce||!o.current||c.current)return;if(!o.current.isConnected){setTimeout(()=>f(),100);return}const _=h.current;if(window.tinymce.get(_))try{window.tinymce.remove(_)}catch{}o.current.id=_,window.tinymce.init({target:o.current,height:n,menubar:!1,license_key:"gpl",branding:!1,plugins:["advlist","autolink","lists","link","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family: Inter, sans-serif; font-size: 14px; }",placeholder:r,skin_url:"/tinymce/js/tinymce/skins/ui/oxide",content_css:"/tinymce/js/tinymce/skins/content/default/content.css",base_url:"/tinymce/js/tinymce",setup:b=>{l.current=b,b.on("init",()=>{try{if(e)if(i)b.setContent(e);else{const w=e.replace(/\n/g,"<br>");b.setContent(w)}c.current=!0}catch(w){console.error("Error setting initial content:",w)}}),b.on("change keyup",()=>{try{if(!d.current)return;if(i){const w=b.getContent();s(w)}else{const w=b.getContent({format:"text"});s(w)}}catch(w){console.error("Error getting editor content:",w)}})},init_instance_callback:b=>{try{a&&b.setMode("readonly")}catch(w){console.error("Error in init_instance_callback:",w)}}})}catch(_){console.error("Error in initializeEditor:",_)}},g=setTimeout(()=>{u()},50);return()=>{if(clearTimeout(g),d.current=!1,l.current&&window.tinymce){try{const _=l.current.id||h.current;window.tinymce.get(_)&&window.tinymce.remove(_)}catch(_){console.error("Error removing TinyMCE editor:",_)}l.current=null,c.current=!1}}},[]),p.useEffect(()=>{if(l.current&&c.current)try{if(i)l.current.getContent()!==e&&l.current.setContent(e||"");else if(l.current.getContent({format:"text"})!==e){const f=(e||"").replace(/\n/g,"<br>");l.current.setContent(f)}}catch(u){console.error("Error updating editor content:",u)}},[e,i]),p.useEffect(()=>{l.current&&(a?l.current.setMode("readonly"):l.current.setMode("design"))},[a]),t.jsx("div",{className:"tinymce-wrapper",children:t.jsx("textarea",{ref:o,className:"w-full border rounded",style:{minHeight:`${n}px`}})})},tn={},Tr=(tn==null?void 0:tn.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",$j=(tn==null?void 0:tn.VITE_BACKEND_BASE_URL)||"https://backendpetify.mycartly.in",Ij=e=>{const s=typeof e=="string"?e.trim():"";if(!s)return"";if(/^https?:\/\//i.test(s))return s;let r=s.replace(/\\/g,"/");return r.startsWith("public/")?r=r.slice(7):r.startsWith("/public/")&&(r=r.slice(8)),r=r.startsWith("/")?r:`/${r}`,`${$j}${r}`},Mj=()=>{const{addToast:e}=ot(),[s,r]=p.useState([]),[n,a]=p.useState([]),[i,o]=p.useState(!1),[l,c]=p.useState(!1),[d,h]=p.useState(""),[u,f]=p.useState(""),[g,_]=p.useState(1),[b,w]=p.useState(!1),[x,y]=p.useState("add"),[m,j]=p.useState({category_id:"",title:"",price_original:"",price_discounted:"",no_of_sessions:"",no_of_months:"",features:"",description:""}),C=10,F=A=>{if(!A)return"Request failed";if(typeof A=="string")return A;if(A.message&&typeof A.message=="string")return A.message;if(A.error&&typeof A.error=="string")return A.error;if(A.errors&&typeof A.errors=="object"){const W=Object.keys(A.errors)[0],ee=Array.isArray(A.errors[W])?A.errors[W][0]:A.errors[W];return typeof ee=="string"?ee:"Validation failed"}try{return JSON.stringify(A)}catch{return"Unknown error"}},L=async()=>{var A;o(!0);try{const W=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token"),ee=new URLSearchParams;u&&Number(u)>0&&ee.set("category_id",String(u));const ie=`${Tr}/admin/services${ee.toString()?`?${ee.toString()}`:""}`,v=await fetch(ie,{method:"GET",headers:{"Content-Type":"application/json",...W?{Authorization:`Bearer ${W}`}:{}}});if(!v.ok){const K=v.headers.get("content-type");let ae=`Failed to fetch services (${v.status})`;if(K&&K.includes("application/json"))try{const ce=await v.json();ae=ce.message||((A=ce.error)==null?void 0:A.message)||ae}catch{}else{const ce=await v.text();console.error("Non-JSON error response:",ce.substring(0,200)),ae=`Server error: ${v.status} ${v.statusText}`}throw new Error(ae)}const R=v.headers.get("content-type");if(!R||!R.includes("application/json"))throw new Error("Server returned non-JSON response");const U=await v.json();if(U.services&&Array.isArray(U.services))a(U.services.map(K=>({id:K.id,category_id:K.category_id,title:K.title,price_original:K.price_original,price_discounted:K.price_discounted,no_of_sessions:K.no_of_sessions,no_of_months:K.no_of_months,features:K.features,description:K.description,image_url:typeof K.image_url=="string"?K.image_url:"",created_at:K.created_at,updated_at:K.updated_at,deleted_at:K.deleted_at||null})));else throw new Error(U.message||"Invalid response format")}catch(W){console.error("Error fetching services:",W);const ee=W instanceof Error?W.message:"Failed to fetch services";e(ee,"error")}finally{o(!1)}},$=async()=>{var A;try{const W=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token"),ee=await fetch(`${Tr}/admin/categories`,{method:"GET",headers:{"Content-Type":"application/json",...W?{Authorization:`Bearer ${W}`}:{}}});if(!ee.ok){const R=ee.headers.get("content-type");let U=`Failed to fetch categories (${ee.status})`;if(R&&R.includes("application/json"))try{const K=await ee.json();U=K.message||((A=K.error)==null?void 0:A.message)||U}catch{}else{const K=await ee.text();console.error("Non-JSON error response from categories:",K.substring(0,200)),U=`Server error: ${ee.status} ${ee.statusText}`}throw new Error(U)}const ie=ee.headers.get("content-type");if(!ie||!ie.includes("application/json"))throw new Error("Server returned non-JSON response");const v=await ee.json();if(v.categories&&Array.isArray(v.categories)){const R=v.categories.map(U=>({id:U.id,name:U.name}));r(R)}else throw new Error(v.message||"Invalid response format")}catch(W){const ee=W instanceof Error?W.message:"Failed to fetch categories";e(ee,"error")}};p.useEffect(()=>{L()},[u]),p.useEffect(()=>{$()},[]);const P=()=>{y("add"),j({category_id:u?Number(u):"",title:"",price_original:"",price_discounted:"",no_of_sessions:"",no_of_months:"",features:"",description:"",image:void 0}),w(!0)},z=A=>{y("edit"),j({id:A.id,category_id:A.category_id,title:A.title,price_original:A.price_original||"",price_discounted:A.price_discounted||"",no_of_sessions:typeof A.no_of_sessions=="number"?A.no_of_sessions:"",no_of_months:typeof A.no_of_months=="number"?A.no_of_months:"",features:A.features||"",description:A.description||""}),w(!0)},H=async A=>{var ee;if(window.confirm(`Delete service "${A.title}"? This will perform a soft delete - the service will be hidden from users but can be restored later.`))try{c(!0);const ie=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!ie){e("Please login to delete service","error");return}const v=await fetch(`${Tr}/admin/services/${A.id}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`}}),R=await v.json().catch(()=>({}));if(v.ok)await L(),e("Service deleted successfully (soft delete)","success");else throw new Error(R.message||((ee=R.error)==null?void 0:ee.message)||"Failed to delete service")}catch(ie){const v=ie instanceof Error?ie.message:"Failed to delete service";e(v,"error")}finally{c(!1)}},q=async A=>{var ee;if(window.confirm(`Restore service "${A.title}"?`))try{c(!0);const ie=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!ie){e("Please login to restore service","error");return}const v=await fetch(`${Tr}/admin/services/${A.id}/restore`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`}}),R=await v.json().catch(()=>({}));if(v.ok)await L(),e("Service restored successfully","success");else{const U=((ee=R.error)==null?void 0:ee.message)||R.message||"Failed to restore service";throw new Error(U)}}catch(ie){const v=ie instanceof Error?ie.message:"Failed to restore service";e(v,"error")}finally{c(!1)}},k=A=>A.category_id===""||Number(A.category_id)<=0?"Category ID is required":!A.title||A.title.trim()===""?"Title is required":!A.price_original||A.price_original.trim()===""?"Original price is required":A.features&&A.features.length>1e4?"Features text is too long (maximum 10000 characters)":A.description&&A.description.length>2e4?"Description text is too long (maximum 20000 characters)":"",S=async()=>{var ee,ie,v,R;const A=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!A){e("Please login to save service","error");return}const W=k(m);if(W){e(W,"error");return}if(!l){c(!0);try{const U=x==="edit"&&m.id,K=U?`${Tr}/admin/services/${m.id}`:`${Tr}/admin/services`,ae=U?"PUT":"POST";let ce;if(m.image instanceof File){const V=new FormData;if(V.append("category_id",String(m.category_id)),V.append("title",String(m.title).trim()),V.append("price_original",String(m.price_original).trim()),m.price_discounted&&String(m.price_discounted).trim()!==""&&V.append("price_discounted",String(m.price_discounted).trim()),m.no_of_sessions!==""&&m.no_of_sessions!==void 0&&!isNaN(Number(m.no_of_sessions))&&V.append("no_of_sessions",String(Number(m.no_of_sessions))),m.no_of_months!==""&&m.no_of_months!==void 0&&!isNaN(Number(m.no_of_months))&&V.append("no_of_months",String(Number(m.no_of_months))),m.features&&m.features.trim()!==""){const te=m.features.replace(/\r\n/g,`
`).replace(/\r/g,`
`).trim();V.append("features",te)}if(m.description&&m.description.trim()!==""){const te=m.description.replace(/\r\n/g,`
`).replace(/\r/g,`
`).trim();V.append("description",te)}V.append("image",m.image),ce=await fetch(K,{method:ae,headers:{Authorization:`Bearer ${A}`},body:V})}else{const V={category_id:Number(m.category_id),title:String(m.title).trim(),price_original:String(m.price_original).trim()};if(m.price_discounted&&String(m.price_discounted).trim()!==""&&(V.price_discounted=String(m.price_discounted).trim()),m.no_of_sessions!==""&&m.no_of_sessions!==void 0&&!isNaN(Number(m.no_of_sessions))&&(V.no_of_sessions=Number(m.no_of_sessions)),m.no_of_months!==""&&m.no_of_months!==void 0&&!isNaN(Number(m.no_of_months))&&(V.no_of_months=Number(m.no_of_months)),m.features&&m.features.trim()!==""){const te=m.features.replace(/\r\n/g,`
`).replace(/\r/g,`
`).trim();V.features=te}if(m.description&&m.description.trim()!==""){const te=m.description.replace(/\r\n/g,`
`).replace(/\r/g,`
`).trim();V.description=te}typeof m.image=="string"&&m.image.trim()!==""&&(V.image=m.image.trim()),ce=await fetch(K,{method:ae,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:`Bearer ${A}`},body:JSON.stringify(V)})}const T=await ce.text(),D=(()=>{try{return T?JSON.parse(T):{}}catch{return{raw:T}}})();if(ce.ok&&(D.service||D.message)){const V=m.category_id;w(!1),j({category_id:V||(u?Number(u):""),title:"",price_original:"",price_discounted:"",no_of_sessions:"",no_of_months:"",features:"",description:"",image:void 0}),e(U?"Service updated successfully":"Service created successfully","success"),setTimeout(()=>{L()},500)}else{console.error("Service creation error:",{status:ce.status,statusText:ce.statusText,data:D,rawText:T.substring(0,500),formDataLengths:{features:((ee=m.features)==null?void 0:ee.length)||0,description:((ie=m.description)==null?void 0:ie.length)||0,hasImageFile:m.image instanceof File}});const V=F(D);if(ce.status===401||ce.status===403)throw new Error("Authentication failed. Please log in again.");if(ce.status===500){const te=((v=D.error)==null?void 0:v.detail)||((R=D.error)==null?void 0:R.message)||"";throw typeof te=="string"&&(te.includes("UnicodeEncodeError")||te.includes("'ascii' codec can't encode"))?new Error("Text contains special characters that cannot be processed. Please avoid using special dashes (like  or ), quotes, or symbols. Use regular hyphens (-) and standard quotes instead."):m.features&&m.features.length>1e4?new Error("Features text is too long (maximum 10000 characters). Please reduce the length and try again."):m.description&&m.description.length>2e4?new Error("Description text is too long (maximum 20000 characters). Please reduce the length and try again."):new Error(V||"Server error. Please check your data and try again.")}else throw new Error(V||`Failed to save service (${ce.status})`)}}catch(U){const K=U instanceof Error?U.message:"Failed to save service";console.error("Service creation exception:",U),e(K,"error")}finally{c(!1)}}},M=p.useMemo(()=>{const A=d.toLowerCase();return n.filter(W=>W.title.toLowerCase().includes(A))},[n,d]),I=Math.ceil(M.length/C),O=(g-1)*C,E=M.slice(O,O+C),B=A=>A?new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",Q=A=>{if(!A)return"";const W=document.createElement("DIV");return W.innerHTML=A,W.textContent||W.innerText||""};return t.jsxs(mt,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Admin Services"}),t.jsx("p",{className:"text-gray-600",children:"Manage services: create, edit, delete, and filter by category."})]}),i?t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading services..."})]}):t.jsxs(Ee,{children:[t.jsxs(It,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[t.jsx(Mt,{children:"All Services"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("select",{className:"border rounded px-3 py-2 w-56",value:u,onChange:A=>{_(1),f(A.target.value)},children:[t.jsx("option",{value:"",children:"All categories"}),s.map(A=>t.jsxs("option",{value:String(A.id),children:[A.name," (#",A.id,")"]},A.id))]})}),t.jsx(ox,{searchTerm:d,onSearchChange:A=>{_(1),h(A)}}),t.jsxs(J,{onClick:P,className:"flex items-center space-x-2",children:[t.jsx(Ws,{size:16}),t.jsx("span",{children:"Add Service"})]})]})]}),t.jsxs(Pe,{children:[b&&t.jsxs("div",{className:"mb-6 border rounded p-4 bg-gray-50",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Category"}),t.jsxs("select",{className:"w-full border rounded px-3 py-2",value:m.category_id===""?"":String(m.category_id),onChange:A=>j(W=>({...W,category_id:A.target.value===""?"":Number(A.target.value)})),children:[t.jsx("option",{value:"",children:"Select category"}),s.map(A=>t.jsxs("option",{value:String(A.id),children:[A.name," (#",A.id,")"]},A.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Title"}),t.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",value:m.title,onChange:A=>j(W=>({...W,title:A.target.value}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Original Price"}),t.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",value:m.price_original,onChange:A=>j(W=>({...W,price_original:A.target.value}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Discounted Price"}),t.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",value:m.price_discounted,onChange:A=>j(W=>({...W,price_discounted:A.target.value}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"No. of Sessions"}),t.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:m.no_of_sessions,onChange:A=>j(W=>({...W,no_of_sessions:A.target.value===""?"":Number(A.target.value)}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"No. of Months"}),t.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:m.no_of_months,onChange:A=>j(W=>({...W,no_of_months:A.target.value===""?"":Number(A.target.value)}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Image File"}),t.jsx("input",{type:"file",accept:"image/*",className:"w-full border rounded px-3 py-2",onChange:A=>{const W=A.target.files&&A.target.files[0];j(ee=>({...ee,image:W||void 0})),W||(A.target.value="")}}),m.image instanceof File&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["File selected: ",m.image.name]}),x==="edit"&&!m.image&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Current image kept unless you upload a new file or provide an image URL."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Image URL (or use file above)"}),t.jsx("input",{type:"text",placeholder:"https://... or public/services/filename.jpg",className:"w-full border rounded px-3 py-2",value:typeof m.image=="string"?m.image:"",onChange:A=>{const W=A.target.value.trim();j(ee=>({...ee,image:W||void 0}))}})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Features",m.features&&t.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",m.features.length," / 10000 characters)"]})]}),t.jsx("textarea",{className:"w-full border rounded px-3 py-2",value:m.features||"",onChange:A=>j(W=>({...W,features:A.target.value})),placeholder:"Enter features, one per line or separated by commas. Newlines are preserved.",rows:10})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Description",m.description&&t.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",m.description.length," / 20000 characters)"]})]}),b&&t.jsx(Lj,{value:m.description||"",onChange:A=>j(W=>({...W,description:A})),placeholder:"Enter detailed description with rich text formatting.",height:400,htmlMode:!0},`editor-${x}-${m.id||"new"}`)]})]}),t.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[t.jsx(J,{onClick:S,disabled:l,children:x==="add"?"Create Service":"Save Changes"}),t.jsx(J,{onClick:()=>w(!1),className:"bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Cancel"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b bg-gray-50",children:[t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"Image"}),t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-16",children:"ID"}),t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 min-w-[300px]",children:"Title"}),t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-24",children:"Category"}),t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-24",children:"Original"}),t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-28",children:"Discounted"}),t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-32",children:"Updated"}),t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-48",children:"Actions"})]})}),t.jsx("tbody",{children:E.map(A=>{const W=A.deleted_at!==null&&A.deleted_at!==void 0;return t.jsxs("tr",{className:`border-b hover:bg-gray-50 transition-colors duration-150 ${W?"opacity-60 bg-gray-100":""}`,children:[t.jsx("td",{className:"px-4 py-4",children:A.image_url?t.jsx("img",{src:Ij(A.image_url),alt:A.title,className:"h-12 w-12 rounded object-cover border shadow-sm",onError:ee=>{const ie=ee.currentTarget;ie.src!==(A.image_url||"")&&(ie.src=A.image_url||"")}}):t.jsx("div",{className:"h-12 w-12 rounded bg-gray-200 border flex items-center justify-center",children:t.jsx("span",{className:"text-gray-400 text-xs",children:"No img"})})}),t.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:A.id}),t.jsx("td",{className:"px-4 py-4",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"text-gray-900 font-medium flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"break-words",children:A.title}),W&&t.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded whitespace-nowrap",children:"Deleted"})]}),A.description?t.jsx("div",{className:"text-xs text-gray-500 line-clamp-2 whitespace-pre-wrap max-w-md",children:Q(A.description)}):null,A.features&&t.jsxs("div",{className:"text-xs text-gray-400 line-clamp-1 max-w-md",children:["Features: ",A.features.substring(0,60),A.features.length>60?"...":""]})]})}),t.jsx("td",{className:"px-4 py-4",children:t.jsxs("div",{className:"text-sm text-gray-700 font-mono",children:["#",A.category_id]})}),t.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-gray-900",children:A.price_original}),t.jsx("td",{className:"px-4 py-4 text-sm font-semibold text-green-600",children:A.price_discounted||"-"}),t.jsx("td",{className:"px-4 py-4 text-sm text-gray-600 whitespace-nowrap",children:B(A.updated_at)}),t.jsx("td",{className:"px-4 py-4",children:t.jsx("div",{className:"flex items-center gap-2",children:W?t.jsx(J,{onClick:()=>q(A),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2",size:"sm",children:"Restore"}):t.jsxs(t.Fragment,{children:[t.jsx(J,{onClick:()=>z(A),className:"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2",size:"sm",children:"Edit"}),t.jsx(J,{onClick:()=>H(A),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2",size:"sm",children:"Delete"})]})})})]},A.id)})})]})}),I>1&&t.jsx(lx,{currentPage:g,totalPages:I,startIndex:O,itemsPerPage:C,totalItems:M.length,onPageChange:_})]})]})]})},Yo={},Dj=(Yo==null?void 0:Yo.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",Vt=(e,s="An error occurred")=>{var r,n,a;if(!e)return s;if(typeof e=="string")return e;if(e.message&&typeof e.message=="string")return e.message;if((r=e.response)!=null&&r.data){const i=e.response.data;if(i.message&&typeof i.message=="string")return i.message;if(i.error){if(typeof i.error=="string")return i.error;if((n=i.error)!=null&&n.message&&typeof i.error.message=="string")return i.error.message}}if(e.error){if(typeof e.error=="string")return e.error;if((a=e.error)!=null&&a.message&&typeof e.error.message=="string")return e.error.message}if(typeof e=="object")try{return JSON.stringify(e)}catch{return s}return s};function Rj(){const e=Dj,{addToast:s}=ot(),[r,n]=p.useState("rates"),[a,i]=p.useState(""),[o,l]=p.useState([]),[c,d]=p.useState([]),[h,u]=p.useState(!1),[f,g]=p.useState(!1),[_,b]=p.useState("add"),[w,x]=p.useState(null),[y,m]=p.useState(!1),[j,C]=p.useState({category_id:"",commission_percentage:"",min_commission:"",max_commission:"",effective_from:"",effective_to:"",is_active:!0}),[F,L]=p.useState([]),[$,P]=p.useState(null),[z,H]=p.useState(!1),[q,k]=p.useState({category_id:"",provider_id:"",start_date:"",end_date:"",provider_payment_status:"",group_by_category:!1}),S=async()=>{try{const v=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token"),U=await(await fetch(`${e}/admin/categories`,{headers:{Authorization:`Bearer ${v}`}})).json();U.categories&&Array.isArray(U.categories)&&d(U.categories.map(K=>({id:K.id,name:K.name})))}catch(v){console.error("Error fetching categories:",v)}},M=async()=>{u(!0);try{const v=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(!v)throw new Error("Authentication token not found");const U=await(await fetch(`${e}/admin/commission/categories`,{headers:{Authorization:`Bearer ${v}`}})).json();if(U.success&&U.category_rates)l(U.category_rates);else{const K=Vt(U,"Failed to fetch category rates");s(K,"error")}}catch(v){console.error("Error fetching category rates:",v);const R=Vt(v,"Failed to fetch category rates");s(R,"error")}finally{u(!1)}},I=async()=>{H(!0);try{const v=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(!v)throw new Error("Authentication token not found");const R=new URLSearchParams;q.category_id&&R.append("category_id",q.category_id),q.provider_id&&R.append("provider_id",q.provider_id),q.start_date&&R.append("start_date",q.start_date),q.end_date&&R.append("end_date",q.end_date),q.provider_payment_status&&R.append("provider_payment_status",q.provider_payment_status),q.group_by_category&&R.append("group_by_category","true");const K=await(await fetch(`${e}/admin/bookings/commission-history?${R.toString()}`,{headers:{Authorization:`Bearer ${v}`}})).json();if(K.success)L(K.bookings||[]),P(K.summary||null);else{const ae=Vt(K,"Failed to fetch commission history");s(ae,"error")}}catch(v){console.error("Error fetching commission history:",v);const R=Vt(v,"Failed to fetch commission history");s(R,"error")}finally{H(!1)}},O=async(v,R)=>{try{const U=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(!U)throw new Error("Authentication token not found");const ae=await(await fetch(`${e}/admin/bookings/${v}/provider-payment`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${U}`},body:JSON.stringify({provider_payment_status:R,admin_name:"Admin"})})).json();if(ae.success)s(`Provider payment marked as ${R}`,"success"),I();else{const ce=Vt(ae,"Failed to update provider payment status");s(ce,"error")}}catch(U){console.error("Error updating provider payment status:",U);const K=Vt(U,"Failed to update provider payment status");s(K,"error")}},E=()=>{b("add"),x(null),C({category_id:"",commission_percentage:"",min_commission:"",max_commission:"",effective_from:new Date().toISOString().split("T")[0],effective_to:"",is_active:!0}),g(!0)},B=v=>{var R;b("edit"),x(v),C({category_id:v.category_id.toString(),commission_percentage:v.commission_percentage.toString(),min_commission:v.min_commission.toString(),max_commission:((R=v.max_commission)==null?void 0:R.toString())||"",effective_from:v.effective_from.split("T")[0],effective_to:v.effective_to?v.effective_to.split("T")[0]:"",is_active:v.is_active}),g(!0)},Q=v=>{b("delete"),x(v),g(!0)},A=async v=>{v.preventDefault(),m(!0);try{const R=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(!R)throw new Error("Authentication token not found");if(_==="add"){const U={category_id:Number(j.category_id),commission_percentage:Number(j.commission_percentage),min_commission:j.min_commission?Number(j.min_commission):0,max_commission:j.max_commission?Number(j.max_commission):null,effective_from:j.effective_from?new Date(j.effective_from).toISOString():new Date().toISOString(),effective_to:j.effective_to?new Date(j.effective_to).toISOString():null,is_active:j.is_active,created_by:"admin"},ae=await(await fetch(`${e}/admin/commission/categories`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`},body:JSON.stringify(U)})).json();if(ae.success)s("Category commission rate added successfully","success"),g(!1),M();else{const ce=Vt(ae,"Failed to add category commission rate");s(ce,"error")}}else if(_==="edit"&&w){const U={};j.commission_percentage&&(U.commission_percentage=Number(j.commission_percentage)),j.min_commission&&(U.min_commission=Number(j.min_commission)),j.max_commission&&(U.max_commission=j.max_commission?Number(j.max_commission):null),j.effective_from&&(U.effective_from=new Date(j.effective_from).toISOString()),j.effective_to&&(U.effective_to=j.effective_to?new Date(j.effective_to).toISOString():null),j.is_active!==void 0&&(U.is_active=j.is_active);const ae=await(await fetch(`${e}/admin/commission/categories/${w.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`},body:JSON.stringify(U)})).json();if(ae.success)s("Category commission rate updated successfully","success"),g(!1),M();else{const ce=Vt(ae,"Failed to update category commission rate");s(ce,"error")}}}catch(R){console.error("Error submitting form:",R);const U=Vt(R,"Error submitting form. Please try again.");s(U,"error")}finally{m(!1)}},W=async()=>{if(w){m(!0);try{const v=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(!v)throw new Error("Authentication token not found");const U=await(await fetch(`${e}/admin/commission/categories/${w.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${v}`}})).json();if(U.success)s("Category commission rate deleted successfully","success"),g(!1),M();else{const K=Vt(U,"Failed to delete category commission rate");s(K,"error")}}catch(v){console.error("Error deleting category rate:",v);const R=Vt(v,"Error deleting category rate");s(R,"error")}finally{m(!1)}}};p.useEffect(()=>{S(),r==="rates"?M():r==="history"&&I()},[r]);const ee=()=>{if(h)return t.jsx("div",{className:"flex justify-center p-8",children:"Loading category rates..."});const v=o.filter(R=>R.category_name.toLowerCase().includes(a.toLowerCase()));return v.length===0?t.jsx("div",{className:"flex justify-center p-8 text-gray-500",children:"No category rates found"}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{className:"text-left p-4",children:"Category"}),t.jsx("th",{className:"text-left p-4",children:"Commission %"}),t.jsx("th",{className:"text-left p-4",children:"Min Commission"}),t.jsx("th",{className:"text-left p-4",children:"Max Commission"}),t.jsx("th",{className:"text-left p-4",children:"Effective From"}),t.jsx("th",{className:"text-left p-4",children:"Status"}),t.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),t.jsx("tbody",{children:v.map(R=>t.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[t.jsx("td",{className:"p-4 font-medium",children:R.category_name}),t.jsxs("td",{className:"p-4",children:[R.commission_percentage,"%"]}),t.jsxs("td",{className:"p-4",children:["",R.min_commission]}),t.jsxs("td",{className:"p-4",children:["",R.max_commission||"No limit"]}),t.jsx("td",{className:"p-4",children:new Date(R.effective_from).toLocaleDateString()}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${R.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:R.is_active?"Active":"Inactive"})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(J,{variant:"outline",size:"sm",onClick:()=>B(R),children:[t.jsx(Ly,{className:"h-4 w-4 mr-1"}),"Edit"]}),t.jsxs(J,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>Q(R),children:[t.jsx(fa,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},R.id))})]})})},ie=()=>z?t.jsx("div",{className:"flex justify-center p-8",children:"Loading commission history..."}):F.length===0?t.jsx("div",{className:"flex justify-center p-8 text-gray-500",children:"No commission history found"}):t.jsxs("div",{className:"space-y-6",children:[$&&t.jsxs(Ee,{children:[t.jsx(It,{children:t.jsx(Mt,{children:"Summary"})}),t.jsx(Pe,{children:t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Bookings"}),t.jsx("p",{className:"text-2xl font-bold",children:$.total_bookings})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),t.jsxs("p",{className:"text-2xl font-bold",children:["",parseFloat($.total_revenue).toLocaleString("en-IN",{maximumFractionDigits:2})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Commission"}),t.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",parseFloat($.total_commission).toLocaleString("en-IN",{maximumFractionDigits:2})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total Provider Payout"}),t.jsxs("p",{className:"text-2xl font-bold",children:["",parseFloat($.total_provider_payout).toLocaleString("en-IN",{maximumFractionDigits:2})]})]})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{className:"text-left p-4",children:"Booking ID"}),t.jsx("th",{className:"text-left p-4",children:"Date"}),t.jsx("th",{className:"text-left p-4",children:"Category"}),t.jsx("th",{className:"text-left p-4",children:"Service"}),t.jsx("th",{className:"text-left p-4",children:"Provider"}),t.jsx("th",{className:"text-left p-4",children:"Service Price"}),t.jsx("th",{className:"text-left p-4",children:"Commission"}),t.jsx("th",{className:"text-left p-4",children:"Provider Payout"}),t.jsx("th",{className:"text-left p-4",children:"Payment Status"}),t.jsx("th",{className:"text-left p-4",children:"Actions"})]})}),t.jsx("tbody",{children:F.map(v=>t.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[t.jsxs("td",{className:"p-4",children:["#",v.booking_id]}),t.jsx("td",{className:"p-4",children:new Date(v.booking_date).toLocaleDateString()}),t.jsx("td",{className:"p-4",children:v.category.name}),t.jsx("td",{className:"p-4",children:v.service.title}),t.jsx("td",{className:"p-4",children:v.provider.name}),t.jsxs("td",{className:"p-4",children:["",parseFloat(v.payment.service_price).toLocaleString("en-IN",{maximumFractionDigits:2})]}),t.jsxs("td",{className:"p-4 text-green-600 font-medium",children:["",parseFloat(v.payment.commission_amount).toLocaleString("en-IN",{maximumFractionDigits:2}),t.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",v.payment.commission_percentage,"%)"]})]}),t.jsxs("td",{className:"p-4",children:["",parseFloat(v.payment.provider_payout).toLocaleString("en-IN",{maximumFractionDigits:2})]}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${v.provider_payment.status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:v.provider_payment.status==="paid"?"Paid":"Unpaid"})}),t.jsx("td",{className:"p-4",children:v.provider_payment.status==="unpaid"?t.jsxs(J,{size:"sm",onClick:()=>O(v.booking_id,"paid"),className:"bg-green-600 hover:bg-green-700 text-white",children:[t.jsx(Os,{className:"h-4 w-4 mr-1"}),"Mark Paid"]}):t.jsxs(J,{size:"sm",variant:"outline",onClick:()=>O(v.booking_id,"unpaid"),className:"text-yellow-600",children:[t.jsx(Sa,{className:"h-4 w-4 mr-1"}),"Mark Unpaid"]})})]},v.booking_id))})]})})]});return t.jsxs(mt,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Commission Management"}),t.jsx("p",{className:"text-gray-600",children:"Manage category commission rates and view commission booking history."})]}),t.jsxs(Ee,{children:[t.jsxs(It,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[t.jsx(Mt,{children:"Commission Settings"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[r==="rates"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative w-64",children:[t.jsx(is,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),t.jsx("input",{type:"text",placeholder:"Search categories...",className:"pl-8 pr-4 py-2 w-full rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/20",value:a,onChange:v=>i(v.target.value)})]}),t.jsxs(J,{onClick:E,children:[t.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Add New"]})]}),r==="history"&&t.jsxs(J,{onClick:I,children:[t.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),t.jsxs(Pe,{children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx(gd,{value:r,onValueChange:v=>n(v),className:"w-full",children:t.jsxs(fd,{className:"grid grid-cols-2 gap-2 p-1 bg-gray-100 rounded-full",children:[t.jsx(un,{value:"rates",className:"data-[state=active]:bg-white data-[state=active]:text-primary data-[state=active]:shadow-sm rounded-full py-2.5",children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(ps,{className:"h-4 w-4"}),t.jsx("span",{children:"Category Rates"})]})}),t.jsx(un,{value:"history",className:"data-[state=active]:bg-white data-[state=active]:text-primary data-[state=active]:shadow-sm rounded-full py-2.5",children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(Hh,{className:"h-4 w-4"}),t.jsx("span",{children:"Commission History"})]})})]})})}),r==="history"&&t.jsxs(Ee,{className:"mb-6",children:[t.jsx(It,{children:t.jsxs(Mt,{className:"flex items-center",children:[t.jsx(Hi,{className:"h-5 w-5 mr-2"}),"Filters"]})}),t.jsx(Pe,{children:t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),t.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",value:q.category_id,onChange:v=>k({...q,category_id:v.target.value}),children:[t.jsx("option",{value:"",children:"All Categories"}),c.map(v=>t.jsx("option",{value:v.id,children:v.name},v.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider ID"}),t.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Provider ID",value:q.provider_id,onChange:v=>k({...q,provider_id:v.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),t.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",value:q.start_date,onChange:v=>k({...q,start_date:v.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),t.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",value:q.end_date,onChange:v=>k({...q,end_date:v.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),t.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",value:q.provider_payment_status,onChange:v=>k({...q,provider_payment_status:v.target.value}),children:[t.jsx("option",{value:"",children:"All"}),t.jsx("option",{value:"paid",children:"Paid"}),t.jsx("option",{value:"unpaid",children:"Unpaid"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsx(J,{onClick:I,className:"w-full",children:"Apply Filters"})})]})})]}),t.jsxs("div",{className:"mt-6",children:[r==="rates"&&ee(),r==="history"&&ie()]})]})]}),f&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold",children:[_==="add"&&"Add Category Commission Rate",_==="edit"&&"Edit Category Commission Rate",_==="delete"&&"Delete Confirmation"]}),t.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(He,{size:20})})]}),_==="delete"?t.jsxs("div",{children:[t.jsxs("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete the commission rate for "',w==null?void 0:w.category_name,'"? This action cannot be undone.']}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx(J,{onClick:()=>g(!1),className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),t.jsx(J,{onClick:W,disabled:y,className:"bg-red-600 hover:bg-red-700 text-white",children:y?"Deleting...":"Delete"})]})]}):t.jsxs("form",{onSubmit:A,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),t.jsxs("select",{required:!0,disabled:_==="edit",value:j.category_id,onChange:v=>C({...j,category_id:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20 disabled:bg-gray-100",children:[t.jsx("option",{value:"",children:"Select Category"}),c.map(v=>t.jsx("option",{value:v.id,children:v.name},v.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commission Percentage (%) *"}),t.jsx("input",{type:"number",required:!0,step:"0.01",min:"0",max:"100",value:j.commission_percentage,onChange:v=>C({...j,commission_percentage:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Commission ()"}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:j.min_commission,onChange:v=>C({...j,min_commission:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Commission ()"}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:j.max_commission,onChange:v=>C({...j,max_commission:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"No limit"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Effective From *"}),t.jsx("input",{type:"date",required:!0,value:j.effective_from,onChange:v=>C({...j,effective_from:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Effective To"}),t.jsx("input",{type:"date",value:j.effective_to,onChange:v=>C({...j,effective_to:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:j.is_active,onChange:v=>C({...j,is_active:v.target.checked}),className:"rounded border-gray-300 text-primary focus:ring-primary"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(J,{type:"button",onClick:()=>g(!1),className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),t.jsx(J,{type:"submit",disabled:y,className:"bg-primary hover:bg-primary/90 text-white",children:y?"Saving...":_==="add"?"Create":"Update"})]})]})]})})]})}const Fj=({showColumnSettings:e,onToggleSettings:s,columnVisibility:r,onToggleColumn:n,onResetColumns:a})=>t.jsxs("div",{className:"relative",children:[t.jsxs(J,{variant:"outline",size:"sm",onClick:s,className:"hover:bg-gray-100",children:[t.jsx(ud,{size:16,className:"mr-2"}),"Columns"]}),e&&t.jsx("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-gray-800",children:"Column Visibility"}),t.jsx(J,{variant:"ghost",size:"sm",onClick:s,className:"h-6 w-6 p-0",children:t.jsx(He,{size:14})})]}),t.jsx("div",{className:"space-y-2",children:Object.entries(r).map(([i,o])=>t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:()=>n(i),disabled:["id","subject","status","actions"].includes(i),className:`rounded border-gray-300 text-primary focus:ring-primary ${["id","subject","status","actions"].includes(i)?"opacity-50":""}`}),t.jsxs("span",{className:`text-sm capitalize ${["id","subject","status","actions"].includes(i)?"font-medium":""}`,children:[i,["id","subject","status","actions"].includes(i)&&" (Required)"]})]},i))}),t.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:t.jsx(J,{variant:"outline",size:"sm",onClick:a,className:"w-full",children:"Reset to Default"})})]})})]}),Bj=({dispute:e,formatDate:s,getStatusColor:r,getPriorityColor:n})=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(St,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:"Dispute Overview"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-purple-600 text-xs",children:"#"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Dispute ID"})]}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["#",e.id]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(bt,{size:16,className:"text-green-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Created Date"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:s(e.created_at)})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(Ot,{size:16,className:"text-orange-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Last Updated"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:s(e.updated_at)})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-4 border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center mr-3",children:t.jsx(Uh,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Subject & Description"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(ps,{size:16,className:"text-blue-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Subject"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:e.subject})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(lr,{size:16,className:"text-green-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Description"})]}),t.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:e.description})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(ft,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-purple-900",children:"Parties Information"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(ft,{size:16,className:"text-purple-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"User"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:e.user_name})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(Ny,{size:16,className:"text-purple-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Provider"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:e.provider_name})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(ps,{size:16,className:"text-purple-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Booking ID"})]}),t.jsxs("p",{className:"text-sm text-gray-800",children:["#",e.booking_id]})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg p-4 border border-emerald-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(qs,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-emerald-900",children:"Status & Priority"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(qs,{size:16,className:"text-emerald-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Status"})]}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r(e.status)}`,children:e.status.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(St,{size:16,className:"text-emerald-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Priority"})]}),t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${n(e.priority)}`,children:e.priority.charAt(0).toUpperCase()+e.priority.slice(1)})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(ps,{size:16,className:"text-emerald-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Type"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:e.dispute_type})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(ft,{size:16,className:"text-emerald-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Assigned To"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:e.assigned_admin||"Unassigned"})]})]})]}),e.resolution_type&&t.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg p-4 border border-amber-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-amber-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(ga,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-amber-900",children:"Resolution Details"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-amber-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(ps,{size:16,className:"text-amber-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Resolution Type"})]}),t.jsx("p",{className:"text-sm text-gray-800 capitalize",children:e.resolution_type.replace("_"," ")})]}),e.resolution_amount&&t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-amber-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(ga,{size:16,className:"text-amber-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Resolution Amount"})]}),t.jsxs("p",{className:"text-sm text-gray-800",children:["$",e.resolution_amount.toFixed(2)]})]}),e.resolution_notes&&t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-amber-100 md:col-span-2",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center mr-2",children:t.jsx(lr,{size:16,className:"text-amber-600"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Resolution Notes"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:e.resolution_notes})]})]})]})]}),Xo={},sr=(Xo==null?void 0:Xo.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",Oj=()=>{var he,We,Ne,Ce,ze;const{addToast:e}=ot(),[s,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(""),[l,c]=p.useState(1),[d,h]=p.useState(null),[u,f]=p.useState(!1),[g,_]=p.useState(null),[b,w]=p.useState({status:"",notes:"",resolution_type:"",resolution_amount:0,resolution_notes:""}),[x,y]=p.useState(!1),[m,j]=p.useState(1),[C,F]=p.useState(!1),[L,$]=p.useState({id:!0,subject:!0,parties:!0,type:!0,priority:!0,status:!0,assigned:!0,created:!0,actions:!0}),[P,z]=p.useState([]),[H,q]=p.useState(""),[k,S]=p.useState(!1),[M,I]=p.useState(""),[O,E]=p.useState(!1),[B,Q]=p.useState(!1),A=p.useRef(null),[W,ee]=p.useState({status:"",priority:"",dispute_type:"",assigned_admin:"",overdue:!1,sort_by:"created_at",sort_order:"desc"}),ie=10,v=p.useCallback((G=!1)=>{const me=localStorage.getItem("blinkcare_token"),ve={};return me&&(ve.Authorization=`Bearer ${me}`),G&&(ve["Content-Type"]="application/json"),ve},[]),R=p.useCallback(async(G,me=!1)=>{var ve;if(G){me||S(!0),I("");try{const ge=await fetch(`${sr}/admin/disputes/${G}/messages`,{headers:v()}),fe=await ge.json();if(!ge.ok||!fe.success){I(fe.message||"Unable to load this conversation.");return}z(fe.messages||[]),E(!!((ve=fe.ticket)!=null&&ve.is_blocked)),fe.ticket&&_(we=>we&&we.id===G?{...we,...fe.ticket}:we)}catch{I("Unable to load this conversation. Please retry.")}finally{me||S(!1)}}},[v]),U=()=>[{id:1,subject:"Service quality not as described",description:"The pet trainer arrived late and did not provide the full service as promised. The training session was cut short and the dog did not learn the basic commands as expected.",status:"open",priority:"high",dispute_type:"service_quality",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-15T10:30:00Z",assigned_admin:null,user_name:"Sarah Johnson",provider_name:"John Smith",booking_id:"101",is_overdue:!1,amount_disputed:2e3,booking:{total_amount:2e3}},{id:2,subject:"Provider did not show up",description:"The service provider did not arrive at the scheduled time. Multiple attempts to contact them were unsuccessful. The booking was for puppy training session.",status:"in_progress",priority:"urgent",dispute_type:"no_show",created_at:"2024-01-16T14:20:00Z",updated_at:"2024-01-16T15:00:00Z",assigned_admin:"Admin User",user_name:"Emily Rodriguez",provider_name:"Sarah Johnson",booking_id:"102",is_overdue:!0,amount_disputed:2500,booking:{total_amount:2500}},{id:3,subject:"Incorrect service provided",description:"Booked for agility training but received basic obedience training instead. The provider did not inform about the change and charged the full amount.",status:"open",priority:"medium",dispute_type:"service_mismatch",created_at:"2024-01-17T09:15:00Z",updated_at:"2024-01-17T09:15:00Z",assigned_admin:null,user_name:"Michael Chen",provider_name:"Mike Williams",booking_id:"103",is_overdue:!1,amount_disputed:3500,booking:{total_amount:3500}},{id:4,subject:"Payment charged twice",description:"The payment for the booking was charged twice. I have receipts for both transactions. Need refund for the duplicate charge.",status:"resolved",priority:"high",dispute_type:"payment_issue",created_at:"2024-01-10T11:00:00Z",updated_at:"2024-01-18T12:00:00Z",assigned_admin:"Admin User",user_name:"David Wilson",provider_name:"Lisa Anderson",booking_id:"104",is_overdue:!1,amount_disputed:1800,resolution_type:"refund",resolution_amount:1800,resolution_notes:"Duplicate payment confirmed. Full refund processed.",booking:{total_amount:1800}},{id:5,subject:"Provider behavior concerns",description:"The provider was unprofessional during the service. Used inappropriate language and was rough with my pet. I want to cancel future bookings and get a refund.",status:"escalated",priority:"urgent",dispute_type:"provider_conduct",created_at:"2024-01-12T16:00:00Z",updated_at:"2024-01-19T10:00:00Z",assigned_admin:"Senior Admin",user_name:"Jennifer Martinez",provider_name:"John Smith",booking_id:"105",is_overdue:!1,amount_disputed:3e3,booking:{total_amount:3e3}},{id:6,subject:"Service cancelled but no refund",description:"The provider cancelled the service at the last minute due to personal reasons. I was promised a refund but it has not been processed yet.",status:"in_progress",priority:"medium",dispute_type:"cancellation_refund",created_at:"2024-01-13T13:00:00Z",updated_at:"2024-01-20T13:30:00Z",assigned_admin:"Admin User",user_name:"Robert Taylor",provider_name:"Sarah Johnson",booking_id:"106",is_overdue:!1,amount_disputed:2200,booking:{total_amount:2200}},{id:7,subject:"Equipment damage claim",description:"The provider claims that my pet damaged their training equipment during the session. However, the equipment was already damaged when they arrived. I have photos as evidence.",status:"open",priority:"low",dispute_type:"damage_claim",created_at:"2024-01-14T10:00:00Z",updated_at:"2024-01-14T10:00:00Z",assigned_admin:null,user_name:"Amanda White",provider_name:"Mike Williams",booking_id:"107",is_overdue:!1,amount_disputed:4e3,booking:{total_amount:4e3}},{id:8,subject:"Incomplete service delivery",description:"The training session was supposed to be 2 hours but only lasted 1 hour. The provider left early without completing all the planned activities.",status:"resolved",priority:"medium",dispute_type:"incomplete_service",created_at:"2024-01-11T14:00:00Z",updated_at:"2024-01-19T15:00:00Z",assigned_admin:"Admin User",user_name:"Christopher Lee",provider_name:"Mike Williams",booking_id:"108",is_overdue:!1,amount_disputed:3200,resolution_type:"partial_refund",resolution_amount:1600,resolution_notes:"Service was incomplete. Partial refund of 50% processed as compensation.",booking:{total_amount:3200}},{id:9,subject:"Booking time mismatch",description:"I booked for morning 9 AM slot but the provider came at 11 AM. This caused inconvenience as I had to reschedule my other appointments.",status:"open",priority:"low",dispute_type:"scheduling_issue",created_at:"2024-01-15T15:30:00Z",updated_at:"2024-01-15T15:30:00Z",assigned_admin:null,user_name:"James Brown",provider_name:"Lisa Anderson",booking_id:"108",is_overdue:!1,amount_disputed:1500,booking:{total_amount:1500}},{id:10,subject:"Refund processing delay",description:"I cancelled my booking 5 days ago and was told I would receive a refund within 3 business days. The refund has not been processed yet.",status:"in_progress",priority:"high",dispute_type:"refund_delay",created_at:"2024-01-16T09:00:00Z",updated_at:"2024-01-20T09:15:00Z",assigned_admin:"Admin User",user_name:"Patricia Davis",provider_name:"John Smith",booking_id:"109",is_overdue:!0,amount_disputed:2800,booking:{total_amount:2800}}];p.useEffect(()=>{K()},[l,W,i]),p.useEffect(()=>{console.log("Selected dispute changed:",g)},[g]),p.useEffect(()=>{if(!u||b.status!=="view"||!g)return;R(g.id,!1);const G=setInterval(()=>{R(g.id,!0)},8e3);return()=>clearInterval(G)},[u,b.status,g==null?void 0:g.id,R]),p.useEffect(()=>{A.current&&A.current.scrollIntoView({behavior:"smooth"})},[P.length,u]),p.useEffect(()=>{u||(z([]),q(""),I(""),E(!1),S(!1))},[u]);const K=async()=>{var ve;const G=localStorage.getItem("blinkcare_token"),me=G&&G.startsWith("mock_token_");if(!G||me){a(!0),setTimeout(()=>{const ge=U();let fe=ge;i&&(fe=ge.filter(Je=>Je.id.toString().includes(i)||Je.subject.toLowerCase().includes(i.toLowerCase())||Je.user_name.toLowerCase().includes(i.toLowerCase())||Je.provider_name.toLowerCase().includes(i.toLowerCase())||Je.booking_id.includes(i)||Je.dispute_type.toLowerCase().includes(i.toLowerCase()))),W.status&&(fe=fe.filter(Je=>Je.status===W.status)),W.priority&&(fe=fe.filter(Je=>Je.priority===W.priority)),W.dispute_type&&(fe=fe.filter(Je=>Je.dispute_type===W.dispute_type)),W.assigned_admin&&(fe=fe.filter(Je=>{var kn;return(kn=Je.assigned_admin)==null?void 0:kn.toLowerCase().includes(W.assigned_admin.toLowerCase())})),W.overdue&&(fe=fe.filter(Je=>Je.is_overdue===!0));const we=(l-1)*ie,Pt=fe.slice(we,we+ie),Ut=Math.ceil(fe.length/ie);r(Pt),j(Ut),a(!1)},500);return}try{a(!0);const ge=new URLSearchParams;ge.append("page",l.toString()),ge.append("limit",ie.toString()),ge.append("search",i),Object.entries(W).forEach(([Pt,Ut])=>{Ut&&ge.append(Pt,Ut.toString())});const we=await(await fetch(`${sr}/admin/disputes?${ge.toString()}`,{headers:v()})).json();we.success&&Array.isArray(we.disputes)?(r(we.disputes),j(((ve=we.pagination)==null?void 0:ve.total_pages)||1)):(console.error("Failed to fetch tickets:",we.message||"Unknown error"),e(we.message||"Failed to load support tickets","error"),r([]),j(1))}catch(ge){console.error("Error fetching tickets:",ge),e("Unable to connect to server. Please check your connection.","error"),r([]),j(1)}finally{a(!1)}},ae=async()=>{if(!g||!H.trim()||B)return;Q(!0),I("");const G=localStorage.getItem("blinkcare_user");let me;if(G)try{const ve=JSON.parse(G);me=ve==null?void 0:ve.id}catch{me=void 0}try{const ve=await fetch(`${sr}/admin/disputes/${g.id}/messages`,{method:"POST",headers:v(!0),body:JSON.stringify({message:H.trim(),admin_id:me})}),ge=await ve.json();if(!ve.ok||!ge.success){I(ge.message||"Unable to send message.");return}q(""),ge.message?z(fe=>[...fe,ge.message]):R(g.id,!0),ge.ticket&&(_(fe=>fe&&fe.id===ge.ticket.id?{...fe,...ge.ticket}:fe),E(!!ge.ticket.is_blocked))}catch{I("Unable to send message. Please retry.")}finally{Q(!1)}},ce=async()=>{var fe;if(!g)return;const G=!O;let me=g.blocked_reason||"Blocked by admin";if(G){const we=window.prompt("Why are you blocking this user?",me);we!==null&&(me=we||me)}else me=void 0;S(!0),I("");const ve=localStorage.getItem("blinkcare_user");let ge;if(ve)try{ge=(fe=JSON.parse(ve))==null?void 0:fe.id}catch{ge=void 0}try{const we=await fetch(`${sr}/admin/disputes/${g.id}/block`,{method:"POST",headers:v(!0),body:JSON.stringify({is_blocked:G,reason:me,admin_id:ge})}),Pt=await we.json();if(!we.ok||!Pt.success){I(Pt.message||"Unable to update block status.");return}E(G),Pt.ticket&&_(Ut=>Ut&&Ut.id===Pt.ticket.id?{...Ut,...Pt.ticket}:Ut)}catch{I("Unable to update block status. Please retry.")}finally{S(!1)}},T=(G,me)=>{console.log("Opening modal for dispute:",G),_(G),w({status:me,notes:"",resolution_type:"",resolution_amount:0,resolution_notes:""}),z([]),q(""),I(""),E(!!G.is_blocked),f(!0),R(G.id)},D=async G=>{if(G.preventDefault(),!!g){y(!0);try{let me;b.status==="resolve"?me=`${sr}/admin/disputes/${g.id}/resolve`:b.status==="escalate"?me=`${sr}/admin/disputes/${g.id}/escalate`:me=`${sr}/admin/disputes/${g.id}/status`;let ve;b.status==="escalate"?ve={reason:b.notes,escalate_to_admin:1}:ve=b;const fe=await(await fetch(me,{method:"POST",headers:v(!0),body:JSON.stringify(ve)})).json();fe.success?(e(`Dispute ${b.status}ed successfully`,"success"),f(!1),K()):e(fe.message||`Failed to ${b.status} dispute`,"error")}catch(me){console.error("Error processing dispute:",me),e("Error processing dispute","error")}finally{y(!1)}}},V=G=>new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),te=G=>{try{return new Date(G).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch{return""}},se=G=>{switch(G){case"resolved":return"bg-green-100 text-green-700";case"closed":return"bg-gray-100 text-gray-700";case"pending":return"bg-yellow-100 text-yellow-700";case"in_progress":return"bg-blue-100 text-blue-700";case"escalated":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},xe=G=>{switch(G){case"urgent":return"bg-red-100 text-red-700";case"high":return"bg-orange-100 text-orange-700";case"medium":return"bg-yellow-100 text-yellow-700";case"low":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},de=G=>{["id","subject","status","actions"].includes(G)||$(me=>({...me,[G]:!me[G]}))},Y=()=>{$({id:!0,subject:!0,parties:!0,type:!0,priority:!0,status:!0,assigned:!0,created:!0,actions:!0})},Se=G=>{h(d===G?null:G)};return t.jsxs("div",{children:[n?t.jsx(Xr,{}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-end space-x-3 mb-4",children:[t.jsx(Fj,{showColumnSettings:C,onToggleSettings:()=>F(!C),columnVisibility:L,onToggleColumn:de,onResetColumns:Y}),t.jsx(ix,{searchTerm:i,onSearchChange:o}),t.jsxs(J,{onClick:K,className:"flex items-center space-x-1",children:[t.jsx(Vi,{size:14}),t.jsx("span",{children:"Refresh"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b bg-gray-50",children:[t.jsx("th",{className:"w-12 px-4 py-3"}),L.id&&t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-32",children:"ID"}),L.subject&&t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 min-w-[250px]",children:"Subject"}),L.parties&&t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 min-w-[180px]",children:"Parties"}),L.type&&t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-36",children:"Type"}),L.priority&&t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-28",children:"Priority"}),L.status&&t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-32",children:"Status"}),L.assigned&&t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-36",children:"Assigned To"}),L.created&&t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 w-44",children:"Created"}),L.actions&&t.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-700 min-w-[280px]",children:"Actions"})]})}),t.jsx("tbody",{children:n?t.jsx("tr",{children:t.jsx("td",{colSpan:Object.values(L).filter(Boolean).length+1,className:"py-12 text-center",children:t.jsxs("div",{className:"flex flex-col items-center justify-center",children:[t.jsx(rs,{className:"w-8 h-8 animate-spin text-gray-400 mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Loading support tickets..."})]})})}):s.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:Object.values(L).filter(Boolean).length+1,className:"py-12 text-center",children:t.jsxs("div",{className:"flex flex-col items-center justify-center",children:[t.jsx(lr,{className:"w-12 h-12 text-gray-300 mb-3"}),t.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"No support tickets found"}),t.jsx("p",{className:"text-xs text-gray-500",children:"When users contact support, their tickets will appear here."})]})})}):s.map(G=>t.jsxs(Tt.Fragment,{children:[t.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[t.jsx("td",{className:"px-4 py-4",children:t.jsx(J,{variant:"ghost",size:"sm",onClick:()=>Se(G.id),className:"p-1 hover:bg-gray-200",children:d===G.id?t.jsx(ka,{size:16,className:"text-gray-600"}):t.jsx(jr,{size:16,className:"text-gray-600"})})}),L.id&&t.jsxs("td",{className:"px-4 py-4",children:[t.jsxs("div",{className:"font-semibold text-gray-900 text-sm",children:["Ticket #",G.id]}),G.is_overdue&&t.jsxs("div",{className:"text-xs text-red-600 flex items-center mt-1.5 font-medium",children:[t.jsx(Ot,{size:12,className:"mr-1"}),"Overdue"]}),G.last_message_at&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last: ",V(G.last_message_at)]})]}),L.subject&&t.jsxs("td",{className:"px-4 py-4",children:[t.jsx("div",{className:"font-medium text-gray-900 mb-1",children:G.subject}),G.last_message_preview&&t.jsx("div",{className:"text-xs text-gray-600 line-clamp-1 max-w-sm",children:G.last_message_preview}),G.is_blocked&&t.jsx("div",{className:"text-xs text-red-600 font-semibold mt-1.5 flex items-center",children:" User blocked"}),G.booking_id&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Booking: #",G.booking_id]})]}),L.parties&&t.jsxs("td",{className:"px-4 py-4",children:[t.jsxs("div",{className:"text-sm text-gray-900 mb-1",children:[t.jsx("span",{className:"font-medium",children:"User:"})," ",G.user_name]}),t.jsxs("div",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-medium",children:"Provider:"})," ",G.provider_name]})]}),L.type&&t.jsx("td",{className:"px-4 py-4",children:t.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 whitespace-nowrap",children:G.dispute_type})}),L.priority&&t.jsx("td",{className:"px-4 py-4",children:t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${xe(G.priority)}`,children:G.priority.charAt(0).toUpperCase()+G.priority.slice(1)})}),L.status&&t.jsx("td",{className:"px-4 py-4",children:t.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${se(G.status)}`,children:G.status.split("_").map(me=>me.charAt(0).toUpperCase()+me.slice(1)).join(" ")})}),L.assigned&&t.jsx("td",{className:"px-4 py-4",children:t.jsx("div",{className:"text-sm text-gray-700",children:G.assigned_admin||t.jsx("span",{className:"text-gray-400 italic",children:"Unassigned"})})}),L.created&&t.jsx("td",{className:"px-4 py-4",children:t.jsx("div",{className:"text-sm text-gray-700 whitespace-nowrap",children:V(G.created_at)})}),L.actions&&t.jsx("td",{className:"px-4 py-4",children:t.jsxs(J,{onClick:()=>T(G,"view"),size:"sm",className:"flex items-center gap-2 bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-lg shadow-sm",children:[t.jsx(lr,{size:16}),t.jsx("span",{children:"Chat"})]})})]}),d===G.id&&t.jsx("tr",{children:t.jsx("td",{colSpan:Object.values(L).filter(Boolean).length+1,className:"bg-gradient-to-r from-gray-50 to-blue-50/30 border-l-4 border-primary/20",children:t.jsx("div",{className:"p-6",children:t.jsx(Bj,{dispute:G,formatDate:V,getStatusColor:se,getPriorityColor:xe})})})})]},G.id))})]})}),m>1&&t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",l," of ",m]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(J,{onClick:()=>c(G=>Math.max(G-1,1)),disabled:l===1,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(fr,{size:16})}),t.jsx(J,{onClick:()=>c(G=>Math.min(G+1,m)),disabled:l===m,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(ns,{size:16})})]})]})]}),u&&g&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold",children:[b.status==="resolve"?"Resolve":b.status==="escalate"?"Escalate":b.status==="in_progress"?"Start Processing":"View"," Dispute"]}),t.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(He,{size:20})})]}),b.status==="view"&&g?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Ticket ID"}),t.jsxs("p",{className:"text-sm text-gray-900",children:["#",g.id]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Subject"}),t.jsx("p",{className:"text-sm text-gray-900",children:g.subject})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Booking / Order"}),t.jsxs("p",{className:"text-sm text-gray-900",children:["#",g.booking_id||g.order_id||""]})]}),g.last_message_preview&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Last Message Preview"}),t.jsx("p",{className:"text-sm text-gray-900",children:g.last_message_preview})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"User"}),t.jsx("p",{className:"text-sm text-gray-900",children:g.user_name})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Provider"}),t.jsx("p",{className:"text-sm text-gray-900",children:g.provider_name})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Type"}),t.jsx("p",{className:"text-sm text-gray-900",children:g.dispute_type})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Priority"}),t.jsx("p",{className:"text-sm text-gray-900 capitalize",children:g.priority})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Status"}),t.jsx("p",{className:"text-sm text-gray-900 capitalize",children:g.status?g.status.replace("_"," "):""})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Description"}),t.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:g.description})]})]}),t.jsxs("div",{className:"flex flex-col bg-gray-50 rounded-xl p-4 h-[600px]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[t.jsx(lr,{size:18}),t.jsxs("div",{children:[t.jsxs("span",{className:"font-semibold text-sm",children:["Support Thread with ",g.user_name]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Ticket #",g.id]})]})]}),g.last_message_at&&t.jsxs("span",{className:"text-xs text-gray-500",children:["Last: ",V(g.last_message_at)]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2 mb-3 min-h-0",children:[k?t.jsxs("div",{className:"flex items-center justify-center h-full text-sm text-gray-500",children:[t.jsx(rs,{className:"w-4 h-4 animate-spin mr-2"}),"Loading conversation"]}):P.length?t.jsx("div",{className:"space-y-3",children:P.map(G=>{const me=G.sender_role==="admin";return t.jsx("div",{className:`flex ${me?"justify-start":"justify-end"}`,children:t.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-3 text-sm shadow-sm ${me?"bg-white text-gray-800 border border-gray-200 rounded-tl-sm":"bg-orange-500 text-white rounded-tr-sm"}`,children:[t.jsx("p",{className:"whitespace-pre-wrap break-words",children:G.message}),t.jsxs("span",{className:`text-[11px] block mt-1.5 ${me?"text-gray-500":"text-orange-100"}`,children:[me?"You":g.user_name,"  ",te(G.created_at)]})]})},G.id)})}):t.jsxs("div",{className:"text-sm text-gray-500 text-center py-10",children:[t.jsx(lr,{size:24,className:"mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"No messages in this thread yet."}),t.jsx("p",{className:"text-xs mt-1",children:"Start the conversation below."})]}),t.jsx("div",{ref:A})]}),M&&t.jsx("p",{className:"text-sm text-red-600 mb-2 flex-shrink-0",children:M}),t.jsxs("div",{className:"flex-shrink-0 space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:O?"User is blocked from replying":"Type a reply",value:H,onChange:G=>q(G.target.value),onKeyDown:G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),ae())},disabled:B||O}),t.jsxs(J,{type:"button",onClick:ae,disabled:!H.trim()||B||O,className:"bg-cyan-500 hover:bg-cyan-600 text-white flex items-center space-x-1 px-4",children:[B?t.jsx(rs,{className:"w-4 h-4 animate-spin"}):t.jsx(My,{size:14}),t.jsx("span",{children:"Send"})]})]}),t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsxs(J,{type:"button",onClick:ce,className:`flex items-center space-x-2 ${O?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} text-white`,children:[t.jsx(fy,{size:14}),t.jsx("span",{children:O?"Unblock user":"Block user"})]}),O&&g.blocked_reason&&t.jsx("p",{className:"text-xs text-gray-500 max-w-md truncate",children:g.blocked_reason})]})]})]})]}),t.jsx("div",{className:"flex justify-end pt-4 border-t mt-4",children:t.jsx(J,{type:"button",onClick:()=>f(!1),className:"bg-gray-200 text-gray-700 hover:bg-gray-300 px-6",children:"Close"})})]}):t.jsxs("form",{onSubmit:D,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),t.jsx("div",{className:"text-sm text-gray-900",children:g==null?void 0:g.subject})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking ID"}),t.jsxs("div",{className:"text-sm text-gray-900",children:["#",g==null?void 0:g.booking_id]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User"}),t.jsx("div",{className:"text-sm text-gray-900",children:g==null?void 0:g.user_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider"}),t.jsx("div",{className:"text-sm text-gray-900",children:g==null?void 0:g.provider_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),t.jsx("div",{className:"text-sm text-gray-900",children:g==null?void 0:g.dispute_type})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),t.jsx("div",{className:"text-sm text-gray-900 capitalize",children:g==null?void 0:g.priority})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),t.jsx("div",{className:"text-sm text-gray-900 capitalize",children:g!=null&&g.status?g.status.replace("_"," "):""})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned To"}),t.jsx("div",{className:"text-sm text-gray-900",children:(g==null?void 0:g.assigned_admin)||"Unassigned"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("div",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:g==null?void 0:g.description})]}),b.status==="resolve"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resolution Type *"}),t.jsxs("select",{required:!0,value:b.resolution_type,onChange:G=>{var fe;const me=G.target.value,ve={...b,resolution_type:me},ge=((fe=g==null?void 0:g.booking)==null?void 0:fe.total_amount)||(g==null?void 0:g.amount_disputed);me==="refund"&&ge?ve.resolution_amount=ge:me==="partial_refund"&&ge?ve.resolution_amount=ge/2:me!=null&&me.includes("refund")||(ve.resolution_amount=0),w(ve)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",children:[t.jsx("option",{value:"",children:"Select resolution type"}),t.jsx("option",{value:"refund",children:"Refund"}),t.jsx("option",{value:"partial_refund",children:"Partial Refund"}),t.jsx("option",{value:"reschedule",children:"Reschedule"}),t.jsx("option",{value:"warning",children:"Warning"}),t.jsx("option",{value:"account_action",children:"Account Action"}),t.jsx("option",{value:"no_action",children:"No Action"}),t.jsx("option",{value:"compensation",children:"Compensation"}),t.jsx("option",{value:"apology",children:"Apology"})]})]}),((he=b.resolution_type)==null?void 0:he.includes("refund"))&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resolution Amount *"}),(((We=g==null?void 0:g.booking)==null?void 0:We.total_amount)||(g==null?void 0:g.amount_disputed))&&t.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Total booking amount: ",(Ce=((Ne=g==null?void 0:g.booking)==null?void 0:Ne.total_amount)||(g==null?void 0:g.amount_disputed))==null?void 0:Ce.toFixed(2)]}),t.jsx("input",{type:"number",required:!0,value:b.resolution_amount,onChange:G=>w({...b,resolution_amount:parseFloat(G.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter amount",max:((ze=g==null?void 0:g.booking)==null?void 0:ze.total_amount)||(g==null?void 0:g.amount_disputed)||void 0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes *"}),t.jsx("textarea",{required:!0,value:b.notes,onChange:G=>w({...b,notes:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:`Enter notes for ${b.status}...`})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(J,{type:"button",onClick:()=>f(!1),className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),t.jsx(J,{type:"submit",disabled:x,className:`${b.status==="resolve"?"bg-green-600 hover:bg-green-700":b.status==="escalate"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white`,children:x?"Processing...":b.status==="resolve"?"Resolve":b.status==="escalate"?"Escalate":b.status==="in_progress"?"Start Processing":"Submit"})]})]})]})})]})},Uj=()=>t.jsxs(mt,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Support Tickets & Threads"}),t.jsx("p",{className:"text-gray-600",children:"Manage support conversations and resolve user issues through ticket threads."})]}),t.jsxs(Ee,{children:[t.jsx(It,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:t.jsx(Mt,{children:"All Support Tickets"})}),t.jsx(Pe,{children:t.jsx(Oj,{})})]})]}),el={},Hj=(el==null?void 0:el.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",Za=e=>{if(!e)return"N/A";try{const[s,r]=e.split(":"),n=parseInt(s,10),a=parseInt(r,10),i=n===0?12:n>12?n-12:n,o=n>=12?"PM":"AM",l=a.toString().padStart(2,"0");return`${i}:${l} ${o}`}catch{return e}},Vj=()=>{var vd;const{addToast:e}=ot(),[s,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(1),[l,c]=p.useState(null),[d,h]=p.useState(!1),[u,f]=p.useState(null),[g,_]=p.useState({status:"",notes:""}),[b,w]=p.useState(!1),[x,y]=p.useState(1),[m,j]=p.useState({}),[C,F]=p.useState({}),[L,$]=p.useState(!1),[P,z]=p.useState(null),[H,q]=p.useState({id:!0,date:!0,service:!0,parties:!0,location:!0,amount:!0,status:!0,payment:!0,priority:!0,assigned:!0,actions:!0}),[k,S]=p.useState({status:"",payment_status:"",priority:"",date_from:"",date_to:"",city:"",assigned_provider:"",overdue:!1,sort_by:"created_at",sort_order:"desc"}),[M,I]=p.useState(!1),[O,E]=p.useState(!1),[B,Q]=p.useState(null),[A,W]=p.useState([]),[ee,ie]=p.useState(!1),[v,R]=p.useState(null),[U,K]=p.useState(!1),[ae,ce]=p.useState("bookings"),[T,D]=p.useState([]),[V,te]=p.useState(!1),[se,xe]=p.useState(1),[de,Y]=p.useState(1),[Se,he]=p.useState(null),We=10,Ne=Hj;p.useEffect(()=>{we()},[i,k]);const Ce=async()=>{const N=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(N){te(!0);try{const re=new URLSearchParams;re.append("page",se.toString()),re.append("limit","20");const pe=await fetch(`${Ne}/admin/subscriptions?${re.toString()}`,{headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"}});if(!pe.ok)throw new Error("Failed to fetch subscriptions");const _e=await pe.json();D(_e.data||[]);const De=_e.pagination||{};Y(De.total_pages||1)}catch(re){console.error(re),e("Failed to load subscriptions","error"),D([])}finally{te(!1)}}};p.useEffect(()=>{ae==="subscriptions"&&Ce()},[ae,se]);const ze=N=>{var pe,_e,De,lt,ue;const re=[N.total_amount,N.payment_amount,N.service_price_discounted,N.service_price_original,N.amount,N.price,(pe=N.subcategory)==null?void 0:pe.price,(_e=N.subcategory)==null?void 0:_e.amount,(De=N.service)==null?void 0:De.price_discounted,(lt=N.service)==null?void 0:lt.price_original,(ue=N.service)==null?void 0:ue.price];for(const ct of re)if(!(ct==null||ct===""||ct==="0"||ct===0)){if(typeof ct=="number"){if(Number.isFinite(ct))return ct}else if(typeof ct=="string"){const Sn=parseFloat(ct.replace(/[,\s]/g,""));if(!isNaN(Sn))return Sn}}return 0},G=N=>{var re,pe;return N.assigned_provider_name||N.assigned_provider||((re=N.provider)==null?void 0:re.full_name)||((pe=N.provider)==null?void 0:pe.name)||(N.provider_id?`Provider #${N.provider_id}`:null)},me=N=>{var re,pe,_e,De,lt;return N.service_title||((re=N.service)==null?void 0:re.service_name)||((pe=N.service)==null?void 0:pe.title)||N.service_name||((_e=N.subcategory)==null?void 0:_e.service_name)||((De=N.subcategory)==null?void 0:De.name)||((lt=N.category)==null?void 0:lt.name)||"Unknown Service"},ve=async N=>{const re=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(re){F(pe=>({...pe,[N]:!0}));try{const pe=await fetch(`${Ne}/admin/booking/session-history/${N}`,{headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"}});if(pe.ok){const _e=await pe.json();j(De=>({...De,[N]:_e.sessions||[]}))}}catch(pe){console.error("Failed to load session history:",pe),e("Failed to load session history","error")}finally{F(pe=>({...pe,[N]:!1}))}}},ge=async N=>{const re=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(re)try{if((await fetch(`${Ne}/admin/booking/approve-completion/${N}`,{method:"POST",headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"},body:JSON.stringify({admin_username:"Admin"})})).ok)e("Booking completion approved","success"),await we();else throw new Error("Failed to approve")}catch{e("Failed to approve completion","error")}},fe=async(N,re)=>{const pe=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(pe)try{if((await fetch(`${Ne}/admin/booking/reject-completion/${N}`,{method:"POST",headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"},body:JSON.stringify({rejection_reason:re,admin_username:"Admin"})})).ok)e("Booking completion rejected","success"),await we();else throw new Error("Failed to reject")}catch{e("Failed to reject completion","error")}},we=async()=>{const N=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(!N){e("Please login to view bookings","error"),a(!1);return}try{a(!0);const re=new URLSearchParams;re.append("page",i.toString()),re.append("limit",We.toString()),Object.entries(k).forEach(([lt,ue])=>{ue&&re.append(lt,ue.toString())});const pe=await fetch(`${Ne}/admin/appointments?${re.toString()}`,{headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"}});if(!pe.ok){if(pe.status===401){e("Authentication failed. Please log in again.","error");return}throw new Error(`HTTP error! status: ${pe.status}`)}const _e=await pe.json(),De=_e.data||_e.bookings||[];if(Array.isArray(De)){const lt=De.map(ue=>{var ct,Sn,jd,bd,Nd,wd,_d,kd,Sd;return{id:ue.id,booking_date:ue.preferred_date||ue.booking_date,booking_time:ue.preferred_time||ue.booking_time,status:ue.status,payment_status:ue.payment_status||"pending",priority:ue.priority||"normal",total_amount:ze(ue),service_address:ue.service_address||ue.address||"N/A",pincode:ue.pincode||"N/A",city:ue.city||"N/A",contact_person:ue.contact_person||((ct=ue.user)==null?void 0:ct.name)||"N/A",contact_phone:ue.contact_phone||((Sn=ue.user)==null?void 0:Sn.phone)||"N/A",created_at:ue.created_at||"",updated_at:ue.updated_at||"",assigned_provider:G(ue),user_name:((jd=ue.user)==null?void 0:jd.name)||`User #${ue.user_id||"N/A"}`,provider_name:((bd=ue.provider)==null?void 0:bd.name)||`Provider #${ue.provider_id||"N/A"}`,service_name:me(ue),service_description:((Nd=ue.service)==null?void 0:Nd.description)||((wd=ue.subcategory)==null?void 0:wd.description)||ue.description||"",category_id:ue.category_id||((_d=ue.service)==null?void 0:_d.category_id)||((kd=ue.subcategory)==null?void 0:kd.category_id),subcategory_id:ue.subcategory_id||((Sd=ue.service)==null?void 0:Sd.subcategory_id),is_overdue:ue.is_overdue||!1,admin_notes:ue.admin_notes,cancellation_reason:ue.cancellation_reason,refund_amount:ue.refund_amount,user_id:ue.user_id,provider_id:ue.provider_id,slot_type:ue.slot_type,total_sessions:ue.total_sessions,completed_sessions:ue.completed_sessions,admin_approval_status:ue.admin_approval_status,admin_rejection_reason:ue.admin_rejection_reason,subscription_id:ue.subscription_id??null}});if(r(lt),_e.pagination){const ue=_e.pagination.total||lt.length,ct=_e.pagination.page_size||We;y(Math.ceil(ue/ct))}else y(1)}else console.error("Failed to fetch bookings: Invalid response format"),e("Failed to fetch bookings: Invalid response format","error"),r([]),y(1)}catch(re){console.error("Error fetching bookings:",re);const pe=re instanceof Error?re.message:"Failed to fetch bookings";e(pe,"error"),r([]),y(1)}finally{a(!1)}},Pt=(N,re)=>{c(l===N.id?null:N.id)},Ut=async N=>{if(N.preventDefault(),!!u){w(!0);try{let re="",pe={};switch(g.status){case"confirm":re=`${Ne}/admin/bookings/${u.id}/status`,pe={status:"confirmed",notes:g.notes,reason:"Admin confirmed booking"};break;case"cancel":re=`${Ne}/admin/bookings/${u.id}/cancel`,pe={reason:g.reason||"Cancelled by admin",refund_amount:g.refund_amount||0,notes:g.notes};break;case"assign":re=`${Ne}/admin/bookings/${u.id}/assign`,pe={provider_id:g.provider_id,notes:g.notes};break;case"start":re=`${Ne}/admin/bookings/${u.id}/status`,pe={status:"in_progress",notes:g.notes,reason:"Admin started the service"};break;case"complete":re=`${Ne}/admin/bookings/${u.id}/status`,pe={status:"completed",notes:g.notes,reason:"Admin marked as completed"};break;default:throw new Error(`Unknown action: ${g.status}`)}const De=await(await fetch(re,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("blinkcare_token")}`,"Content-Type":"application/json"},body:JSON.stringify(pe)})).json();if(De.success){const lt=De.message||`Booking ${g.status}ed successfully`;e(lt,"success"),h(!1),we()}else e(De.message||`Failed to ${g.status} booking`,"error")}catch(re){console.error("Error processing booking:",re),e("Error processing booking","error")}finally{w(!1)}}},Je=N=>{switch(N){case"completed":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"confirmed":case"accepted":return"bg-blue-100 text-blue-700";case"in_progress":return"bg-purple-100 text-purple-700";case"cancelled":return"bg-red-100 text-red-700";case"awaiting_payment":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},kn=N=>{switch(N){case"paid":return"bg-green-100 text-green-700";case"refunded":return"bg-blue-100 text-blue-700";case"pending":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}},yd=N=>{switch(N){case"urgent":return"bg-red-100 text-red-700";case"high":return"bg-orange-100 text-orange-700";case"normal":return"bg-blue-100 text-blue-700";case"low":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},cx=N=>{["id","date","status","actions"].includes(N)||q(re=>({...re,[N]:!re[N]}))},dx=()=>{q({id:!0,date:!0,service:!0,parties:!0,location:!0,amount:!0,status:!0,payment:!0,priority:!0,assigned:!0,actions:!0})},ux=async N=>{var pe;const re=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(!re){e("Please login","error");return}he(N.id);try{const _e=await fetch(`${Ne}/admin/bookings/${N.id}/convert-to-subscription`,{method:"POST",headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"}}),De=await _e.json();if(!_e.ok){e(((pe=De==null?void 0:De.error)==null?void 0:pe.message)||"Failed to convert to subscription","error");return}e("Booking converted to subscription","success"),c(null),we(),ae==="subscriptions"&&Ce()}catch{e("Failed to convert to subscription","error")}finally{he(null)}},mx=async N=>{Q(N),E(!0),ie(!0),W([]),R(null);try{const re=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(!re){e("Please login to assign provider","error");return}const pe=await fetch(`${Ne}/admin/bookings/${N.id}/available-providers`,{headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"}});if(!pe.ok)throw new Error(`Failed to fetch providers: ${pe.status}`);const _e=await pe.json();W(_e.providers||[])}catch(re){console.error("Error fetching available providers:",re),e("Failed to fetch available providers","error")}finally{ie(!1)}},px=async()=>{var N;if(!B||!v){e("Please select a provider","error");return}K(!0);try{const re=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(!re){e("Please login to assign provider","error");return}const pe=await fetch(`${Ne}/admin/bookings/${B.id}/assign-provider`,{method:"PUT",headers:{Authorization:`Bearer ${re}`,"Content-Type":"application/json"},body:JSON.stringify({provider_id:v,admin_name:"Admin"})}),_e=await pe.json();if(pe.ok)e("Provider assigned successfully","success"),E(!1),Q(null),R(null),we();else throw new Error(_e.message||((N=_e.error)==null?void 0:N.message)||"Failed to assign provider")}catch(re){console.error("Error assigning provider:",re);const pe=re instanceof Error?re.message:"Failed to assign provider";e(pe,"error")}finally{K(!1)}};return t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{className:"flex rounded-lg border border-gray-200 p-0.5 bg-gray-50",children:[t.jsx("button",{type:"button",onClick:()=>ce("bookings"),className:`px-4 py-2 text-sm font-medium rounded-md ${ae==="bookings"?"bg-white text-gray-900 shadow":"text-gray-600 hover:text-gray-900"}`,children:"Bookings"}),t.jsxs("button",{type:"button",onClick:()=>ce("subscriptions"),className:`px-4 py-2 text-sm font-medium rounded-md flex items-center gap-1 ${ae==="subscriptions"?"bg-white text-gray-900 shadow":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(Vo,{size:14}),"Subscriptions"]})]})}),ae==="subscriptions"&&t.jsx(t.Fragment,{children:V?t.jsx(Xr,{}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex justify-end mb-4",children:t.jsxs(J,{onClick:Ce,className:"flex items-center gap-1",children:[t.jsx(Vi,{size:14}),"Refresh"]})}),t.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{className:"border-b border-gray-200",children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Service"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Next Billing"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Provider"})]})}),t.jsx("tbody",{children:T.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No subscriptions found"})}):T.map(N=>t.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[t.jsxs("td",{className:"px-4 py-3 font-medium",children:["#",N.id]}),t.jsx("td",{className:"px-4 py-3 text-sm",children:N.user_full_name||`User #${N.user_id}`}),t.jsx("td",{className:"px-4 py-3 text-sm",children:N.service_title||""}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N.status==="active"?"bg-green-100 text-green-700":N.status==="cancelled"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:N.status})}),t.jsxs("td",{className:"px-4 py-3 text-sm",children:["",Number(N.amount_per_cycle||0).toFixed(2),"/mo"]}),t.jsx("td",{className:"px-4 py-3 text-sm",children:N.next_billing_at?new Date(N.next_billing_at).toLocaleDateString():""}),t.jsx("td",{className:"px-4 py-3 text-sm",children:N.provider_full_name||"Unassigned"})]},N.id))})]})}),de>1&&t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.jsx(J,{variant:"outline",size:"sm",disabled:se<=1,onClick:()=>xe(N=>Math.max(1,N-1)),children:t.jsx(fr,{size:14})}),t.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",se," of ",de]}),t.jsx(J,{variant:"outline",size:"sm",disabled:se>=de,onClick:()=>xe(N=>N+1),children:t.jsx(ns,{size:14})})]})]})}),ae==="bookings"&&t.jsxs(t.Fragment,{children:[n?t.jsx(Xr,{}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex items-center justify-end mb-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs(J,{onClick:()=>I(!M),variant:"outline",className:"flex items-center space-x-1",children:[t.jsx(Wu,{size:14}),t.jsx("span",{children:"Columns"})]}),t.jsxs(J,{onClick:we,className:"flex items-center space-x-1",children:[t.jsx(Vi,{size:14}),t.jsx("span",{children:"Refresh"})]})]})}),M&&t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Column Visibility"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(J,{onClick:dx,variant:"outline",size:"sm",className:"text-xs",children:"Reset All"}),t.jsx(J,{onClick:()=>I(!1),variant:"ghost",size:"sm",className:"text-xs",children:t.jsx(He,{size:14})})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Object.entries(H).map(([N,re])=>t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:re,onChange:()=>cx(N),disabled:["id","date","status","actions"].includes(N),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50"}),t.jsx("span",{className:`text-sm ${["id","date","status","actions"].includes(N)?"text-gray-500":"text-gray-700"}`,children:N.charAt(0).toUpperCase()+N.slice(1).replace("_"," ")})]},N))})]}),t.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-gray-200 shadow-sm",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{className:"border-b border-gray-200",children:[t.jsx("th",{className:"w-10 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}),H.id&&t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),H.date&&t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),H.service&&t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),H.parties&&t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parties"}),H.location&&t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),H.amount&&t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),H.status&&t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),H.payment&&t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),H.priority&&t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),H.assigned&&t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),H.actions&&t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{children:s.map(N=>t.jsxs(Tt.Fragment,{children:[t.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors duration-150",children:[t.jsx("td",{className:"px-4 py-4",children:t.jsx(J,{variant:"ghost",size:"sm",onClick:()=>Pt(N),className:"p-1 hover:bg-gray-100 rounded",children:l===N.id?t.jsx(ka,{size:16,className:"text-gray-500"}):t.jsx(jr,{size:16,className:"text-gray-500"})})}),H.id&&t.jsxs("td",{className:"px-4 py-4",children:[t.jsxs("div",{className:"font-medium text-gray-900",children:["#",N.id]}),N.subscription_id&&t.jsxs("span",{className:"inline-flex items-center gap-0.5 mt-1 px-1.5 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-800",children:[t.jsx(Vo,{size:10}),"Subscription"]}),N.is_overdue&&t.jsxs("div",{className:"text-xs text-red-600 flex items-center mt-1",children:[t.jsx(Ot,{size:12,className:"mr-1"}),"Overdue"]})]}),H.date&&t.jsxs("td",{className:"px-4 py-4",children:[t.jsx("div",{className:"font-medium text-gray-900",children:N.booking_date?new Date(N.booking_date).toLocaleDateString():"N/A"}),t.jsx("div",{className:"text-sm text-gray-500",children:N.booking_time?Za(N.booking_time):"N/A"})]}),H.service&&t.jsx("td",{className:"px-4 py-4",children:t.jsx("div",{className:"font-medium text-gray-900",children:N.service_name})}),H.parties&&t.jsxs("td",{className:"px-4 py-4",children:[t.jsxs("div",{className:"text-sm text-gray-900",children:["User: ",N.user_name]}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Provider: ",N.provider_name]})]}),H.location&&t.jsxs("td",{className:"px-4 py-4",children:[t.jsx("div",{className:"text-sm text-gray-900",children:N.service_address}),t.jsxs("div",{className:"text-sm text-gray-500",children:[N.city," - ",N.pincode]})]}),H.amount&&t.jsx("td",{className:"px-4 py-4",children:t.jsxs("div",{className:"font-medium text-gray-900",children:["",N.total_amount.toFixed(2)]})}),H.status&&t.jsx("td",{className:"px-4 py-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Je(N.status)}`,children:N.status.split("_").map(re=>re.charAt(0).toUpperCase()+re.slice(1)).join(" ")})}),H.payment&&t.jsx("td",{className:"px-4 py-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${kn(N.payment_status)}`,children:N.payment_status.charAt(0).toUpperCase()+N.payment_status.slice(1)})}),H.priority&&t.jsx("td",{className:"px-4 py-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${yd(N.priority)}`,children:N.priority.charAt(0).toUpperCase()+N.priority.slice(1)})}),H.assigned&&t.jsx("td",{className:"px-4 py-4",children:t.jsx("div",{className:"text-sm text-gray-600",children:N.assigned_provider||"Unassigned"})}),H.actions&&t.jsx("td",{className:"px-4 py-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(J,{onClick:()=>Pt(N),variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900",children:t.jsx(jn,{size:16})}),N.slot_type&&N.total_sessions&&t.jsx(J,{onClick:()=>{z(N),$(!0)},variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-900",title:"View Report",children:t.jsx(Wu,{size:16})})]})})]}),l===N.id&&t.jsx("tr",{children:t.jsx("td",{colSpan:Object.values(H).filter(Boolean).length+1,className:"bg-gradient-to-r from-gray-50 to-blue-50/30 border-l-4 border-blue-500",children:t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Basic Information"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Booking ID:"}),t.jsxs("span",{className:"font-medium",children:["#",N.id]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Status:"}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Je(N.status)}`,children:N.status.split("_").map(re=>re.charAt(0).toUpperCase()+re.slice(1)).join(" ")})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Payment Status:"}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${kn(N.payment_status)}`,children:N.payment_status.charAt(0).toUpperCase()+N.payment_status.slice(1)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Priority:"}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${yd(N.priority)}`,children:N.priority.charAt(0).toUpperCase()+N.priority.slice(1)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),t.jsxs("span",{className:"font-medium text-green-600",children:["",N.total_amount.toFixed(2)]})]}),N.slot_type&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Shift Pattern:"}),t.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs font-medium",children:[N.slot_type,N.slot_type==="MWF"&&" (Mon, Wed, Fri)",N.slot_type==="TTS"&&" (Tue, Thu, Sat)"]})]}),N.total_sessions&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Sessions:"}),t.jsxs("span",{className:"font-medium",children:[N.completed_sessions||0," / ",N.total_sessions]})]}),N.service_started_at&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Service Started:"}),t.jsx("span",{className:"font-medium text-green-600",children:new Date(N.service_started_at).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})})]}),N.service_ended_at&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Service Ended:"}),t.jsx("span",{className:"font-medium text-red-600",children:new Date(N.service_ended_at).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})})]}),N.service_started_at&&N.service_ended_at&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Duration:"}),t.jsx("span",{className:"font-medium text-blue-600",children:(()=>{const re=new Date(N.service_started_at),_e=new Date(N.service_ended_at).getTime()-re.getTime(),De=Math.floor(_e/6e4),lt=Math.floor(De/60),ue=De%60;return lt>0?`${lt}h ${ue}m`:`${ue}m`})()})]})]})]}),t.jsxs("div",{className:"space-y-4 md:col-span-2",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Service Details"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Service:"}),t.jsx("span",{className:"font-medium",children:N.service_name})]}),N.service_description&&t.jsxs("div",{className:"col-span-full",children:[t.jsx("span",{className:"text-gray-600 block mb-2",children:"Description:"}),t.jsx("div",{className:"text-sm text-gray-700 border border-gray-200 rounded p-3 bg-gray-50 service-description-html",style:{lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:N.service_description}})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"User:"}),t.jsx("span",{className:"font-medium",children:N.user_name})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Provider:"}),t.jsx("span",{className:"font-medium",children:N.provider_name})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Assigned To:"}),t.jsx("span",{className:"font-medium",children:N.assigned_provider||"Unassigned"})]}),(!N.provider_id||N.status==="awaiting_assignment")&&t.jsx("div",{className:"mt-4",children:t.jsx(J,{onClick:()=>mx(N),className:"bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:"Assign Provider"})}),!N.subscription_id&&t.jsx("div",{className:"mt-4",children:t.jsxs(J,{onClick:()=>ux(N),disabled:!!Se,variant:"outline",size:"sm",className:"border-indigo-600 text-indigo-600 hover:bg-indigo-50",children:[t.jsx(Vo,{size:14,className:"mr-1"}),Se===N.id?"Converting...":"Convert to subscription"]})})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Location & Contact"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 block",children:"Address:"}),t.jsx("span",{className:"font-medium",children:N.service_address})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"City:"}),t.jsx("span",{className:"font-medium",children:N.city})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Pincode:"}),t.jsx("span",{className:"font-medium",children:N.pincode})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Contact Person:"}),t.jsx("span",{className:"font-medium",children:N.contact_person})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Contact Phone:"}),t.jsx("span",{className:"font-medium",children:N.contact_phone})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Date & Time"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Booking Date:"}),t.jsx("span",{className:"font-medium",children:N.booking_date?new Date(N.booking_date).toLocaleDateString():"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Booking Time:"}),t.jsx("span",{className:"font-medium",children:N.booking_time?Za(N.booking_time):"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Created:"}),t.jsx("span",{className:"font-medium",children:N.created_at?new Date(N.created_at).toLocaleString():"N/A"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),t.jsx("span",{className:"font-medium",children:N.updated_at?new Date(N.updated_at).toLocaleString():"N/A"})]})]})]}),(N.slot_type||N.total_sessions)&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Session Information"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[N.slot_type&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Slot Type:"}),t.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:N.slot_type})]}),N.total_sessions&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Sessions:"}),t.jsxs("span",{className:"font-medium",children:[N.completed_sessions||0," / ",N.total_sessions," completed"]})]}),t.jsx("div",{className:"mt-3",children:t.jsx(J,{onClick:()=>{z(N),$(!0),m[N.id]||ve(N.id)},variant:"outline",size:"sm",className:"w-full",children:C[N.id]?"Loading...":"View Session History"})})]})]}),N.status==="pending_admin_approval"&&t.jsxs("div",{className:"space-y-4 col-span-full",children:[t.jsx("h4",{className:"text-sm font-semibold text-yellow-900 border-b border-yellow-300 pb-2 bg-yellow-50 p-2 rounded",children:" Pending Admin Approval"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(J,{onClick:()=>ge(N.id),className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:"Approve Completion"}),t.jsx(J,{onClick:()=>{const re=prompt("Please provide rejection reason:");re&&re.trim()&&fe(N.id,re.trim())},variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-50",size:"sm",children:"Reject Completion"})]}),N.admin_rejection_reason&&t.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:[t.jsx("strong",{children:"Previous Rejection:"})," ",N.admin_rejection_reason]})]}),(N.admin_notes||N.cancellation_reason||N.refund_amount)&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 border-b pb-2",children:"Additional Information"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[N.admin_notes&&t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 block",children:"Admin Notes:"}),t.jsx("span",{className:"font-medium",children:N.admin_notes})]}),N.cancellation_reason&&t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 block",children:"Cancellation Reason:"}),t.jsx("span",{className:"font-medium text-red-600",children:N.cancellation_reason})]}),N.refund_amount&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Refund Amount:"}),t.jsxs("span",{className:"font-medium text-blue-600",children:["",N.refund_amount.toFixed(2)]})]})]})]})]})})})})]},N.id))})]})}),x>1&&t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",i," of ",x]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(J,{onClick:()=>o(N=>Math.max(N-1,1)),disabled:i===1,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(fr,{size:16})}),t.jsx(J,{onClick:()=>o(N=>Math.min(N+1,x)),disabled:i===x,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(ns,{size:16})})]})]})]}),d&&u&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold",children:[g.status==="confirm"?"Confirm":g.status==="cancel"?"Cancel":g.status==="assign"?"Assign Provider":g.status==="start"?"Start Service":g.status==="complete"?"Complete":"View"," Booking"]}),t.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(He,{size:20})})]}),t.jsxs("form",{onSubmit:Ut,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking Details"}),t.jsxs("div",{className:"text-sm text-gray-900",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Service:"})," ",u.service_name]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Date:"})," ",new Date(u.booking_date).toLocaleDateString()]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Time:"})," ",Za(u.booking_time)]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Amount:"})," ",u.total_amount.toFixed(2)]})]})]}),g.status==="confirm"&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(gr,{className:"h-5 w-5 text-blue-400"})}),t.jsx("div",{className:"ml-3",children:t.jsxs("p",{className:"text-sm text-blue-700",children:[t.jsx("strong",{children:"Provider Assignment:"})," This booking already has a provider assigned. Confirmation will approve the booking for service."]})})]})}),g.status==="assign"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider ID *"}),t.jsx("input",{type:"number",required:!0,value:g.provider_id,onChange:N=>_({...g,provider_id:parseInt(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter provider ID"})]}),g.status==="cancel"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),t.jsx("input",{type:"text",required:!0,value:g.reason,onChange:N=>_({...g,reason:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter cancellation reason"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Refund Amount"}),t.jsx("input",{type:"number",value:g.refund_amount,onChange:N=>_({...g,refund_amount:parseFloat(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter refund amount"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes *"}),t.jsx("textarea",{required:!0,value:g.notes,onChange:N=>_({...g,notes:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:`Enter notes for ${g.status}...`})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(J,{type:"button",onClick:()=>h(!1),className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),t.jsx(J,{type:"submit",disabled:b,className:`${g.status==="confirm"?"bg-blue-600 hover:bg-blue-700":g.status==="cancel"?"bg-red-600 hover:bg-red-700":g.status==="assign"?"bg-green-600 hover:bg-green-700":(g.status==="start","bg-blue-600 hover:bg-blue-700")} text-white`,children:b?"Processing...":g.status==="confirm"?"Confirm":g.status==="cancel"?"Cancel":g.status==="assign"?"Assign":g.status==="start"?"Start":g.status==="complete"?"Complete":"Submit"})]})]})]})}),L&&P&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold",children:["Session History - Booking #",P.id]}),t.jsx("button",{onClick:()=>{$(!1),z(null)},className:"text-gray-400 hover:text-gray-600",children:t.jsx(He,{size:20})})]}),C[P.id]?t.jsx("div",{className:"text-center py-8",children:"Loading sessions..."}):((vd=m[P.id])==null?void 0:vd.length)>0?t.jsx("div",{className:"space-y-4",children:m[P.id].map(N=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-medium",children:["Session ",N.session_number]}),t.jsx("p",{className:"text-sm text-gray-600",children:new Date(N.session_date).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.status==="session_completed"?"bg-green-100 text-green-800":N.status==="session_started"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:N.status.replace("_"," ").replace(/\b\w/g,re=>re.toUpperCase())})]}),N.reached_at&&t.jsxs("p",{className:"text-sm text-gray-600",children:["Reached: ",new Date(N.reached_at).toLocaleString()]}),N.started_at&&t.jsxs("p",{className:"text-sm text-gray-600",children:["Started: ",new Date(N.started_at).toLocaleTimeString()]}),N.ended_at&&t.jsxs("p",{className:"text-sm text-gray-600",children:["Ended: ",new Date(N.ended_at).toLocaleTimeString()]}),N.picture_proof_url&&t.jsxs("div",{className:"mt-3",children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:"Proof:"}),t.jsx("img",{src:N.picture_proof_url,alt:`Session ${N.session_number} proof`,className:"max-w-xs rounded border border-gray-200 cursor-pointer hover:opacity-80",onClick:()=>window.open(N.picture_proof_url,"_blank")})]})]},N.id))}):t.jsx("div",{className:"text-center py-8 text-gray-500",children:"No sessions found"})]})}),O&&B&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold",children:["Assign Provider to Booking #",B.id]}),t.jsx("button",{onClick:()=>{E(!1),Q(null),W([]),R(null)},className:"text-gray-400 hover:text-gray-600",children:t.jsx(He,{size:20})})]}),t.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Service:"}),t.jsx("span",{className:"font-medium ml-2",children:B.service_name})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Customer:"}),t.jsx("span",{className:"font-medium ml-2",children:B.user_name})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Location:"}),t.jsxs("span",{className:"font-medium ml-2",children:[B.city,", ",B.pincode]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Date:"}),t.jsxs("span",{className:"font-medium ml-2",children:[B.booking_date?new Date(B.booking_date).toLocaleDateString():"N/A"," ",B.booking_time?Za(B.booking_time):""]})]})]})}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Available Providers (Filtered by Service & Location)"}),ee?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(Xr,{})}):A.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("p",{children:"No available providers found for this service."}),t.jsx("p",{className:"text-sm mt-2",children:"Please check if there are approved providers who offer this service."})]}):t.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:A.map(N=>t.jsx("div",{onClick:()=>R(N.id),className:`p-4 border rounded-lg cursor-pointer transition-colors ${v===N.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h5",{className:"font-semibold text-gray-900",children:N.full_name}),v===N.id&&t.jsx(gr,{size:16,className:"text-blue-600"})]}),t.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm text-gray-600",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Phone:"})," ",N.phone_number]}),N.email&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Email:"})," ",N.email]}),N.city&&N.state&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Location:"})," ",N.city,", ",N.state]}),N.average_rating&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Rating:"}),"  ",N.average_rating.toFixed(1)]}),N.completed_bookings!==void 0&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Completed:"})," ",N.completed_bookings," bookings"]})]})]})})},N.id))})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[t.jsx(J,{type:"button",onClick:()=>{E(!1),Q(null),W([]),R(null)},className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),t.jsx(J,{type:"button",onClick:px,disabled:!v||U||ee,className:"bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:U?"Assigning...":"Assign Provider"})]})]})})]})]})},Wj=()=>t.jsx(mt,{children:t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bookings"}),t.jsx("p",{className:"text-gray-600",children:"Manage and monitor all bookings in the system"})]}),t.jsxs(Ee,{children:[t.jsx(It,{children:t.jsx(Mt,{children:"All Bookings"})}),t.jsx(Pe,{children:t.jsx(Vj,{})})]})]})}),qj=[{id:1,booking_id:101,complaint_type:"service_quality",description:"The groomer was late and didn't follow the instructions I provided for my dog's haircut.",priority:"high",status:"pending",admin_notes:null,created_at:"2025-01-15T10:00:00Z",resolved_at:null,user_name:"Sarah Johnson",user_email:"sarah.johnson@example.com",user_phone:"+91 98765 43210",provider_name:"John Trainer",provider_email:"john.trainer@example.com",service_name:"Pet Grooming",booking_date:"2025-01-14",booking_time:"14:00"},{id:2,booking_id:102,complaint_type:"provider_behavior",description:"The trainer was rude and unprofessional during the training session.",priority:"medium",status:"in_progress",admin_notes:"Contacted provider for their side of the story",created_at:"2025-01-14T15:30:00Z",resolved_at:null,user_name:"Michael Chen",user_email:"michael.chen@example.com",user_phone:"+91 98765 43211",provider_name:"Sarah Trainer",provider_email:"sarah.trainer@example.com",service_name:"Dog Training",booking_date:"2025-01-13",booking_time:"10:00"},{id:3,booking_id:103,complaint_type:"billing_dispute",description:"I was charged extra for services that were not provided.",priority:"high",status:"resolved",admin_notes:"Refund processed. Amount credited to user account.",created_at:"2025-01-12T09:20:00Z",resolved_at:"2025-01-13T11:00:00Z",user_name:"Emily Rodriguez",user_email:"emily.rodriguez@example.com",user_phone:"+91 98765 43212",provider_name:"Mike Handler",provider_email:"mike.handler@example.com",service_name:"Veterinary Care",booking_date:"2025-01-11",booking_time:"16:00"},{id:4,booking_id:104,complaint_type:"safety_concern",description:"The boarding facility didn't have proper safety measures for my pet.",priority:"high",status:"pending",admin_notes:null,created_at:"2025-01-11T14:15:00Z",resolved_at:null,user_name:"David Wilson",user_email:"david.wilson@example.com",user_phone:"+91 98765 43213",provider_name:"Lisa Coach",provider_email:"lisa.coach@example.com",service_name:"Pet Boarding",booking_date:"2025-01-10",booking_time:"09:00"},{id:5,booking_id:105,complaint_type:"other",description:"General dissatisfaction with the service quality.",priority:"low",status:"closed",admin_notes:"Issue resolved after discussion with provider.",created_at:"2025-01-08T11:00:00Z",resolved_at:"2025-01-09T15:30:00Z",user_name:"Priya Sharma",user_email:"priya.sharma@example.com",user_phone:"+91 98765 43214",provider_name:"John Trainer",provider_email:"john.trainer@example.com",service_name:"Pet Walking",booking_date:"2025-01-07",booking_time:"18:00"}],Jj={total_complaints:5,pending_complaints:2,in_progress_complaints:1,resolved_complaints:1,closed_complaints:1,high_priority_complaints:3,medium_priority_complaints:1,low_priority_complaints:1},Gj=()=>{const[e,s]=p.useState(qj),[r,n]=p.useState(Jj),[a,i]=p.useState(!1),[o,l]=p.useState(null),[c,d]=p.useState("all"),[h,u]=p.useState("all"),[f,g]=p.useState(""),[_,b]=p.useState(!1),[w,x]=p.useState(""),[y,m]=p.useState(""),j=(P,z,H)=>{b(!0),setTimeout(()=>{s(e.map(k=>k.id===P?{...k,status:z,admin_notes:H,resolved_at:z==="resolved"||z==="closed"?new Date().toISOString():k.resolved_at}:k));const q=e.map(k=>k.id===P?{...k,status:z}:k);n({total_complaints:q.length,pending_complaints:q.filter(k=>k.status==="pending").length,in_progress_complaints:q.filter(k=>k.status==="in_progress").length,resolved_complaints:q.filter(k=>k.status==="resolved").length,closed_complaints:q.filter(k=>k.status==="closed").length,high_priority_complaints:q.filter(k=>k.priority==="high").length,medium_priority_complaints:q.filter(k=>k.priority==="medium").length,low_priority_complaints:q.filter(k=>k.priority==="low").length}),l(null),x(""),m(""),b(!1)},500)},C=P=>{switch(P){case"high":return"bg-red-100 text-red-700 border-red-200";case"medium":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"low":return"bg-green-100 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},F=P=>{switch(P){case"pending":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"in_progress":return"bg-blue-100 text-blue-700 border-blue-200";case"resolved":return"bg-green-100 text-green-700 border-green-200";case"closed":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},L=P=>({service_quality:"Service Quality Issue",provider_behavior:"Provider Behavior",billing_dispute:"Billing Dispute",safety_concern:"Safety Concern",equipment_damage:"Equipment Damage",other:"Other"})[P]||P,$=e.filter(P=>{const z=c==="all"||P.status===c,H=h==="all"||P.priority===h,q=f===""||P.user_name.toLowerCase().includes(f.toLowerCase())||P.provider_name.toLowerCase().includes(f.toLowerCase())||P.service_name.toLowerCase().includes(f.toLowerCase())||P.description.toLowerCase().includes(f.toLowerCase());return z&&H&&q});return a?t.jsx(mt,{children:t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading complaints..."})]})}):t.jsx(mt,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Complaint Management"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Manage and resolve customer complaints"})]})}),r&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(Ee,{className:"border-0 shadow-lg",children:t.jsx(Pe,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Complaints"}),t.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.total_complaints})]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx(St,{size:24,className:"text-blue-600"})})]})})}),t.jsx(Ee,{className:"border-0 shadow-lg",children:t.jsx(Pe,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),t.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:r.pending_complaints})]}),t.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:t.jsx(Ot,{size:24,className:"text-yellow-600"})})]})})}),t.jsx(Ee,{className:"border-0 shadow-lg",children:t.jsx(Pe,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),t.jsx("p",{className:"text-3xl font-bold text-blue-600",children:r.in_progress_complaints})]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx(lr,{size:24,className:"text-blue-600"})})]})})}),t.jsx(Ee,{className:"border-0 shadow-lg",children:t.jsx(Pe,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Resolved"}),t.jsx("p",{className:"text-3xl font-bold text-green-600",children:r.resolved_complaints})]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(Os,{size:24,className:"text-green-600"})})]})})})]}),t.jsx(Ee,{className:"border-0 shadow-lg",children:t.jsx(Pe,{className:"p-6",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(is,{size:20,className:"absolute left-3 top-3 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search complaints...",value:f,onChange:P=>g(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("select",{value:c,onChange:P=>d(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"in_progress",children:"In Progress"}),t.jsx("option",{value:"resolved",children:"Resolved"}),t.jsx("option",{value:"closed",children:"Closed"})]}),t.jsxs("select",{value:h,onChange:P=>u(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"all",children:"All Priority"}),t.jsx("option",{value:"high",children:"High"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"low",children:"Low"})]})]})]})})}),t.jsx("div",{className:"space-y-4",children:$.length===0?t.jsx(Ee,{className:"border-0 shadow-lg",children:t.jsxs(Pe,{className:"p-12 text-center",children:[t.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(St,{size:48,className:"text-gray-400"})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No Complaints Found"}),t.jsx("p",{className:"text-gray-600",children:f||c!=="all"||h!=="all"?"No complaints match your filter criteria.":"No complaints have been submitted yet."})]})}):$.map(P=>t.jsx(Ee,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow",children:t.jsx(Pe,{className:"p-6",children:t.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center mb-4",children:[t.jsxs("div",{className:"mb-4 lg:mb-0",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:L(P.complaint_type)}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${C(P.priority)}`,children:P.priority.toUpperCase()}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${F(P.status)}`,children:P.status.replace("_"," ").toUpperCase()})]}),t.jsx("p",{className:"text-gray-600 mb-3",children:P.description}),t.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ft,{size:16,className:"mr-2 text-indigo-500"}),t.jsx("span",{children:P.user_name})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Nr,{size:16,className:"mr-2 text-indigo-500"}),t.jsx("span",{children:P.user_phone})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(bt,{size:16,className:"mr-2 text-indigo-500"}),t.jsx("span",{children:new Date(P.booking_date).toLocaleDateString()})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(gs,{size:16,className:"mr-2 text-indigo-500"}),t.jsx("span",{children:P.service_name})]})]})]}),t.jsx("div",{className:"flex space-x-2",children:t.jsxs(J,{size:"sm",variant:"outline",onClick:()=>l(P),className:"border-indigo-200 text-indigo-600 hover:bg-indigo-50",children:[t.jsx(jn,{size:16,className:"mr-2"}),"View Details"]})})]})})},P.id))}),o&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Complaint Details"}),t.jsx("button",{onClick:()=>l(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(Sa,{size:20,className:"text-gray-500"})})]})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Complaint Type"}),t.jsx("p",{className:"text-gray-900",children:L(o.complaint_type)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Priority"}),t.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium border ${C(o.priority)}`,children:o.priority.toUpperCase()})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium border ${F(o.status)}`,children:o.status.replace("_"," ").toUpperCase()})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Created At"}),t.jsx("p",{className:"text-gray-900",children:new Date(o.created_at).toLocaleString()})]}),o.resolved_at&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Resolved At"}),t.jsx("p",{className:"text-gray-900",children:new Date(o.resolved_at).toLocaleString()})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Description"}),t.jsx("p",{className:"text-gray-900 mt-1 p-4 bg-gray-50 rounded-lg",children:o.description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Customer Information"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Name:"})," ",o.user_name]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Email:"})," ",o.user_email]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Phone:"})," ",o.user_phone]})]})]}),t.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:"Provider Information"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Name:"})," ",o.provider_name]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Email:"})," ",o.provider_email]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Service:"})," ",o.service_name]})]})]})]}),o.admin_notes&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Admin Notes"}),t.jsx("p",{className:"text-gray-900 mt-1 p-4 bg-yellow-50 rounded-lg",children:o.admin_notes})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Update Status"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"New Status"}),t.jsxs("select",{value:w,onChange:P=>x(P.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Select Status"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"in_progress",children:"In Progress"}),t.jsx("option",{value:"resolved",children:"Resolved"}),t.jsx("option",{value:"closed",children:"Closed"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Admin Notes"}),t.jsx("textarea",{value:y,onChange:P=>m(P.target.value),placeholder:"Add notes about the resolution...",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx(J,{onClick:()=>l(null),variant:"outline",className:"flex-1",children:"Cancel"}),t.jsx(J,{onClick:()=>j(o.id,w,y),disabled:!w||_,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:_?"Updating...":"Update Status"})]})]})]})]})]})})]})})},tl={},zr=(tl==null?void 0:tl.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",As={New:{badge:"bg-orange-100 text-orange-700 border border-orange-200",dot:"bg-orange-500"},Contacted:{badge:"bg-amber-100 text-amber-700 border border-amber-200",dot:"bg-amber-500"},Converted:{badge:"bg-emerald-100 text-emerald-700 border border-emerald-200",dot:"bg-emerald-500"},Lost:{badge:"bg-rose-100 text-rose-600 border border-rose-200",dot:"bg-rose-500"},Available:{badge:"bg-blue-100 text-blue-700 border border-blue-200",dot:"bg-blue-500"},"Not connected":{badge:"bg-gray-100 text-gray-700 border border-gray-200",dot:"bg-gray-500"}},Qj=e=>({id:e.id,ownerName:e.owner_name,email:e.email,phone:e.phone,petType:e.pet_type,serviceInterest:e.service_interest,location:e.location||"",createdAt:e.created_at,status:e.status,notes:e.notes||"",assignedTrainer:e.assigned_trainer,assigned_admin_id:e.assigned_admin_id||null,assigned_admin_name:e.assigned_admin_name||null,assigned_admin_username:e.assigned_admin_username||null,scheduled_date:e.scheduled_date||null,scheduled_time:e.scheduled_time||null,status_history:e.status_history||[]}),Zj=({lead:e,onClose:s,onUpdate:r,showHistory:n=!1})=>{const[a,i]=p.useState((e==null?void 0:e.status)??"New"),[o,l]=p.useState((e==null?void 0:e.scheduled_date)||""),[c,d]=p.useState((e==null?void 0:e.scheduled_time)||""),[h,u]=p.useState(!1),[f,g]=p.useState("details");if(p.useEffect(()=>{e&&(i(e.status),l(e.scheduled_date||""),d(e.scheduled_time||""))},[e]),!e)return null;const _=async()=>{u(!0);try{await r(e.id,{status:a,scheduledDate:o||null,scheduledTime:c||null}),s()}catch(w){console.error("Error updating lead:",w)}finally{u(!1)}},b=e;return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4 py-8",children:t.jsxs("div",{className:"relative w-full max-w-3xl max-h-[90vh] rounded-3xl bg-white shadow-2xl flex flex-col",children:[t.jsx("button",{onClick:s,className:"absolute right-4 top-4 z-10 rounded-full bg-orange-100 p-2 text-orange-600 hover:bg-orange-200 transition-colors",children:t.jsx(He,{size:18})}),t.jsx("div",{className:"rounded-t-3xl bg-gradient-to-r from-orange-500 to-amber-400 px-8 py-6 text-white flex-shrink-0",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(bn,{size:28}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold",children:"Lead Details"}),t.jsx("p",{className:"text-sm text-orange-100/90",children:"Manage status, trainer assignment, and notes"})]})]})}),n&&t.jsx("div",{className:"px-8 pt-6 pb-4 border-b border-orange-200 flex-shrink-0",children:t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{onClick:()=>g("details"),className:`px-4 py-2 text-sm font-semibold rounded-xl transition-colors ${f==="details"?"bg-orange-500 text-white":"text-orange-500 hover:bg-orange-50"}`,children:"Details"}),t.jsx("button",{onClick:()=>g("history"),className:`px-4 py-2 text-sm font-semibold rounded-xl transition-colors ${f==="history"?"bg-orange-500 text-white":"text-orange-500 hover:bg-orange-50"}`,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Hh,{size:16}),"Status History"]})})]})}),t.jsx("div",{className:"overflow-y-auto flex-1",children:f==="details"?t.jsxs("div",{className:"grid gap-6 px-8 py-6 md:grid-cols-2",children:[t.jsxs("div",{className:"space-y-3 rounded-2xl border border-orange-100 bg-orange-50/40 p-5",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"rounded-2xl bg-white/90 p-3 shadow-sm",children:t.jsx(ft,{className:"text-orange-500",size:22})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-orange-500",children:"Pet Owner"}),t.jsx("p",{className:"text-lg font-semibold text-orange-900",children:e.ownerName})]})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[t.jsx(Vs,{size:16}),t.jsx("span",{children:e.email})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[t.jsx(Nr,{size:16}),t.jsx("span",{children:e.phone})]}),e.location&&t.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[t.jsx(gs,{size:16}),t.jsx("span",{children:e.location})]}),e.assigned_admin_name&&t.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[t.jsx(Gs,{size:16}),t.jsxs("span",{children:["Assigned to: ",e.assigned_admin_name]})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[t.jsx(cd,{size:16}),t.jsxs("span",{children:["Created ",new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"rounded-2xl border border-orange-100 p-5",children:[t.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-orange-500",children:"Lead Status"}),t.jsx("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:["New","Contacted","Converted","Lost","Available","Not connected"].map(w=>t.jsxs("button",{onClick:()=>i(w),className:`flex items-center justify-between rounded-xl border p-3 text-sm font-medium transition-all ${a===w?"border-orange-500 bg-orange-50 text-orange-700 shadow-sm":"border-orange-100 bg-white text-orange-500 hover:border-orange-200"}`,children:[t.jsx("span",{children:w}),w==="Converted"?t.jsx(gr,{size:18}):w==="Lost"?t.jsx(St,{size:18}):t.jsx(Oh,{size:18})]},w))})]}),t.jsxs("div",{className:"rounded-2xl border border-orange-100 p-5",children:[t.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-orange-500 mb-3",children:"Schedule"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-orange-600 mb-1 block",children:"Date"}),t.jsx("input",{type:"date",value:o,onChange:w=>l(w.target.value),className:"w-full rounded-xl border border-orange-200 bg-white px-3 py-2 text-sm text-orange-900 outline-none focus:border-orange-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-medium text-orange-600 mb-1 block",children:"Time"}),t.jsx("input",{type:"time",value:c,onChange:w=>d(w.target.value),className:"w-full rounded-xl border border-orange-200 bg-white px-3 py-2 text-sm text-orange-900 outline-none focus:border-orange-400"})]})]})]})]})]}):t.jsxs("div",{className:"px-8 py-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"Status History"}),b.status_history&&b.status_history.length>0?t.jsx("div",{className:"space-y-3",children:b.status_history.map((w,x)=>{var y,m;return t.jsx("div",{className:"rounded-xl border border-orange-100 bg-orange-50/40 p-4",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${((y=As[w.status])==null?void 0:y.badge)||As.New.badge}`,children:[t.jsx("span",{className:`h-2 w-2 rounded-full ${((m=As[w.status])==null?void 0:m.dot)||As.New.dot}`}),w.status]}),t.jsx("span",{className:"text-xs text-orange-600",children:new Date(w.created_at).toLocaleString()})]}),w.notes&&t.jsx("p",{className:"text-sm text-orange-700 mt-2",children:w.notes}),w.updated_by_name&&t.jsxs("p",{className:"text-xs text-orange-500 mt-1",children:["Updated by: ",w.updated_by_name]})]})})},w.id)})}):t.jsx("p",{className:"text-sm text-orange-400 text-center py-8",children:"No status history available"})]})}),t.jsxs("div",{className:"px-8 pt-6 pb-8 border-t border-orange-100 bg-white flex-shrink-0",children:[t.jsxs("div",{className:"rounded-2xl border border-orange-100 bg-orange-50/40 p-5 mb-6",children:[t.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-orange-500 mb-3",children:"Lead Notes"}),t.jsx("p",{className:"text-sm text-orange-900 leading-relaxed",children:e.notes||"No notes available"})]}),t.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end",children:[t.jsx("button",{onClick:s,disabled:h,className:"rounded-xl border border-orange-200 px-5 py-2 text-sm font-medium text-orange-500 hover:bg-orange-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:_,disabled:h,className:"rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:from-orange-600 hover:to-amber-500 transition-colors disabled:opacity-50 flex items-center gap-2",children:h?t.jsxs(t.Fragment,{children:[t.jsx(rs,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})},Kj=()=>{const{addToast:e}=ot(),[s,r]=p.useState([]),[n,a]=p.useState(null),[i,o]=p.useState(""),[l,c]=p.useState("All"),[d,h]=p.useState(!1),[u,f]=p.useState(!1),[g,_]=p.useState(!1),[b,w]=p.useState([]),[x,y]=p.useState({ownerName:"",email:"",phone:"",petType:"Dog",serviceInterest:"Training",location:"",notes:"",status:"New",assignedTrainer:null,scheduledDate:"",scheduledTime:""}),[m,j]=p.useState({username:"",password:"",full_name:"",email:"",phone:""}),C=(S=!1)=>{const M=localStorage.getItem("blinkcare_token"),I={};return M&&(I.Authorization=`Bearer ${M}`),S&&(I["Content-Type"]="application/json"),I},F=async()=>{h(!0);try{const M=await(await fetch(`${zr}/admin/leads`,{headers:C()})).json();if(M.success&&Array.isArray(M.leads)){const I=M.leads.map(Qj);r(I)}else e("Failed to load leads","error")}catch(S){console.error("Error fetching leads:",S),e("Error loading leads","error")}finally{h(!1)}};p.useEffect(()=>{F(),L()},[]);const L=async()=>{try{const M=await(await fetch(`${zr}/admin/lead-admins`,{headers:C()})).json();M.success&&Array.isArray(M.admins)&&w(M.admins)}catch(S){console.error("Error fetching lead admins:",S)}},$=async()=>{var S;if(!m.username||!m.password){e("Username and password are required","error");return}try{const M=await fetch(`${zr}/admin/lead-admins`,{method:"POST",headers:C(!0),body:JSON.stringify(m)}),I=await M.json();M.ok&&I.success?(await L(),e("Lead admin created successfully","success"),j({username:"",password:"",full_name:"",email:"",phone:""})):e(((S=I.error)==null?void 0:S.message)||"Failed to create admin","error")}catch(M){console.error("Error creating admin:",M),e("Error creating admin","error")}},P=p.useMemo(()=>{const S=s.length,M=s.filter(B=>B.status==="New").length,I=s.filter(B=>B.status==="Contacted").length,O=s.filter(B=>B.status==="Converted").length,E=S===0?0:Math.round(O/S*100);return[{label:"New Leads",value:M,icon:t.jsx(md,{className:"text-white",size:22}),gradient:"from-orange-500 to-amber-400",subtitle:"+5 today"},{label:"Contacted",value:I,icon:t.jsx(Vh,{className:"text-orange-500",size:22}),gradient:"from-orange-100 to-amber-100",subtitle:"Follow-ups scheduled"},{label:"Converted",value:O,icon:t.jsx(gr,{className:"text-emerald-600",size:22}),gradient:"from-emerald-100 to-emerald-50",subtitle:`${E}% conversion`},{label:"Total Leads",value:S,icon:t.jsx(ld,{className:"text-orange-500",size:22}),gradient:"from-orange-50 to-amber-50",subtitle:"Across all services"}]},[s]),z=s.filter(S=>{const M=S.ownerName.toLowerCase().includes(i.toLowerCase())||S.email.toLowerCase().includes(i.toLowerCase())||S.phone.toLowerCase().includes(i.toLowerCase()),I=l==="All"||S.status===l;return M&&I}),H=async(S,M)=>{var I,O;try{const E={};M.status&&(E.status=M.status),M.assignedTrainer!==void 0&&(E.assigned_trainer=M.assignedTrainer),M.scheduledDate!==void 0&&(E.scheduled_date=M.scheduledDate),M.scheduledTime!==void 0&&(E.scheduled_time=M.scheduledTime);const B=await fetch(`${zr}/admin/leads/${S}`,{method:"PUT",headers:C(!0),body:JSON.stringify(E)}),Q=await B.json();if(B.ok&&Q.success)await F(),e("Lead updated successfully","success");else throw e(((I=Q.error)==null?void 0:I.message)||"Failed to update lead","error"),new Error(((O=Q.error)==null?void 0:O.message)||"Failed to update lead")}catch(E){throw console.error("Error updating lead:",E),e("Error updating lead","error"),E}},q=async()=>{var S;try{const M=await fetch(`${zr}/admin/leads`,{method:"POST",headers:C(!0),body:JSON.stringify({owner_name:x.ownerName,email:x.email,phone:x.phone,pet_type:x.petType,service_interest:x.serviceInterest,location:x.location||null,notes:x.notes||null,status:x.status,assigned_trainer:x.assignedTrainer,scheduled_date:x.scheduledDate||null,scheduled_time:x.scheduledTime||null})}),I=await M.json();M.ok&&I.success?(await F(),e("Lead created successfully","success"),f(!1),y({ownerName:"",email:"",phone:"",petType:"Dog",serviceInterest:"Training",location:"",notes:"",status:"New",assignedTrainer:null,scheduledDate:"",scheduledTime:""})):e(((S=I.error)==null?void 0:S.message)||"Failed to create lead","error")}catch(M){console.error("Error creating lead:",M),e("Error creating lead","error")}},k=async S=>{var M;if(confirm("Are you sure you want to delete this lead?"))try{const I=await fetch(`${zr}/admin/leads/${S}`,{method:"DELETE",headers:C()}),O=await I.json();I.ok&&O.success?(await F(),e("Lead deleted successfully","success")):e(((M=O.error)==null?void 0:M.message)||"Failed to delete lead","error")}catch(I){console.error("Error deleting lead:",I),e("Error deleting lead","error")}};return t.jsxs(mt,{children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"rounded-3xl bg-gradient-to-r from-orange-500 to-amber-400 px-6 py-8 text-white shadow-lg",children:t.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm uppercase tracking-wider text-orange-100/80",children:"Lead Management"}),t.jsx("h1",{className:"mt-2 text-3xl font-bold",children:"Pet Owner Leads Dashboard"}),t.jsx("p",{className:"mt-3 max-w-2xl text-sm text-orange-50/80",children:"Track inquiries from pet owners, assign trainers, and follow progress across pet training, grooming, vaccination, and healthcare services."})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{type:"button",className:"rounded-xl bg-white px-5 py-2 text-sm font-semibold text-orange-600 shadow-sm hover:bg-orange-50 transition-colors flex items-center gap-2",onClick:()=>_(!0),children:[t.jsx(Gs,{size:16}),"Manage Admins"]}),t.jsx("button",{type:"button",className:"rounded-xl bg-white px-5 py-2 text-sm font-semibold text-orange-600 shadow-sm hover:bg-orange-50 transition-colors",onClick:()=>console.log("Export leads"),children:"Export Leads"}),t.jsxs("button",{type:"button",className:"rounded-xl bg-orange-600 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-700 transition-colors flex items-center gap-2",onClick:()=>f(!0),children:[t.jsx(Ws,{size:16}),"New Lead"]})]})]})}),t.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:P.map(S=>t.jsx(Ee,{className:"overflow-hidden rounded-3xl border border-orange-100/60 bg-white/95 shadow-md",children:t.jsxs(Pe,{className:"relative flex items-center gap-4 p-6",children:[t.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br ${S.gradient} shadow-sm`,children:S.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium uppercase tracking-wide text-orange-500",children:S.label}),t.jsx("p",{className:"mt-1 text-2xl font-semibold text-orange-900",children:S.value}),t.jsx("p",{className:"text-xs text-orange-400",children:S.subtitle})]})]})},S.label))}),t.jsx(Ee,{className:"rounded-3xl border border-orange-100/60 bg-white/95 shadow-lg",children:t.jsxs(Pe,{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[t.jsxs("div",{className:"flex flex-1 items-center gap-3 rounded-2xl border border-orange-100 bg-orange-50/60 px-4 py-2",children:[t.jsx(is,{size:18,className:"text-orange-400"}),t.jsx("input",{value:i,onChange:S=>o(S.target.value),placeholder:"Search pet owners, email, or phone...",className:"flex-1 border-none bg-transparent text-sm text-orange-900 placeholder-orange-300 outline-none"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:["All","New","Contacted","Converted","Lost","Available","Not connected"].map(S=>t.jsxs("button",{onClick:()=>c(S),className:`flex items-center gap-2 rounded-full border px-4 py-2 text-xs font-semibold uppercase tracking-wide transition-all ${l===S?"border-orange-500 bg-orange-50 text-orange-600 shadow-sm":"border-orange-100 bg-white text-orange-400 hover:border-orange-200"}`,children:[t.jsx(Hi,{size:14}),S," Leads"]},S))})]}),t.jsx("div",{className:"overflow-hidden rounded-2xl border border-orange-100",children:t.jsxs("table",{className:"min-w-full divide-y divide-orange-100",children:[t.jsx("thead",{className:"bg-orange-50/70",children:t.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wider text-orange-500",children:[t.jsx("th",{className:"px-6 py-4",children:"Pet Owner"}),t.jsx("th",{className:"px-6 py-4",children:"Pet Type"}),t.jsx("th",{className:"px-6 py-4",children:"Service Interest"}),t.jsx("th",{className:"px-6 py-4",children:"Scheduled"}),t.jsx("th",{className:"px-6 py-4",children:"Status"}),t.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-orange-50 bg-white/95",children:d?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:t.jsx("div",{className:"flex items-center justify-center",children:t.jsx(rs,{className:"w-8 h-8 animate-spin text-orange-400"})})})}):z.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-sm text-orange-400",children:"No leads found for the current filters."})}):z.map(S=>{var M,I;return t.jsxs("tr",{className:"transition-colors hover:bg-orange-50/50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-gradient-to-br from-orange-500 to-amber-400 text-white shadow-sm",children:t.jsx(bn,{size:18})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-orange-900",children:S.ownerName}),t.jsx("p",{className:"text-xs text-orange-400",children:S.email})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-orange-500",children:S.petType})}),t.jsx("td",{className:"px-6 py-4 text-sm font-medium text-orange-700",children:S.serviceInterest}),t.jsx("td",{className:"px-6 py-4 text-sm text-orange-600",children:S.scheduled_date?t.jsxs("div",{children:[t.jsx("div",{children:new Date(S.scheduled_date).toLocaleDateString()}),S.scheduled_time&&t.jsx("div",{className:"text-xs",children:S.scheduled_time})]}):t.jsx("span",{className:"text-orange-300",children:"Not scheduled"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${((M=As[S.status])==null?void 0:M.badge)||As.New.badge}`,children:[t.jsx("span",{className:`h-2 w-2 rounded-full ${((I=As[S.status])==null?void 0:I.dot)||As.New.dot}`}),S.status]}),S.assigned_admin_name&&t.jsxs("div",{className:"text-xs text-orange-500",children:["Assigned to: ",S.assigned_admin_name]})]})}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[t.jsxs("button",{onClick:()=>a(S),className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-orange-500 to-amber-400 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition-all hover:from-orange-600 hover:to-amber-500",children:["Manage",t.jsx(ns,{size:14})]}),t.jsx("button",{onClick:()=>k(S.id),className:"inline-flex items-center gap-2 rounded-full border border-red-200 bg-white px-3 py-2 text-xs font-semibold text-red-500 shadow-sm transition-all hover:bg-red-50",children:t.jsx(fa,{size:14})})]})})]},S.id)})})]})})]})})]}),t.jsx(Zj,{lead:n,onClose:()=>a(null),onUpdate:H,showHistory:!0}),g&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4 py-8",children:t.jsxs("div",{className:"relative w-full max-w-3xl rounded-3xl bg-white shadow-2xl max-h-[90vh] overflow-y-auto",children:[t.jsx("button",{onClick:()=>_(!1),className:"absolute right-4 top-4 rounded-full bg-orange-100 p-2 text-orange-600 hover:bg-orange-200 transition-colors",children:t.jsx(He,{size:18})}),t.jsx("div",{className:"rounded-t-3xl bg-gradient-to-r from-orange-500 to-amber-400 px-8 py-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Gs,{size:28}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold",children:"Lead Admin Management"}),t.jsx("p",{className:"text-sm text-orange-100/90",children:"Create and manage lead admin users"})]})]})}),t.jsxs("div",{className:"px-8 py-6 space-y-6",children:[t.jsxs("div",{className:"rounded-2xl border border-orange-100 bg-orange-50/40 p-5",children:[t.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"Create New Lead Admin"}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Username *"}),t.jsx("input",{type:"text",value:m.username,onChange:S=>j({...m,username:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Password *"}),t.jsx("input",{type:"password",value:m.password,onChange:S=>j({...m,password:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Full Name"}),t.jsx("input",{type:"text",value:m.full_name,onChange:S=>j({...m,full_name:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Email"}),t.jsx("input",{type:"email",value:m.email,onChange:S=>j({...m,email:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Phone"}),t.jsx("input",{type:"tel",value:m.phone,onChange:S=>j({...m,phone:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400"})]})]}),t.jsx("button",{onClick:$,disabled:!m.username||!m.password,className:"mt-4 rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:from-orange-600 hover:to-amber-500 transition-colors disabled:opacity-50",children:"Create Admin"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"Existing Lead Admins"}),t.jsx("div",{className:"space-y-2",children:b.map(S=>t.jsxs("div",{className:"rounded-xl border border-orange-100 bg-white p-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-orange-900",children:S.username}),S.full_name&&t.jsx("p",{className:"text-sm text-orange-600",children:S.full_name}),S.email&&t.jsx("p",{className:"text-xs text-orange-500",children:S.email})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${S.is_active?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:S.is_active?"Active":"Inactive"})})]},S.id))})]})]})]})}),u&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4 py-8",children:t.jsxs("div",{className:"relative w-full max-w-2xl rounded-3xl bg-white shadow-2xl",children:[t.jsx("button",{onClick:()=>f(!1),className:"absolute right-4 top-4 rounded-full bg-orange-100 p-2 text-orange-600 hover:bg-orange-200 transition-colors",children:t.jsx(He,{size:18})}),t.jsx("div",{className:"rounded-t-3xl bg-gradient-to-r from-orange-500 to-amber-400 px-8 py-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ws,{size:28}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold",children:"Create New Lead"}),t.jsx("p",{className:"text-sm text-orange-100/90",children:"Add a new pet owner lead"})]})]})}),t.jsxs("div",{className:"px-8 py-6 space-y-4",children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Owner Name *"}),t.jsx("input",{type:"text",value:x.ownerName,onChange:S=>y({...x,ownerName:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Email *"}),t.jsx("input",{type:"email",value:x.email,onChange:S=>y({...x,email:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Phone *"}),t.jsx("input",{type:"tel",value:x.phone,onChange:S=>y({...x,phone:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Pet Type"}),t.jsxs("select",{value:x.petType,onChange:S=>y({...x,petType:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400",children:[t.jsx("option",{children:"Dog"}),t.jsx("option",{children:"Cat"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Service Interest"}),t.jsxs("select",{value:x.serviceInterest,onChange:S=>y({...x,serviceInterest:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400",children:[t.jsx("option",{children:"Training"}),t.jsx("option",{children:"Grooming"}),t.jsx("option",{children:"Vaccination"}),t.jsx("option",{children:"Healthcare"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Location"}),t.jsx("input",{type:"text",value:x.location,onChange:S=>y({...x,location:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Scheduled Date"}),t.jsx("input",{type:"date",value:x.scheduledDate,onChange:S=>y({...x,scheduledDate:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Scheduled Time"}),t.jsx("input",{type:"time",value:x.scheduledTime,onChange:S=>y({...x,scheduledTime:S.target.value}),className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-orange-500 mb-1 block",children:"Notes"}),t.jsx("textarea",{value:x.notes,onChange:S=>y({...x,notes:S.target.value}),rows:3,className:"w-full rounded-xl border border-orange-100 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400"})]}),t.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[t.jsx("button",{onClick:()=>f(!1),className:"rounded-xl border border-orange-200 px-5 py-2 text-sm font-medium text-orange-500 hover:bg-orange-50 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:q,disabled:!x.ownerName||!x.email||!x.phone,className:"rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:from-orange-600 hover:to-amber-500 transition-colors disabled:opacity-50",children:"Create Lead"})]})]})]})})]})},sn={},ls=(sn==null?void 0:sn.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",Yj=(sn==null?void 0:sn.VITE_BACKEND_BASE_URL)||"https://backendpetify.mycartly.in",Ka=e=>{const s=typeof e=="string"?e.trim():"";if(!s)return"";if(/^https?:\/\//i.test(s))return s;let r=s.replace(/\\/g,"/");return r.startsWith("public/")?r=r.slice(7):r.startsWith("/public/")&&(r=r.slice(8)),r=r.startsWith("/")?r:`/${r}`,`${Yj}${r}`},Xj={Draft:"bg-amber-100 text-amber-700 border border-amber-200",Published:"bg-emerald-100 text-emerald-700 border border-emerald-200",Active:"bg-orange-100 text-orange-700 border border-orange-200",Inactive:"bg-rose-100 text-rose-500 border border-rose-200"},eb=()=>{const{addToast:e}=ot(),[s,r]=p.useState("blogs"),[n,a]=p.useState([]),[i,o]=p.useState([]),[l,c]=p.useState([]),[d,h]=p.useState(!1),[u,f]=p.useState(!1),[g,_]=p.useState(!1),[b,w]=p.useState(!1),[x,y]=p.useState(null),[m,j]=p.useState(null),[C,F]=p.useState({title:"",category:"Training",status:"Draft",author:"",excerpt:"",content:"",image:null}),[L,$]=p.useState({category_id:0,sequence:0,image:null}),[P,z]=p.useState(null),H=(v=!1)=>{const R=localStorage.getItem("blinkcare_token"),U={};return R&&(U.Authorization=`Bearer ${R}`),v&&(U["Content-Type"]="application/json"),U},q=async()=>{h(!0);try{const v=await fetch(`${ls}/admin/blogs`,{headers:H()});if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const R=await v.json();R.success&&Array.isArray(R.blogs)?a(R.blogs):e("Failed to load blogs","error")}catch(v){console.error("Error fetching blogs:",v),e(`Error loading blogs: ${v instanceof Error?v.message:"Unknown error"}`,"error")}finally{h(!1)}},k=async()=>{h(!0);try{const v=await fetch(`${ls}/admin/banners`,{headers:H()});if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const R=await v.json();R.success&&Array.isArray(R.banners)?o(R.banners):e("Failed to load banners","error")}catch(v){console.error("Error fetching banners:",v),e(`Error loading banners: ${v instanceof Error?v.message:"Unknown error"}`,"error")}finally{h(!1)}},S=async()=>{try{const v=await fetch(`${ls}/admin/categories`,{headers:H()});if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const R=await v.json();Array.isArray(R.categories)&&c(R.categories)}catch(v){console.error("Error fetching categories:",v)}};p.useEffect(()=>{q(),k(),S()},[]);const M=p.useMemo(()=>{const v=n.length,R=n.filter(K=>K.status==="Published").length,U=n.filter(K=>K.status==="Draft").length;return[{label:"Total Posts",value:v,subtitle:"Across pet care categories",icon:t.jsx(Uo,{className:"text-orange-500",size:22}),gradient:"from-orange-100 to-amber-100"},{label:"Published",value:R,subtitle:"Live on the site",icon:t.jsx(gr,{className:"text-emerald-500",size:22}),gradient:"from-emerald-100 to-emerald-50"},{label:"Drafts",value:U,subtitle:"Ready for review",icon:t.jsx(Ot,{className:"text-amber-500",size:22}),gradient:"from-amber-100 to-orange-50"}]},[]),I=p.useMemo(()=>{const v=i.length,R=i.filter(K=>K.status==="Active").length,U=i.filter(K=>K.status==="Inactive").length;return[{label:"Total Banners",value:v,subtitle:"Displayed across pages",icon:t.jsx(zy,{className:"text-orange-500",size:22}),gradient:"from-orange-100 to-amber-100"},{label:"Active",value:R,subtitle:"Currently visible",icon:t.jsx(xi,{className:"text-emerald-500",size:22}),gradient:"from-emerald-100 to-emerald-50"},{label:"Inactive",value:U,subtitle:"Hidden banners",icon:t.jsx(rc,{className:"text-rose-500",size:22}),gradient:"from-rose-100 to-rose-50"}]},[]),O=async v=>{var R;v.preventDefault(),f(!0);try{const U=localStorage.getItem("blinkcare_token");let K;if(C.image instanceof File){const ce=new FormData;ce.append("title",C.title),ce.append("category",C.category),ce.append("status",C.status),C.author&&ce.append("author",C.author),C.excerpt&&ce.append("excerpt",C.excerpt),C.content&&ce.append("content",C.content),ce.append("image",C.image),K=await fetch(`${ls}/admin/blogs${x?`/${x.id}`:""}`,{method:x?"PUT":"POST",headers:{Authorization:`Bearer ${U}`},body:ce})}else{const ce={title:C.title,category:C.category,status:C.status};C.author&&(ce.author=C.author),C.excerpt&&(ce.excerpt=C.excerpt),C.content&&(ce.content=C.content),typeof C.image=="string"&&C.image&&(ce.image=C.image),K=await fetch(`${ls}/admin/blogs${x?`/${x.id}`:""}`,{method:x?"PUT":"POST",headers:{Authorization:`Bearer ${U}`,"Content-Type":"application/json"},body:JSON.stringify(ce)})}const ae=await K.json();K.ok&&ae.success?(await q(),e(x?"Blog updated successfully":"Blog created successfully","success"),_(!1),A()):e(((R=ae.error)==null?void 0:R.message)||"Failed to save blog","error")}catch(U){console.error("Error saving blog:",U),e("Error saving blog","error")}finally{f(!1)}},E=async v=>{var R;if(v.preventDefault(),!L.category_id||L.category_id===0){e("Please select a category","error");return}f(!0);try{const U=localStorage.getItem("blinkcare_token");let K;if(L.image instanceof File){const ce=new FormData;ce.append("category_id",L.category_id.toString()),ce.append("sequence",L.sequence.toString()),ce.append("image",L.image),K=await fetch(`${ls}/admin/banners${m?`/${m.id}`:""}`,{method:m?"PUT":"POST",headers:{Authorization:`Bearer ${U}`},body:ce})}else{const ce={category_id:L.category_id,sequence:L.sequence};typeof L.image=="string"&&L.image&&(ce.image=L.image),K=await fetch(`${ls}/admin/banners${m?`/${m.id}`:""}`,{method:m?"PUT":"POST",headers:{Authorization:`Bearer ${U}`,"Content-Type":"application/json"},body:JSON.stringify(ce)})}const ae=await K.json();K.ok&&ae.success?(await k(),e(m?"Banner updated successfully":"Banner created successfully","success"),w(!1),W()):e(((R=ae.error)==null?void 0:R.message)||"Failed to save banner","error")}catch(U){console.error("Error saving banner:",U),e("Error saving banner","error")}finally{f(!1)}},B=async v=>{var R;if(confirm("Are you sure you want to delete this blog post?"))try{const U=localStorage.getItem("blinkcare_token"),K=await fetch(`${ls}/admin/blogs/${v}`,{method:"DELETE",headers:{Authorization:`Bearer ${U}`}}),ae=await K.json();K.ok&&ae.success?(await q(),e("Blog deleted successfully","success")):e(((R=ae.error)==null?void 0:R.message)||"Failed to delete blog","error")}catch(U){console.error("Error deleting blog:",U),e("Error deleting blog","error")}},Q=async v=>{var R;if(confirm("Are you sure you want to delete this banner?"))try{const U=localStorage.getItem("blinkcare_token"),K=await fetch(`${ls}/admin/banners/${v}`,{method:"DELETE",headers:{Authorization:`Bearer ${U}`}}),ae=await K.json();K.ok&&ae.success?(await k(),e("Banner deleted successfully","success")):e(((R=ae.error)==null?void 0:R.message)||"Failed to delete banner","error")}catch(U){console.error("Error deleting banner:",U),e("Error deleting banner","error")}},A=()=>{F({title:"",category:"Training",status:"Draft",author:"",excerpt:"",content:"",image:null}),y(null),z(null)},W=()=>{$({category_id:0,sequence:0,image:null}),j(null),z(null)},ee=v=>{y(v),F({title:v.title,category:v.category,status:v.status,author:v.author||"",excerpt:v.excerpt||"",content:v.content||"",image:v.image_url}),z(v.image_url?Ka(v.image_url):null),_(!0)},ie=v=>{j(v),$({category_id:v.category_id||0,sequence:v.sequence||0,image:v.image_url}),z(v.image_url?Ka(v.image_url):null),w(!0)};return t.jsx(mt,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"rounded-3xl bg-gradient-to-r from-orange-500 to-amber-400 px-6 py-8 text-white shadow-lg",children:t.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm uppercase tracking-wider text-orange-100/80",children:"Site Experience"}),t.jsx("h1",{className:"mt-2 text-3xl font-bold",children:"Site Management Studio"}),t.jsx("p",{className:"mt-3 max-w-2xl text-sm text-orange-50/80",children:"Manage the Pet Rising Star story with fresh blog posts, vibrant banners, and curated experiences for pet parents exploring training, grooming, healthcare, and nutrition."})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsx("button",{type:"button",className:"rounded-xl bg-white px-5 py-2 text-sm font-semibold text-orange-600 shadow-sm transition-colors hover:bg-orange-50",onClick:()=>console.log("Preview site"),children:"Preview Site"}),t.jsx("button",{type:"button",className:"rounded-xl bg-orange-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-orange-700",onClick:()=>console.log("Create content"),children:"Create Content"})]})]})}),t.jsx(Ee,{className:"rounded-3xl border border-orange-100/70 bg-white/95 shadow-lg",children:t.jsxs(Pe,{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-orange-400",children:"Manage"}),t.jsx("h2",{className:"mt-1 text-2xl font-semibold text-orange-900",children:"Content Hubs"})]}),t.jsx(gd,{value:s,onValueChange:v=>r(v),children:t.jsxs(fd,{className:"inline-flex items-center rounded-full bg-orange-50/70 p-1 text-orange-400",children:[t.jsx(un,{value:"blogs",className:`rounded-full px-5 py-2 text-sm font-semibold transition-all ${s==="blogs"?"bg-white text-orange-600 shadow-sm":"hover:text-orange-500"}`,children:"Blog Management"}),t.jsx(un,{value:"banners",className:`rounded-full px-5 py-2 text-sm font-semibold transition-all ${s==="banners"?"bg-white text-orange-600 shadow-sm":"hover:text-orange-500"}`,children:"Banner Management"})]})})]}),s==="blogs"?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:M.map(v=>t.jsx(Ee,{className:"rounded-3xl border border-orange-100 bg-white/95 shadow-sm",children:t.jsxs(Pe,{className:"flex items-center gap-4 p-5",children:[t.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br ${v.gradient}`,children:v.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:v.label}),t.jsx("p",{className:"mt-1 text-2xl font-semibold text-orange-900",children:v.value}),t.jsx("p",{className:"text-xs text-orange-400",children:v.subtitle})]})]})},v.label))}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[t.jsx(Ee,{className:"rounded-3xl border border-orange-100 bg-orange-50/50 shadow-inner",children:t.jsxs(Pe,{className:"space-y-5 p-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"rounded-2xl bg-white/80 p-3 text-orange-500 shadow-sm",children:t.jsx(Uo,{size:22})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-orange-900",children:"Create New Blog Post"}),t.jsx("p",{className:"text-sm text-orange-500",children:"Draft insights, publish stories, and keep pet parents inspired."})]})]}),t.jsxs("form",{className:"space-y-4",onSubmit:O,children:[t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:"Title"}),t.jsx("input",{type:"text",placeholder:"Enter engaging headline",value:C.title,onChange:v=>F({...C,title:v.target.value}),required:!0,className:"mt-2 w-full rounded-xl border border-orange-100 bg-white/90 px-4 py-2 text-sm text-orange-900 placeholder-orange-300 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:"Category"}),t.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-orange-100 bg-white/90 px-4 py-2",children:[t.jsx(ps,{size:16,className:"text-orange-400"}),t.jsxs("select",{value:C.category,onChange:v=>F({...C,category:v.target.value}),className:"flex-1 bg-transparent text-sm text-orange-900 outline-none",children:[t.jsx("option",{children:"Training"}),t.jsx("option",{children:"Grooming"}),t.jsx("option",{children:"Healthcare"}),t.jsx("option",{children:"Nutrition"})]})]})]})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:"Featured Image"}),t.jsxs("div",{className:"mt-2 space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-dashed border-orange-200 bg-white/90 px-4 py-4 text-sm text-orange-400",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Un,{size:18}),t.jsx("span",{children:"Upload high-quality hero image"})]}),t.jsxs("label",{className:"rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-4 py-2 text-xs font-semibold text-white shadow-sm transition-colors hover:from-orange-600 hover:to-amber-500 cursor-pointer",children:[t.jsx(ac,{size:14,className:"inline mr-1"}),"Choose File",t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:v=>{var U;const R=(U=v.target.files)==null?void 0:U[0];if(R){const K=URL.createObjectURL(R);z(K),F({...C,image:R})}}})]})]}),t.jsx("input",{type:"url",value:typeof C.image=="string"?C.image:"",onChange:v=>{F({...C,image:v.target.value}),z(v.target.value||null)},placeholder:"Or paste image URL",className:"w-full rounded-xl border border-orange-100 bg-white/90 px-4 py-2 text-sm text-orange-900 placeholder-orange-300 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-100"}),P&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:P,alt:"Preview",className:"max-h-32 max-w-full rounded border"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:"Status"}),t.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-orange-100 bg-white/90 px-4 py-2 text-sm text-orange-900",children:[t.jsx(rc,{size:18,className:"text-orange-400"}),t.jsxs("select",{value:C.status,onChange:v=>F({...C,status:v.target.value}),className:"flex-1 bg-transparent outline-none",children:[t.jsx("option",{children:"Draft"}),t.jsx("option",{children:"Published"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:"Excerpt"}),t.jsx("textarea",{rows:3,placeholder:"Short summary for preview cards...",value:C.excerpt,onChange:v=>F({...C,excerpt:v.target.value}),className:"mt-2 w-full rounded-xl border border-orange-100 bg-white/90 px-4 py-3 text-sm text-orange-900 placeholder-orange-300 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-100"}),t.jsxs("div",{className:"mt-2",children:[t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:"Content (optional)"}),t.jsx("textarea",{rows:5,placeholder:"Full blog content...",value:C.content,onChange:v=>F({...C,content:v.target.value}),className:"mt-2 w-full rounded-xl border border-orange-100 bg-white/90 px-4 py-3 text-sm text-orange-900 placeholder-orange-300 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-100"})]}),t.jsxs("div",{className:"mt-2",children:[t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:"Author (optional)"}),t.jsx("input",{type:"text",placeholder:"Author name",value:C.author,onChange:v=>F({...C,author:v.target.value}),className:"mt-2 w-full rounded-xl border border-orange-100 bg-white/90 px-4 py-2 text-sm text-orange-900 placeholder-orange-300 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-100"})]})]}),t.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end",children:[t.jsx("button",{type:"button",className:"rounded-xl border border-orange-200 bg-white px-5 py-2 text-sm font-semibold text-orange-500 shadow-sm transition-colors hover:bg-orange-50",onClick:()=>_(!1),children:"Cancel"}),t.jsx("button",{type:"submit",disabled:u,className:"rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-5 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:from-orange-600 hover:to-amber-500 disabled:opacity-50",children:u?"Saving...":x?"Update Post":"Publish Post"})]})]})]})}),t.jsx("div",{className:"space-y-4",children:d?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(rs,{className:"w-8 h-8 animate-spin text-orange-400"})}):n.length===0?t.jsxs("div",{className:"text-center py-12 text-orange-400",children:[t.jsx(Uo,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"No blog posts yet. Create your first post!"})]}):n.map(v=>t.jsx(Ee,{className:"rounded-3xl border border-orange-100 bg-white/95 shadow-sm",children:t.jsxs(Pe,{className:"flex flex-col gap-4 p-5 sm:flex-row sm:gap-5",children:[t.jsx("div",{className:"h-28 w-full overflow-hidden rounded-2xl bg-orange-100 sm:w-44",children:v.image_url?t.jsx("img",{src:Ka(v.image_url),alt:v.title,className:"h-full w-full object-cover"}):t.jsx("div",{className:"h-full w-full flex items-center justify-center bg-orange-100",children:t.jsx(Un,{className:"text-orange-300",size:32})})}),t.jsxs("div",{className:"flex-1 space-y-3",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-orange-500",children:[t.jsx(by,{size:14}),v.category]}),t.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${Xj[v.status]}`,children:v.status})]}),t.jsx("h3",{className:"text-lg font-semibold text-orange-900",children:v.title}),t.jsx("p",{className:"text-sm text-orange-500",children:v.excerpt||"No excerpt"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs text-orange-400",children:[v.author&&t.jsxs("span",{className:"inline-flex items-center gap-2",children:[t.jsx(ft,{size:14}),v.author]}),t.jsxs("span",{className:"inline-flex items-center gap-2",children:[t.jsx(bt,{size:14}),v.published_at?new Date(v.published_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not published"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 self-end sm:flex-col sm:items-end",children:[t.jsxs("button",{type:"button",onClick:()=>ee(v),className:"rounded-xl border border-orange-200 bg-white px-4 py-2 text-xs font-semibold text-orange-500 transition-colors hover:bg-orange-50",children:[t.jsx(Ho,{size:14,className:"inline mr-1"}),"Edit"]}),t.jsxs("button",{type:"button",onClick:()=>B(v.id),className:"rounded-xl border border-red-200 bg-white px-4 py-2 text-xs font-semibold text-red-500 transition-colors hover:bg-red-50",children:[t.jsx(fa,{size:14,className:"inline mr-1"}),"Delete"]})]})]})},v.id))})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:I.map(v=>t.jsx(Ee,{className:"rounded-3xl border border-orange-100 bg-white/95 shadow-sm",children:t.jsxs(Pe,{className:"flex items-center gap-4 p-5",children:[t.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br ${v.gradient}`,children:v.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:v.label}),t.jsx("p",{className:"mt-1 text-2xl font-semibold text-orange-900",children:v.value}),t.jsx("p",{className:"text-xs text-orange-400",children:v.subtitle})]})]})},v.label))}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-[0.9fr,1.1fr]",children:[t.jsx(Ee,{className:"rounded-3xl border border-orange-100 bg-orange-50/50 shadow-inner",children:t.jsxs(Pe,{className:"space-y-5 p-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"rounded-2xl bg-white/80 p-3 text-orange-500 shadow-sm",children:t.jsx(xi,{size:22})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-orange-900",children:"Create Site Banner"}),t.jsx("p",{className:"text-sm text-orange-500",children:"Craft hero banners with tailored CTAs for each section."})]})]}),t.jsxs("form",{className:"space-y-4",onSubmit:E,children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:"Category"}),t.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-orange-100 bg-white/90 px-4 py-2",children:[t.jsx(ps,{size:16,className:"text-orange-400"}),t.jsxs("select",{value:L.category_id,onChange:v=>$({...L,category_id:parseInt(v.target.value)||0}),required:!0,className:"flex-1 bg-transparent text-sm text-orange-900 outline-none",children:[t.jsx("option",{value:"0",children:"Select a category"}),l.map(v=>t.jsx("option",{value:v.id,children:v.name},v.id))]})]}),t.jsx("p",{className:"mt-1 text-xs text-orange-400",children:"Banner will link to services in this category"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:"Sequence"}),t.jsx("input",{type:"number",min:"0",placeholder:"0",value:L.sequence,onChange:v=>$({...L,sequence:parseInt(v.target.value)||0}),className:"mt-2 w-full rounded-xl border border-orange-100 bg-white/90 px-4 py-2 text-sm text-orange-900 placeholder-orange-300 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-100"}),t.jsx("p",{className:"mt-1 text-xs text-orange-400",children:"Lower numbers appear first"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-orange-400",children:"Banner Image"}),t.jsxs("div",{className:"mt-2 space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-dashed border-orange-200 bg-white/90 px-4 py-4 text-sm text-orange-400",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Un,{size:18}),t.jsx("span",{children:"Upload high-quality hero image"})]}),t.jsxs("label",{className:"rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-4 py-2 text-xs font-semibold text-white shadow-sm transition-colors hover:from-orange-600 hover:to-amber-500 cursor-pointer",children:[t.jsx(ac,{size:14,className:"inline mr-1"}),"Choose File",t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:v=>{var U;const R=(U=v.target.files)==null?void 0:U[0];if(R){const K=URL.createObjectURL(R);z(K),$({...L,image:R})}}})]})]}),t.jsx("input",{type:"url",value:typeof L.image=="string"?L.image:"",onChange:v=>{$({...L,image:v.target.value}),z(v.target.value||null)},placeholder:"Or paste image URL",className:"w-full rounded-xl border border-orange-100 bg-white/90 px-4 py-2 text-sm text-orange-900 placeholder-orange-300 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-100"}),P&&t.jsx("div",{className:"mt-2",children:t.jsx("img",{src:P,alt:"Preview",className:"max-h-32 max-w-full rounded border"})})]})]}),t.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end",children:[t.jsx("button",{type:"button",className:"rounded-xl border border-orange-200 bg-white px-5 py-2 text-sm font-semibold text-orange-500 shadow-sm transition-colors hover:bg-orange-50",onClick:()=>w(!1),children:"Cancel"}),t.jsx("button",{type:"submit",disabled:u,className:"rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-5 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:from-orange-600 hover:to-amber-500 disabled:opacity-50",children:u?"Saving...":m?"Update Banner":"Save Banner"})]})]})]})}),t.jsx("div",{className:"space-y-4",children:d?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(rs,{className:"w-8 h-8 animate-spin text-orange-400"})}):i.length===0?t.jsxs("div",{className:"text-center py-12 text-orange-400",children:[t.jsx(xi,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"No banners yet. Create your first banner!"})]}):i.map(v=>t.jsx(Ee,{className:"rounded-3xl border border-orange-100 bg-white/95 shadow-sm",children:t.jsxs(Pe,{className:"flex flex-col gap-4 p-5 md:flex-row md:items-center md:gap-6",children:[t.jsx("div",{className:"h-28 w-full overflow-hidden rounded-2xl bg-orange-100 md:w-48",children:v.image_url?t.jsx("img",{src:Ka(v.image_url),alt:v.category_name||`Banner ${v.id}`,className:"h-full w-full object-cover"}):t.jsx("div",{className:"h-full w-full flex items-center justify-center bg-orange-100",children:t.jsx(Un,{className:"text-orange-300",size:32})})}),t.jsx("div",{className:"flex-1 space-y-3",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-3 py-1 text-xs font-semibold text-orange-600",children:[t.jsx(ps,{size:14}),v.category_name||`Category ID: ${v.category_id}`]}),t.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-blue-50 px-3 py-1 text-xs font-semibold text-blue-600",children:["Sequence: ",v.sequence||0]})]})}),t.jsxs("div",{className:"flex items-center gap-2 self-end md:flex-col md:items-end",children:[t.jsxs("button",{type:"button",onClick:()=>ie(v),className:"rounded-xl border border-orange-200 bg-white px-4 py-2 text-xs font-semibold text-orange-500 transition-colors hover:bg-orange-50",children:[t.jsx(Ho,{size:14,className:"inline mr-1"}),"Edit"]}),t.jsxs("button",{type:"button",onClick:()=>Q(v.id),className:"rounded-xl border border-red-200 bg-white px-4 py-2 text-xs font-semibold text-red-500 transition-colors hover:bg-red-50",children:[t.jsx(fa,{size:14,className:"inline mr-1"}),"Delete"]})]})]})},v.id))})]})]})]})}),t.jsx("div",{className:"rounded-3xl border border-orange-100/60 bg-white/95 p-6 shadow-sm",children:t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-orange-400",children:"Style Guides"}),t.jsx("h3",{className:"text-xl font-semibold text-orange-900",children:"Pet Rising Star Content Principles"}),t.jsx("p",{className:"mt-2 max-w-2xl text-sm text-orange-500",children:"Gilroy for headings, Inter for supporting text, and a warm orange-to-amber palette create a playful yet professional brand for pet parents and trainers."})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 text-sm font-semibold text-orange-500",children:[t.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-4 py-2",children:[t.jsx(md,{size:16}),"Brand Ready"]}),t.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-4 py-2",children:[t.jsx(Ho,{size:16}),"Copywriting Polished"]})]})]})})]})})},tb=({transaction:e,expandedTransaction:s,onToggleDetails:r,formatDate:n,formatCurrency:a})=>{const i=l=>{switch(l){case"completed":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"failed":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},o=l=>{switch(l){case"card":return t.jsx(br,{size:16,className:"text-gray-500"});case"upi":return t.jsx(qh,{size:16,className:"text-gray-500"});case"net_banking":return t.jsx(yy,{size:16,className:"text-gray-500"});default:return null}};return t.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[t.jsxs("td",{className:"py-4",children:[t.jsx("div",{className:"font-medium text-gray-900",children:e.transaction_id}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Booking: ",e.booking_id]})]}),t.jsxs("td",{className:"py-4",children:[t.jsx("div",{className:"font-medium text-gray-900",children:e.provider_business_name}),t.jsxs("div",{className:"text-sm text-gray-500",children:[e.user_name,"  ",e.provider_name]})]}),t.jsxs("td",{className:"py-4",children:[t.jsx("div",{className:"font-medium text-gray-900",children:a(e.amount)}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Platform: ",a(e.platform_fee)]})]}),t.jsxs("td",{className:"py-4",children:[t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),e.failure_reason&&t.jsx("div",{className:"text-xs text-red-500 mt-1",children:e.failure_reason})]}),t.jsxs("td",{className:"py-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:n(e.created_at)}),e.completed_at&&t.jsxs("div",{className:"text-xs text-gray-500",children:["Completed: ",n(e.completed_at)]})]}),t.jsxs("td",{className:"py-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[o(e.payment_method),t.jsx("span",{className:"text-sm text-gray-600",children:e.payment_method.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ")})]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["via ",e.payment_gateway]})]}),t.jsx("td",{className:"py-4",children:t.jsxs(J,{onClick:()=>r(e.id),className:"flex items-center space-x-1 bg-blue-600 hover:bg-blue-700 text-white",children:[t.jsx(jn,{size:14}),t.jsx("span",{children:"Details"}),s===e.id?t.jsx(ka,{size:14}):t.jsx(jr,{size:14})]})})]})},sb=({transaction:e,formatDate:s,formatCurrency:r,onRefundClick:n})=>t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"py-4 bg-gray-50",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx(br,{size:18,className:"text-white"})}),t.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:"Transaction Overview"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-purple-600 text-xs font-bold",children:"#"})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Transaction ID"})]}),t.jsx("p",{className:"text-sm font-mono text-gray-800 bg-gray-50 px-2 py-1 rounded",children:e.transaction_id})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-green-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Amount"})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r(e.amount)})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-blue-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-orange-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Status"})]}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.status})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg p-4 border border-emerald-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx("span",{className:"text-white text-sm",children:""})}),t.jsx("h4",{className:"text-lg font-semibold text-emerald-900",children:"Payment Details"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-blue-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Payment Method"})]}),t.jsx("p",{className:"text-sm text-gray-800",children:e.payment_method}),t.jsxs("p",{className:"text-xs text-gray-500",children:["via ",e.payment_gateway]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-emerald-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-green-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Fees"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-sm text-gray-800",children:["Platform: ",r(e.platform_fee)]}),t.jsxs("p",{className:"text-sm text-gray-800",children:["Gateway: ",r(e.gateway_fee)]}),t.jsxs("p",{className:"text-sm text-gray-800",children:["Provider: ",r(e.provider_amount)]})]})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx("span",{className:"text-white text-sm",children:""})}),t.jsx("h4",{className:"text-lg font-semibold text-purple-900",children:"User & Provider"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-purple-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"User"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.user.name}),t.jsx("p",{className:"text-sm text-gray-600",children:e.user.email}),t.jsx("p",{className:"text-sm text-gray-600",children:e.user.phone})]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-purple-100",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("div",{className:"w-6 h-6 bg-pink-100 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-pink-600 text-xs",children:""})}),t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Provider"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.provider.name}),t.jsx("p",{className:"text-sm text-gray-600",children:e.provider.business_name}),t.jsx("p",{className:"text-sm text-gray-600",children:e.provider.email})]})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg p-4 border border-orange-100",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx("span",{className:"text-white text-sm",children:""})}),t.jsx("h4",{className:"text-lg font-semibold text-orange-900",children:"Booking Details"})]}),t.jsx("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-orange-100",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Date"}),t.jsx("p",{className:"text-sm text-gray-900",children:s(e.booking.date)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Time"}),t.jsx("p",{className:"text-sm text-gray-900",children:e.booking.time})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Amount"}),t.jsx("p",{className:"text-sm text-gray-900",children:r(e.booking.amount)})]})]})})]}),e.refunds&&e.refunds.length>0&&t.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-rose-50 rounded-lg p-4 border border-red-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx("span",{className:"text-white text-sm",children:""})}),t.jsx("h4",{className:"text-lg font-semibold text-red-900",children:"Refunds"})]}),t.jsxs("div",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm font-medium",children:[e.refunds.length," Refund",e.refunds.length!==1?"s":""]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-red-100 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-red-50 border-b border-red-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-red-900",children:"Refund ID"}),t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-red-900",children:"Amount"}),t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-red-900",children:"Reason"}),t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-red-900",children:"Status"}),t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-red-900",children:"Processed At"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-100",children:e.refunds.map(a=>t.jsxs("tr",{className:"hover:bg-red-50 transition-colors",children:[t.jsx("td",{className:"py-3 px-4",children:t.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.refund_id})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("p",{className:"text-sm text-gray-900",children:r(a.amount)})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("p",{className:"text-sm text-gray-900",children:a.reason})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:a.status})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("p",{className:"text-sm text-gray-900",children:s(a.processed_at)})})]},a.id))})]})})})]}),e.wallet_transactions&&e.wallet_transactions.length>0&&t.jsxs("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 rounded-lg p-4 border border-cyan-100",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-cyan-500 rounded-lg flex items-center justify-center mr-3",children:t.jsx("span",{className:"text-white text-sm",children:""})}),t.jsx("h4",{className:"text-lg font-semibold text-cyan-900",children:"Wallet Transactions"})]}),t.jsxs("div",{className:"bg-cyan-100 text-cyan-700 px-3 py-1 rounded-full text-sm font-medium",children:[e.wallet_transactions.length," Transaction",e.wallet_transactions.length!==1?"s":""]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-cyan-100 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-cyan-50 border-b border-cyan-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Amount"}),t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Type"}),t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Category"}),t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Description"}),t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Balance After"}),t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-cyan-900",children:"Date"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-100",children:e.wallet_transactions.map(a=>t.jsxs("tr",{className:"hover:bg-cyan-50 transition-colors",children:[t.jsx("td",{className:"py-3 px-4",children:t.jsx("p",{className:`text-sm font-medium ${a.type==="credit"?"text-green-600":"text-red-600"}`,children:r(a.amount)})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.type==="credit"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.type})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("p",{className:"text-sm text-gray-900",children:a.category})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("p",{className:"text-sm text-gray-900",children:a.description})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("p",{className:"text-sm text-gray-900",children:r(a.balance_after)})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("p",{className:"text-sm text-gray-900",children:s(a.created_at)})})]},a.id))})]})})})]}),e.refunds.length===0&&t.jsx("div",{className:"flex justify-end",children:t.jsxs(J,{onClick:()=>n(e),className:"flex items-center space-x-1 bg-red-600 hover:bg-red-700 text-white",children:[t.jsx(Iy,{size:14}),t.jsx("span",{children:"Process Refund"})]})})]})})}),rb=({searchTerm:e,onSearchChange:s})=>t.jsxs("div",{className:"relative w-64",children:[t.jsx(is,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),t.jsx("input",{type:"text",placeholder:"Search transactions...",className:"pl-8 pr-4 py-2 w-full rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-primary/20",value:e,onChange:r=>s(r.target.value)})]}),nb=({currentPage:e,totalPages:s,startIndex:r,itemsPerPage:n,totalItems:a,onPageChange:i})=>t.jsxs("div",{className:"flex items-center justify-between mt-4",children:[t.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",r+1," to ",Math.min(r+n,a)," of ",a," transactions"]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(J,{onClick:()=>i(Math.max(e-1,1)),disabled:e===1,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(fr,{size:16})}),t.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",e," of ",s]}),t.jsx(J,{onClick:()=>i(Math.min(e+1,s)),disabled:e===s,className:"flex items-center justify-center p-2 border border-gray-200 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx(ns,{size:16})})]})]}),ab=({isOpen:e,onClose:s,onSubmit:r,transaction:n,isSubmitting:a,formatCurrency:i})=>{const[o,l]=Tt.useState({amount:n.amount,reason:"",reason_description:""}),c=d=>{d.preventDefault(),r(o)};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Process Refund"}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:t.jsx(He,{size:20})})]}),t.jsxs("form",{onSubmit:c,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Amount"}),t.jsx("div",{className:"text-lg font-semibold text-gray-900",children:i(n.amount)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Refund Amount *"}),t.jsx("input",{type:"number",required:!0,min:"0",max:n.amount,step:"0.01",value:o.amount,onChange:d=>l({...o,amount:parseFloat(d.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),t.jsxs("select",{required:!0,value:o.reason,onChange:d=>l({...o,reason:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",children:[t.jsx("option",{value:"",children:"Select a reason"}),t.jsx("option",{value:"customer_request",children:"Customer Request"}),t.jsx("option",{value:"service_not_provided",children:"Service Not Provided"}),t.jsx("option",{value:"quality_issues",children:"Quality Issues"}),t.jsx("option",{value:"duplicate_payment",children:"Duplicate Payment"}),t.jsx("option",{value:"other",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason Description *"}),t.jsx("textarea",{required:!0,value:o.reason_description,onChange:d=>l({...o,reason_description:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/20",rows:3,placeholder:"Provide additional details about the refund reason..."})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(J,{type:"button",onClick:s,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),t.jsx(J,{type:"submit",disabled:a,className:"bg-red-600 hover:bg-red-700 text-white",children:a?"Processing...":"Process Refund"})]})]})]})}):null},sl={},rl=(sl==null?void 0:sl.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",ib=()=>{const{addToast:e}=ot(),[s,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(""),[l,c]=p.useState(1),[d,h]=p.useState(null),[u,f]=p.useState(null),[g,_]=p.useState(!1),[b,w]=p.useState(!1),[x,y]=p.useState(1),[m,j]=p.useState(0),[C,F]=p.useState({status:"",payment_status:"",user_id:"",provider_id:"",booking_id:""}),L=10;p.useEffect(()=>{$()},[l,C]);const $=async()=>{var E,B;const O=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(!O){e("Please login to view transactions","error"),a(!1);return}try{a(!0);const Q=new URLSearchParams;Q.append("page",l.toString()),Q.append("limit",L.toString()),i&&Q.append("search",i),Object.entries(C).forEach(([ie,v])=>{v&&Q.append(ie,v.toString())});const A=await fetch(`${rl}/admin/transactions?${Q.toString()}`,{headers:{Authorization:`Bearer ${O}`,"Content-Type":"application/json"}});if(!A.ok){if(A.status===401){e("Authentication failed. Please log in again.","error");return}if(A.status===404){console.warn("Transactions endpoint not found. Backend may not be implemented yet."),r([]),y(1),j(0),a(!1);return}throw new Error(`HTTP error! status: ${A.status}`)}const W=await A.json(),ee=W.data||W.transactions||[];Array.isArray(ee)?(r(ee),y(((E=W.pagination)==null?void 0:E.total_pages)||Math.ceil(ee.length/L)||1),j(((B=W.pagination)==null?void 0:B.total)||ee.length||0)):(r([]),y(1),j(0))}catch(Q){console.error("Error fetching transactions:",Q),e("Failed to fetch transactions. The backend endpoint may not be implemented yet.","error"),r([]),y(1),j(0)}finally{a(!1)}},P=async O=>{const E=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(!E)return e("Please login to view transaction details","error"),null;try{const B=await fetch(`${rl}/admin/transactions/${O}`,{headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"}});if(!B.ok){if(B.status===404)return e("Transaction details not found","error"),null;throw new Error(`HTTP error! status: ${B.status}`)}const Q=await B.json();return Q.transaction||Q.data||null}catch(B){return console.error("Error fetching transaction details:",B),e("Failed to fetch transaction details","error"),null}},z=async O=>{if(d===O)h(null),f(null);else{h(O);const E=await P(O);f(E)}},H=async O=>{f(O),_(!0)},q=async O=>{if(!u)return;w(!0);const E=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");try{const B=await fetch(`${rl}/admin/transactions/${u.id}/refund`,{method:"POST",headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"},body:JSON.stringify(O)});if(!B.ok)throw new Error(`HTTP error! status: ${B.status}`);const Q=await B.json();e(Q.message||"Refund processed successfully","success"),_(!1),f(null),$()}catch(B){console.error("Error processing refund:",B),e("Failed to process refund","error")}finally{w(!1)}},k=O=>{if(!O)return"N/A";try{return new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return O}},S=O=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(O),M=(O,E)=>{F(B=>({...B,[O]:E})),c(1)},I=s.filter(O=>{if(!i)return!0;const E=i.toLowerCase();return O.transaction_id.toLowerCase().includes(E)||O.user_name.toLowerCase().includes(E)||O.provider_name.toLowerCase().includes(E)||O.booking_id.toString().includes(E)});return t.jsx(mt,{children:t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Transactions"}),t.jsx("p",{className:"text-gray-600",children:"Track and manage all payment transactions"})]}),t.jsxs(Ee,{children:[t.jsxs(It,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(Mt,{children:"All Transactions"}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx(rb,{searchTerm:i,onSearchChange:o})})]}),t.jsxs("div",{className:"mt-4 flex flex-wrap gap-4",children:[t.jsxs("select",{value:C.status,onChange:O=>M("status",O.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"failed",children:"Failed"})]}),t.jsxs("select",{value:C.payment_status,onChange:O=>M("payment_status",O.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"All Payment Status"}),t.jsx("option",{value:"paid",children:"Paid"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"failed",children:"Failed"})]})]})]}),t.jsx(Pe,{children:n?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):I.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500 text-lg",children:s.length===0?"No transactions found.":"No transactions match your search criteria."}),s.length===0&&t.jsx("p",{className:"text-gray-400 text-sm mt-2"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b bg-gray-50",children:[t.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Transaction ID"}),t.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"User / Provider"}),t.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Amount"}),t.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Status"}),t.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Date"}),t.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Payment Method"}),t.jsx("th",{className:"py-3 px-4 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),t.jsx("tbody",{children:I.map(O=>t.jsxs(Tt.Fragment,{children:[t.jsx(tb,{transaction:O,expandedTransaction:d,onToggleDetails:z,formatDate:k,formatCurrency:S}),d===O.id&&u&&t.jsx(sb,{transaction:u,formatDate:k,formatCurrency:S,onRefundClick:H})]},O.id))})]})}),t.jsx(nb,{currentPage:l,totalPages:x,startIndex:(l-1)*L,itemsPerPage:L,totalItems:m,onPageChange:c})]})})]}),g&&u&&t.jsx(ab,{isOpen:g,transaction:u,onClose:()=>_(!1),onSubmit:q,isSubmitting:b,formatCurrency:S})]})})},Ar=({label:e,error:s,fullWidth:r=!1,className:n="",id:a,...i})=>{const o=a||`input-${Math.random().toString(36).substring(2,9)}`;return t.jsxs("div",{className:`${r?"w-full":""} mb-4`,children:[e&&t.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),t.jsx("input",{id:o,className:`px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary ${s?"border-error":""} ${r?"w-full":""} ${n}`,...i}),s&&t.jsx("p",{className:"mt-1 text-sm text-error",children:s})]})},ob=({open:e,onClose:s,children:r})=>e?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4 text-center",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 transition-opacity",onClick:s}),t.jsx("div",{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:r})]})}):null,lb=({children:e})=>t.jsx("div",{className:"mt-3 text-center sm:mt-5",children:e}),cb=({children:e})=>t.jsx("div",{className:"mb-4",children:e}),db=({children:e})=>t.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:e}),nl={},Lr=(nl==null?void 0:nl.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",ub=()=>{const{addToast:e}=ot(),[s,r]=p.useState([]),[n,a]=p.useState(!1),[i,o]=p.useState(""),[l,c]=p.useState(!1),[d,h]=p.useState("add"),[u,f]=p.useState(null),[g,_]=p.useState(!1),[b,w]=p.useState({coupon_name:"",coupon_title:"",discount_amount:0,total_coupons:1,is_active:!0,is_featured:!1,valid_from:"",valid_until:""}),[x,y]=p.useState({}),m=async()=>{var k;a(!0);try{const S=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token"),M=await fetch(`${Lr}/admin/coupons`,{method:"GET",headers:{"Content-Type":"application/json",...S?{Authorization:`Bearer ${S}`}:{}}}),I=await M.json();if(M.ok&&I.coupons&&Array.isArray(I.coupons))r(I.coupons);else throw new Error(I.message||((k=I.error)==null?void 0:k.message)||"Failed to fetch coupons")}catch(S){console.error("Error fetching coupons:",S);const M=S instanceof Error?S.message:"Failed to fetch coupons";e(M,"error")}finally{a(!1)}};p.useEffect(()=>{m()},[]);const j=()=>{h("add"),f(null),w({coupon_name:"",coupon_title:"",discount_amount:0,total_coupons:1,is_active:!0,is_featured:!1,valid_from:"",valid_until:""}),y({}),c(!0)},C=k=>{h("edit"),f(k),w({coupon_name:k.coupon_name,coupon_title:k.coupon_title,discount_amount:k.discount_amount,total_coupons:k.total_coupons,is_active:k.is_active,is_featured:k.is_featured,valid_from:k.valid_from?k.valid_from.split("T")[0]:"",valid_until:k.valid_until?k.valid_until.split("T")[0]:""}),y({}),c(!0)},F=()=>{const k={};return b.coupon_name.trim()?b.coupon_name.trim().length<3&&(k.coupon_name="Coupon code must be at least 3 characters"):k.coupon_name="Coupon code is required",b.coupon_title.trim()||(k.coupon_title="Coupon title is required"),b.discount_amount<=0&&(k.discount_amount="Discount amount must be greater than 0"),b.total_coupons<=0&&(k.total_coupons="Total coupons must be greater than 0"),b.valid_from&&b.valid_until&&new Date(b.valid_from)>new Date(b.valid_until)&&(k.valid_until="Valid until date must be after valid from date"),y(k),Object.keys(k).length===0},L=async k=>{var S;if(k.preventDefault(),!!F()){_(!0);try{const M=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!M){e("Please login to save coupon","error"),_(!1);return}const I={coupon_name:b.coupon_name.trim().toUpperCase(),coupon_title:b.coupon_title.trim(),discount_amount:b.discount_amount,total_coupons:b.total_coupons,is_active:b.is_active,is_featured:b.is_featured};b.valid_from&&(I.valid_from=`${b.valid_from}T00:00:00Z`),b.valid_until&&(I.valid_until=`${b.valid_until}T23:59:59Z`);const O=d==="add"?`${Lr}/admin/coupons`:`${Lr}/admin/coupons/${u==null?void 0:u.id}`,E=await fetch(O,{method:d==="add"?"POST":"PUT",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"},body:JSON.stringify(I)}),B=await E.json();if(E.ok)await m(),e(`Coupon ${d==="add"?"created":"updated"} successfully`,"success"),c(!1);else{const Q=((S=B.error)==null?void 0:S.message)||B.message||`Failed to ${d==="add"?"create":"update"} coupon`;throw new Error(Q)}}catch(M){console.error(`Error ${d==="add"?"creating":"updating"} coupon:`,M);const I=M instanceof Error?M.message:`Failed to ${d==="add"?"create":"update"} coupon`;e(I,"error")}finally{_(!1)}}},$=async k=>{var S;if(confirm(`Are you sure you want to delete coupon "${k.coupon_name}"?`)){_(!0);try{const M=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!M){e("Please login to delete coupon","error"),_(!1);return}const I=await fetch(`${Lr}/admin/coupons/${k.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}}),O=await I.json();if(I.ok)r(E=>E.filter(B=>B.id!==k.id)),e("Coupon deleted successfully","success");else throw new Error(((S=O.error)==null?void 0:S.message)||O.message||"Failed to delete coupon")}catch(M){console.error("Error deleting coupon:",M);const I=M instanceof Error?M.message:"Failed to delete coupon";e(I,"error")}finally{_(!1)}}},P=async k=>{var S;try{const M=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!M){e("Please login to update coupon","error");return}const I=await fetch(`${Lr}/admin/coupons/${k.id}/toggle-active`,{method:"PUT",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}}),O=await I.json();if(I.ok)await m(),e(`Coupon ${k.is_active?"deactivated":"activated"} successfully`,"success");else throw new Error(((S=O.error)==null?void 0:S.message)||O.message||"Failed to update coupon")}catch(M){console.error("Error toggling coupon active status:",M);const I=M instanceof Error?M.message:"Failed to update coupon";e(I,"error")}},z=async k=>{var S;try{const M=localStorage.getItem("admin_token")||localStorage.getItem("blinkcare_token");if(!M){e("Please login to update coupon","error");return}const I=await fetch(`${Lr}/admin/coupons/${k.id}/toggle-featured`,{method:"PUT",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}}),O=await I.json();if(I.ok)await m(),e(`Coupon ${k.is_featured?"unfeatured":"featured"} successfully`,"success");else throw new Error(((S=O.error)==null?void 0:S.message)||O.message||"Failed to update coupon")}catch(M){console.error("Error toggling coupon featured status:",M);const I=M instanceof Error?M.message:"Failed to update coupon";e(I,"error")}},H=s.filter(k=>k.coupon_name.toLowerCase().includes(i.toLowerCase())||k.coupon_title.toLowerCase().includes(i.toLowerCase())),q=k=>k?new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return t.jsxs(mt,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Coupon Management"}),t.jsx("p",{className:"text-gray-600",children:"Create and manage discount coupons for users"})]}),n?t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading coupons..."})]}):t.jsxs(Ee,{children:[t.jsxs(It,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[t.jsx(Mt,{children:"All Coupons"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),t.jsx("input",{type:"text",placeholder:"Search coupons...",value:i,onChange:k=>o(k.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"})]}),t.jsxs(J,{onClick:j,className:"flex items-center space-x-2",children:[t.jsx(Ws,{size:16}),t.jsx("span",{children:"Add Coupon"})]})]})]}),t.jsx(Pe,{children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{className:"text-left pb-4",children:"Code"}),t.jsx("th",{className:"text-left pb-4",children:"Title"}),t.jsx("th",{className:"text-left pb-4",children:"Discount"}),t.jsx("th",{className:"text-left pb-4",children:"Usage"}),t.jsx("th",{className:"text-left pb-4",children:"Status"}),t.jsx("th",{className:"text-left pb-4",children:"Valid Dates"}),t.jsx("th",{className:"text-left pb-4",children:"Actions"})]})}),t.jsx("tbody",{children:H.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"py-8 text-center text-gray-500",children:i?"No coupons found matching your search":"No coupons found. Create your first coupon!"})}):H.map(k=>t.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors duration-150",children:[t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-bold text-primary text-lg",children:k.coupon_name}),k.is_featured&&t.jsx(Js,{className:"text-yellow-500 fill-yellow-500",size:16})]})}),t.jsx("td",{className:"py-4",children:t.jsx("div",{className:"text-gray-900 font-medium",children:k.coupon_title})}),t.jsx("td",{className:"py-4",children:t.jsxs("span",{className:"text-lg font-bold text-green-600",children:["",k.discount_amount.toLocaleString("en-IN")]})}),t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"text-sm",children:[t.jsxs("div",{className:"text-gray-900 font-medium",children:[k.used_count," / ",k.total_coupons]}),t.jsxs("div",{className:"text-gray-500 text-xs",children:[k.remaining_count||k.total_coupons-k.used_count," remaining"]})]})}),t.jsx("td",{className:"py-4",children:t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("button",{onClick:()=>P(k),className:`flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-colors ${k.is_active?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[k.is_active?t.jsx(By,{size:14}):t.jsx(rc,{size:14}),k.is_active?"Active":"Inactive"]})})}),t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"text-sm text-gray-600",children:[t.jsxs("div",{children:["From: ",q(k.valid_from)]}),t.jsxs("div",{children:["Until: ",q(k.valid_until)]})]})}),t.jsx("td",{className:"py-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>z(k),className:`p-2 rounded transition-colors ${k.is_featured?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:k.is_featured?"Unfeature":"Feature",children:k.is_featured?t.jsx(Js,{className:"fill-current",size:16}):t.jsx(Ry,{size:16})}),t.jsx(J,{onClick:()=>C(k),variant:"outline",size:"sm",children:t.jsx(Ay,{size:14})}),t.jsx(J,{onClick:()=>$(k),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:k.used_count>0,title:k.used_count>0?"Cannot delete used coupon":"Delete coupon",children:t.jsx(fa,{size:14})})]})})]},k.id))})]})})})]}),t.jsx(ob,{open:l,onClose:()=>c(!1),children:t.jsxs(lb,{children:[t.jsx(cb,{children:t.jsx(db,{children:d==="add"?"Add New Coupon":"Edit Coupon"})}),t.jsxs("form",{onSubmit:L,className:"space-y-4",children:[t.jsx(Ar,{label:"Coupon Code *",type:"text",value:b.coupon_name,onChange:k=>{w({...b,coupon_name:k.target.value.toUpperCase()}),x.coupon_name&&y({...x,coupon_name:""})},error:x.coupon_name,placeholder:"SAVE10",disabled:d==="edit",fullWidth:!0}),t.jsx(Ar,{label:"Coupon Title *",type:"text",value:b.coupon_title,onChange:k=>{w({...b,coupon_title:k.target.value}),x.coupon_title&&y({...x,coupon_title:""})},error:x.coupon_title,placeholder:"Save 10 on booking",fullWidth:!0}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(Ar,{label:"Discount Amount () *",type:"number",step:"0.01",min:"0",value:b.discount_amount,onChange:k=>{w({...b,discount_amount:parseFloat(k.target.value)||0}),x.discount_amount&&y({...x,discount_amount:""})},error:x.discount_amount,fullWidth:!0}),t.jsx(Ar,{label:"Total Coupons *",type:"number",min:"1",value:b.total_coupons,onChange:k=>{w({...b,total_coupons:parseInt(k.target.value)||1}),x.total_coupons&&y({...x,total_coupons:""})},error:x.total_coupons,fullWidth:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(Ar,{label:"Valid From (Optional)",type:"date",value:b.valid_from,onChange:k=>{w({...b,valid_from:k.target.value}),x.valid_from&&y({...x,valid_from:""})},error:x.valid_from,fullWidth:!0}),t.jsx(Ar,{label:"Valid Until (Optional)",type:"date",value:b.valid_until,onChange:k=>{w({...b,valid_until:k.target.value}),x.valid_until&&y({...x,valid_until:""})},error:x.valid_until,fullWidth:!0})]}),t.jsxs("div",{className:"flex items-center space-x-6",children:[t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:b.is_active,onChange:k=>w({...b,is_active:k.target.checked}),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]}),t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:b.is_featured,onChange:k=>w({...b,is_featured:k.target.checked}),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Featured"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[t.jsx(J,{type:"button",variant:"outline",onClick:()=>c(!1),disabled:g,children:"Cancel"}),t.jsx(J,{type:"submit",disabled:g,isLoading:g,children:d==="add"?"Create Coupon":"Update Coupon"})]})]})]})})]})},al={},ks=(al==null?void 0:al.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",mb=()=>{const{addToast:e}=ot(),[s,r]=p.useState([]),[n,a]=p.useState([]),[i,o]=p.useState(!0),[l,c]=p.useState(!1),[d,h]=p.useState(!1),[u,f]=p.useState(null),[g,_]=p.useState(!1),[b,w]=p.useState(""),[x,y]=p.useState(null),[m,j]=p.useState({booking_id:"",user_id:"",provider_id:"",bill_amount:"",notes:""}),[C,F]=p.useState({user_id:"",provider_id:"",booking_id:"",payment_status:""}),[L,$]=p.useState(!1),[P,z]=p.useState(null),[H,q]=p.useState(!1),[k,S]=p.useState(""),[M,I]=p.useState(!1),O=p.useRef(null),E=p.useRef(null);p.useEffect(()=>{const T=D=>{E.current&&!E.current.contains(D.target)&&O.current&&!O.current.contains(D.target)&&I(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]),p.useEffect(()=>{B(),Q()},[C]);const B=async()=>{const T=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(T){o(!0);try{const D=new URLSearchParams;Object.entries(C).forEach(([te,se])=>{se&&D.append(te,se)});const V=await fetch(`${ks}/admin/bills?${D.toString()}`,{headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(V.ok){const te=await V.json();r(te.bills||[])}}catch{e("Failed to load bills","error")}finally{o(!1)}}},Q=async()=>{const T=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(T)try{const D=await fetch(`${ks}/admin/appointments?limit=1000`,{headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(D.ok){const V=await D.json(),te=V.data||V.bookings||[];a(te.map(se=>{var xe,de,Y,Se;return{id:se.id,user_id:se.user_id,provider_id:se.provider_id,service_name:se.service_name||se.service_title||"Service",user_name:se.user_name||((xe=se.user)==null?void 0:xe.full_name)||((de=se.user)==null?void 0:de.name)||`User #${se.user_id}`,provider_name:se.provider_name||((Y=se.provider)==null?void 0:Y.full_name)||((Se=se.provider)==null?void 0:Se.name)||(se.provider_id?`Provider #${se.provider_id}`:"Unassigned"),payment_amount:se.payment_amount||se.total_amount||0}}))}}catch(D){console.error("Failed to load bookings:",D)}},A=async T=>{const D=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(D){q(!0),z(null);try{let V=null,te=[],se={total_amount:0,paid_amount:0,outstanding_amount:0};const xe=n.find(de=>de.id===T);xe&&(V={id:xe.id,user_id:xe.user_id,provider_id:xe.provider_id,service_name:xe.service_name,service_title:xe.service_name,user_name:xe.user_name,provider_name:xe.provider_name,payment_amount:xe.payment_amount||0,user_full_name:xe.user_name,provider_full_name:xe.provider_name});try{const de=await fetch(`${ks}/admin/bills/booking/${T}`,{headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"}});if(de.ok){const Y=await de.json();Y.booking&&(V={id:Y.booking.id,user_id:Y.booking.user_id,provider_id:Y.booking.provider_id,service_name:Y.booking.service_title||Y.booking.service_name||"Service",service_title:Y.booking.service_title,user_name:Y.booking.user_full_name||Y.booking.user_name||`User #${Y.booking.user_id}`,provider_name:Y.booking.provider_full_name||Y.booking.provider_name||(Y.booking.provider_id?`Provider #${Y.booking.provider_id}`:"Unassigned"),payment_amount:Y.booking.payment_amount||Y.booking.service_price_discounted||Y.booking.service_price_original||0,user_full_name:Y.booking.user_full_name,provider_full_name:Y.booking.provider_full_name}),se=Y.outstanding_info||{total_amount:(V==null?void 0:V.payment_amount)||0,paid_amount:0,outstanding_amount:(V==null?void 0:V.payment_amount)||0},te=Y.bills||[]}else if(de.status===404)console.log("Booking not found in bills endpoint, using data from bookings list");else{const Y=await de.json().catch(()=>({}));console.error("Bills endpoint error:",Y)}}catch(de){console.error("Error fetching from bills endpoint:",de)}if(!V)try{const de=await fetch(`${ks}/admin/appointments?limit=1000`,{headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"}});if(de.ok){const Y=await de.json(),he=(Y.data||Y.bookings||[]).find(We=>We.id===T);he&&(V={id:he.id,user_id:he.user_id,provider_id:he.provider_id,service_name:he.service_title||he.service_name||"Service",service_title:he.service_title,user_name:he.user_full_name||he.user_name||`User #${he.user_id}`,provider_name:he.provider_full_name||he.provider_name||(he.provider_id?`Provider #${he.provider_id}`:"Unassigned"),payment_amount:he.payment_amount||he.service_price_discounted||he.service_price_original||0,user_full_name:he.user_full_name,provider_full_name:he.provider_full_name})}}catch(de){console.error("Error fetching from appointments endpoint:",de)}V?(se.total_amount===0&&V.payment_amount&&(se={total_amount:V.payment_amount,paid_amount:te.reduce((de,Y)=>de+Y.bill_amount,0),outstanding_amount:V.payment_amount-te.reduce((de,Y)=>de+Y.bill_amount,0)}),z({booking:V,outstanding_info:se,bills:te}),se.outstanding_amount>0&&j(de=>({...de,bill_amount:se.outstanding_amount.toString()}))):(e(`Booking #${T} not found. Please check the booking ID.`,"error"),z(null))}catch(V){console.error("Failed to load booking details:",V),e("Failed to load booking details. Please try again.","error"),z(null)}finally{q(!1)}}},W=T=>{const D=parseInt(T);if(isNaN(D)){e("Please enter a valid booking ID","error");return}j({...m,booking_id:T});const V=n.find(te=>te.id===D);S(V?`#${V.id} - ${V.service_name} - ${V.user_name}`:`#${D}`),I(!1),A(D)},ee=n.filter(T=>{if(!k)return!1;const D=k.toLowerCase();return T.id.toString().includes(D)||T.service_name.toLowerCase().includes(D)||T.user_name.toLowerCase().includes(D)||T.provider_name.toLowerCase().includes(D)}),ie=async T=>{var V;T.preventDefault();const D=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(D){if(!P){e("Please select a booking first","error");return}$(!0);try{const te=await fetch(`${ks}/admin/bills/generate`,{method:"POST",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"},body:JSON.stringify({booking_id:parseInt(m.booking_id),user_id:P.booking.user_id,provider_id:P.booking.provider_id||null,bill_amount:parseFloat(m.bill_amount),generated_by:"Admin",notes:m.notes})});if(te.ok)e("Bill generated successfully","success"),c(!1),j({booking_id:"",user_id:"",provider_id:"",bill_amount:"",notes:""}),S(""),z(null),B(),P&&P.booking.id&&A(P.booking.id);else{const se=await te.json();throw new Error(((V=se.error)==null?void 0:V.message)||"Failed to generate bill")}}catch(te){e(te.message||"Failed to generate bill","error")}finally{$(!1)}}},v=async T=>{const D=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(D)try{const V=await fetch(`${ks}/admin/bills/${T}`,{headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"}});if(V.ok){const te=await V.json();f(te.bill),h(!0)}}catch{e("Failed to load bill details","error")}},R=async T=>{var V;const D=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(D)try{const te=await fetch(`${ks}/admin/bills/${T}/download`,{headers:{Authorization:`Bearer ${D}`}});if(te.ok){const se=await te.blob(),xe=window.URL.createObjectURL(se),de=document.createElement("a");de.href=xe;const Y=te.headers.get("Content-Disposition");let Se=`bill_${T}.pdf`;if(Y){const he=Y.match(/filename="?(.+)"?/);he&&(Se=he[1])}de.download=Se,document.body.appendChild(de),de.click(),window.URL.revokeObjectURL(xe),document.body.removeChild(de),e("Bill downloaded successfully","success")}else{const se=await te.json().catch(()=>({}));e(((V=se.error)==null?void 0:V.message)||"Failed to download bill","error")}}catch{e("Failed to download bill","error")}},U=async(T,D,V)=>{var se;const te=localStorage.getItem("blinkcare_token")||localStorage.getItem("admin_token");if(te)try{const xe={payment_status:D};D==="partial"&&V!==void 0&&(xe.paid_amount=V);const de=await fetch(`${ks}/admin/bills/${T}/update-payment-status`,{method:"POST",headers:{Authorization:`Bearer ${te}`,"Content-Type":"application/json"},body:JSON.stringify(xe)});if(de.ok){if(e("Payment status updated","success"),B(),(u==null?void 0:u.id)===T){const Y=await de.json();f(Y.bill)}P&&P.booking.id&&A(P.booking.id)}else{const Y=await de.json();e(((se=Y.error)==null?void 0:se.message)||"Failed to update payment status","error")}}catch{e("Failed to update payment status","error")}},K=()=>{if(!x)return;const T=parseFloat(b);if(isNaN(T)||T<=0){e("Please enter a valid payment amount","error");return}U(x,"partial",T),_(!1),w(""),y(null)},ae=T=>`${T.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,ce=T=>new Date(T).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"});return t.jsx(mt,{children:t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bill Management"}),t.jsx("p",{className:"text-gray-600",children:"Generate and manage bills for bookings"})]}),t.jsxs(J,{onClick:()=>c(!0),className:"flex items-center gap-2",children:[t.jsx(Ws,{size:16}),"Generate Bill"]})]}),t.jsx(Ee,{className:"mb-6",children:t.jsx(Pe,{className:"pt-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"User ID"}),t.jsx("input",{type:"number",value:C.user_id,onChange:T=>F({...C,user_id:T.target.value}),className:"w-full px-3 py-2 border rounded-md",placeholder:"Filter by user"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Provider ID"}),t.jsx("input",{type:"number",value:C.provider_id,onChange:T=>F({...C,provider_id:T.target.value}),className:"w-full px-3 py-2 border rounded-md",placeholder:"Filter by provider"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Booking ID"}),t.jsx("input",{type:"number",value:C.booking_id,onChange:T=>F({...C,booking_id:T.target.value}),className:"w-full px-3 py-2 border rounded-md",placeholder:"Filter by booking"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Payment Status"}),t.jsxs("select",{value:C.payment_status,onChange:T=>F({...C,payment_status:T.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[t.jsx("option",{value:"",children:"All"}),t.jsx("option",{value:"pending",children:"Pending"}),t.jsx("option",{value:"paid",children:"Paid"}),t.jsx("option",{value:"partial",children:"Partial"})]})]})]})})}),t.jsxs(Ee,{children:[t.jsx(It,{children:t.jsx(Mt,{children:"All Bills"})}),t.jsx(Pe,{children:i?t.jsx(Xr,{}):s.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"No bills found"}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Bill Number"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Booking ID"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Outstanding"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Generated"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(T=>{const D=n.find(V=>V.id===T.booking_id);return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:T.bill_number}),t.jsxs("td",{className:"px-4 py-3 text-sm",children:["#",T.booking_id]}),t.jsx("td",{className:"px-4 py-3 text-sm",children:(D==null?void 0:D.user_name)||`User #${T.user_id}`}),t.jsx("td",{className:"px-4 py-3 text-sm",children:ae(T.bill_amount)}),t.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:T.current_outstanding_amount!==void 0?ae(T.current_outstanding_amount):ae(T.outstanding_amount)}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${T.payment_status==="paid"?"bg-green-100 text-green-800":T.payment_status==="partial"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:T.payment_status})}),t.jsx("td",{className:"px-4 py-3 text-sm",children:ce(T.generated_at)}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(J,{onClick:()=>v(T.id),variant:"ghost",size:"sm",title:"View Bill",children:t.jsx(jn,{size:16})}),t.jsx(J,{onClick:()=>R(T.id),variant:"ghost",size:"sm",title:"Download Bill",children:t.jsx(sc,{size:16})})]})})]},T.id)})})]})})})]}),l&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Generate Bill"}),t.jsx("button",{onClick:()=>c(!1),children:t.jsx(He,{size:20})})]}),t.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Booking ID / Select Booking"}),t.jsxs("div",{className:"relative",ref:E,children:[t.jsx("input",{ref:O,type:"text",value:k,onChange:T=>{const D=T.target.value;S(D),I(D.length>0);const V=D.match(/^#?(\d+)$/);if(V){const te=parseInt(V[1]);j({...m,booking_id:te.toString()})}else D.length===0&&(j({...m,booking_id:""}),z(null))},onKeyDown:T=>{if(T.key==="Enter"){T.preventDefault();const D=k.match(/^#?(\d+)$/);if(D){const V=parseInt(D[1]);W(V.toString())}else m.booking_id&&W(m.booking_id)}T.key==="Escape"&&I(!1)},onFocus:()=>{k&&I(!0)},placeholder:"Enter booking ID (e.g., 65) or search by service/user name...",className:"w-full px-3 py-2 border rounded-md",required:!0}),M&&k&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:ee.length>0?ee.slice(0,10).map(T=>t.jsxs("div",{onClick:()=>W(T.id.toString()),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100",children:[t.jsxs("div",{className:"font-medium",children:["#",T.id," - ",T.service_name]}),t.jsxs("div",{className:"text-sm text-gray-600",children:[T.user_name,"  ",T.provider_name]})]},T.id)):t.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No bookings found. You can enter booking ID directly (e.g., 65) and press Enter."})})]}),m.booking_id&&t.jsx("input",{type:"hidden",name:"booking_id",value:m.booking_id})]}),P&&t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-lg p-5 space-y-4 shadow-sm",children:[t.jsxs("div",{className:"flex items-center justify-between border-b-2 border-blue-200 pb-3",children:[t.jsx("h4",{className:"font-bold text-lg text-gray-900",children:" Booking Details"}),t.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded font-medium",children:["ID: #",P.booking.id||m.booking_id]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[t.jsx("span",{className:"text-gray-600 text-xs block mb-1",children:"Service"}),t.jsx("span",{className:"font-semibold text-gray-900 text-base",children:P.booking.service_name||P.booking.service_title||"N/A"})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[t.jsx("span",{className:"text-gray-600 text-xs block mb-1",children:"Booking ID"}),t.jsxs("span",{className:"font-semibold text-gray-900 text-base",children:["#",P.booking.id||m.booking_id]})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[t.jsx("span",{className:"text-gray-600 text-xs block mb-1",children:"User"}),t.jsx("span",{className:"font-semibold text-gray-900 text-base",children:P.booking.user_full_name||P.booking.user_name||`User #${P.booking.user_id}`})]}),t.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:[t.jsx("span",{className:"text-gray-600 text-xs block mb-1",children:"Provider"}),t.jsx("span",{className:"font-semibold text-gray-900 text-base",children:P.booking.provider_full_name||P.booking.provider_name||(P.booking.provider_id?`Provider #${P.booking.provider_id}`:"Unassigned")})]})]}),t.jsxs("div",{className:"bg-white rounded p-3 border border-blue-300",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 block text-xs",children:"Total Booking Amount:"}),t.jsx("span",{className:"font-semibold text-lg text-gray-900",children:ae(P.outstanding_info.total_amount)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 block text-xs",children:"Total Billed Amount:"}),t.jsx("span",{className:"font-semibold text-lg text-green-600",children:ae(P.bills.reduce((T,D)=>T+D.bill_amount,0))}),P.bills.length>0&&t.jsxs("span",{className:"text-xs text-gray-500 block mt-1",children:["(",P.bills.length," ",P.bills.length===1?"bill":"bills",")"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 block text-xs",children:"Outstanding Amount:"}),t.jsx("span",{className:"font-semibold text-lg text-red-600",children:ae(P.outstanding_info.outstanding_amount)}),t.jsx("span",{className:"text-xs text-gray-500 block mt-1",children:"(Remaining to bill)"})]})]}),t.jsx("div",{className:"border-t pt-2 mt-2 text-xs text-gray-600",children:t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Calculation:"}),t.jsxs("span",{className:"font-medium",children:["Total (",ae(P.outstanding_info.total_amount),") - Billed (",ae(P.bills.reduce((T,D)=>T+D.bill_amount,0)),") = Outstanding (",ae(P.outstanding_info.outstanding_amount),")"]})]})})]}),t.jsxs("div",{children:[t.jsxs("h5",{className:"font-medium text-gray-900 mb-2",children:["Bill History",P.bills.length>0&&t.jsxs("span",{className:"text-gray-500 font-normal",children:["(",P.bills.length," ",P.bills.length===1?"bill":"bills",")"]})]}),P.bills.length>0?t.jsx("div",{className:"bg-white rounded border border-gray-200 max-h-48 overflow-y-auto",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsx("thead",{className:"bg-gray-50 sticky top-0",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Bill #"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Amount"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Status"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Generated Date"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Paid Date"})]})}),t.jsx("tbody",{children:P.bills.map((T,D)=>t.jsxs("tr",{className:`border-b hover:bg-gray-50 ${D===P.bills.length-1?"border-b-2 border-blue-300":""}`,children:[t.jsx("td",{className:"px-3 py-2 font-medium",children:T.bill_number}),t.jsx("td",{className:"px-3 py-2 font-semibold",children:ae(T.bill_amount)}),t.jsx("td",{className:"px-3 py-2",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${T.payment_status==="paid"?"bg-green-100 text-green-800":T.payment_status==="partial"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:T.payment_status.charAt(0).toUpperCase()+T.payment_status.slice(1)})}),t.jsx("td",{className:"px-3 py-2",children:ce(T.generated_at)}),t.jsx("td",{className:"px-3 py-2",children:T.paid_at?t.jsx("span",{className:"text-green-600",children:ce(T.paid_at)}):t.jsx("span",{className:"text-gray-400",children:"-"})})]},T.id))}),t.jsx("tfoot",{className:"bg-gray-50 border-t-2 border-blue-300",children:t.jsxs("tr",{children:[t.jsx("td",{colSpan:2,className:"px-3 py-2 font-semibold text-right",children:"Total Billed:"}),t.jsx("td",{colSpan:3,className:"px-3 py-2 font-bold text-lg",children:ae(P.bills.reduce((T,D)=>T+D.bill_amount,0))})]})})]})}):t.jsx("div",{className:"bg-white rounded border border-gray-200 p-4 text-center text-gray-500 text-sm",children:"No bills generated yet for this booking. The outstanding amount shown above is the total booking amount."})]})]}),H&&t.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading booking details..."}),P&&t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"User"}),t.jsx("input",{type:"text",value:P.booking.user_full_name||P.booking.user_name||`User #${P.booking.user_id}`,readOnly:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-50 font-medium"}),t.jsx("input",{type:"hidden",name:"user_id",value:P.booking.user_id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Provider"}),t.jsx("input",{type:"text",value:P.booking.provider_full_name||P.booking.provider_name||(P.booking.provider_id?`Provider #${P.booking.provider_id}`:"Unassigned"),readOnly:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-50 font-medium"}),P.booking.provider_id&&t.jsx("input",{type:"hidden",name:"provider_id",value:P.booking.provider_id})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bill Amount ()"}),t.jsx("input",{type:"number",step:"0.01",value:m.bill_amount,onChange:T=>j({...m,bill_amount:T.target.value}),className:"w-full px-3 py-2 border rounded-md",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes (Optional)"}),t.jsx("textarea",{value:m.notes,onChange:T=>j({...m,notes:T.target.value}),className:"w-full px-3 py-2 border rounded-md",rows:3})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(J,{type:"button",variant:"outline",onClick:()=>{c(!1),j({booking_id:"",user_id:"",provider_id:"",bill_amount:"",notes:""}),S(""),z(null),I(!1)},onBlur:()=>setTimeout(()=>I(!1),200),children:"Cancel"}),t.jsx(J,{type:"submit",disabled:L,children:L?"Generating...":"Generate Bill"})]})]})]})}),g&&x&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Enter Partial Payment Amount"}),t.jsx("button",{onClick:()=>{_(!1),w(""),y(null)},children:t.jsx(He,{size:20})})]}),t.jsxs("div",{className:"space-y-4",children:[u&&t.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Bill Amount:"}),t.jsx("div",{className:"text-lg font-semibold",children:ae(u.bill_amount)}),u.outstanding_amount>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-sm text-gray-600 mt-2",children:"Outstanding:"}),t.jsx("div",{className:"text-base font-medium text-red-600",children:ae(u.outstanding_amount)})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Amount Paid ()"}),t.jsx("input",{type:"number",step:"0.01",min:"0.01",max:(u==null?void 0:u.outstanding_amount)||(u==null?void 0:u.bill_amount)||0,value:b,onChange:T=>w(T.target.value),placeholder:"Enter amount being paid",className:"w-full px-3 py-2 border rounded-md",autoFocus:!0,onKeyDown:T=>{T.key==="Enter"&&(T.preventDefault(),K())}}),u&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",ae(u.outstanding_amount||u.bill_amount)]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[t.jsx(J,{type:"button",variant:"outline",onClick:()=>{_(!1),w(""),y(null)},children:"Cancel"}),t.jsx(J,{onClick:K,disabled:!b||parseFloat(b)<=0,children:"Confirm Partial Payment"})]})]})]})}),d&&u&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold",children:["Bill Details - ",u.bill_number]}),t.jsx("button",{onClick:()=>h(!1),children:t.jsx(He,{size:20})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Bill Number"}),t.jsx("p",{className:"text-lg font-semibold",children:u.bill_number})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Amount"}),t.jsx("p",{className:"text-lg font-semibold text-green-600",children:ae(u.bill_amount)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Outstanding"}),t.jsx("p",{className:"text-lg font-semibold",children:ae(u.outstanding_amount)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status"}),t.jsx("p",{className:"text-lg",children:t.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${u.payment_status==="paid"?"bg-green-100 text-green-800":u.payment_status==="partial"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:u.payment_status})})]})]}),u.notes&&t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Notes"}),t.jsx("p",{className:"text-sm",children:u.notes})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[t.jsxs(J,{onClick:()=>R(u.id),variant:"outline",className:"flex items-center gap-2",children:[t.jsx(sc,{size:16}),"Download PDF"]}),t.jsx(J,{onClick:()=>U(u.id,"paid"),className:"bg-green-600 hover:bg-green-700",disabled:u.payment_status==="paid",children:"Mark as Paid"})]})]})]})})]})})},il={},pb=(il==null?void 0:il.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",hb=()=>{const[e,s]=p.useState(""),[r,n]=p.useState(""),[a,i]=p.useState(!1),o=vn(),{addToast:l}=ot(),c=async d=>{var h;d.preventDefault(),i(!0);try{const u=await fetch(`${pb}/lead-admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})}),f=await u.json();u.ok&&f.success?(localStorage.setItem("lead_admin_token",f.token),localStorage.setItem("lead_admin_user",JSON.stringify(f.admin)),l("Login successful!","success"),o("/lead-admin/dashboard",{replace:!0})):l(((h=f.error)==null?void 0:h.message)||"Invalid username or password","error")}catch(u){console.error("Login error:",u),l("Login failed. Please try again.","error")}finally{i(!1)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 via-amber-50 to-orange-100 px-4",children:t.jsx("div",{className:"w-full max-w-md",children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-r from-orange-500 to-amber-400 mb-4",children:t.jsx(bn,{className:"text-white",size:32})}),t.jsx("h1",{className:"text-3xl font-bold text-orange-900 mb-2",children:"Lead Admin Login"}),t.jsx("p",{className:"text-sm text-orange-600",children:"Access your lead management dashboard"})]}),t.jsxs("form",{onSubmit:c,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-orange-700 mb-2",children:"Username"}),t.jsx("input",{type:"text",value:e,onChange:d=>s(d.target.value),className:"w-full rounded-xl border border-orange-200 bg-white px-4 py-3 text-orange-900 placeholder-orange-300 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-200",placeholder:"Enter your username",required:!0,disabled:a})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-orange-700 mb-2",children:"Password"}),t.jsx("input",{type:"password",value:r,onChange:d=>n(d.target.value),className:"w-full rounded-xl border border-orange-200 bg-white px-4 py-3 text-orange-900 placeholder-orange-300 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-200",placeholder:"Enter your password",required:!0,disabled:a})]}),t.jsx("button",{type:"submit",disabled:a||!e||!r,className:"w-full rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-6 py-3 text-white font-semibold shadow-lg hover:from-orange-600 hover:to-amber-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?t.jsxs(t.Fragment,{children:[t.jsx(rs,{className:"w-5 h-5 animate-spin"}),"Logging in..."]}):"Login"})]})]})})})},ol={},Dn=(ol==null?void 0:ol.VITE_API_BASE_URL)||"https://backendpetify.mycartly.in/api",Ya={New:{badge:"bg-orange-100 text-orange-700 border border-orange-200",dot:"bg-orange-500"},Contacted:{badge:"bg-amber-100 text-amber-700 border border-amber-200",dot:"bg-amber-500"},Converted:{badge:"bg-emerald-100 text-emerald-700 border border-emerald-200",dot:"bg-emerald-500"},Lost:{badge:"bg-rose-100 text-rose-600 border border-rose-200",dot:"bg-rose-500"},Available:{badge:"bg-blue-100 text-blue-700 border border-blue-200",dot:"bg-blue-500"},"Not connected":{badge:"bg-gray-100 text-gray-700 border border-gray-200",dot:"bg-gray-500"}},Xa=(e=!1)=>{const s=localStorage.getItem("lead_admin_token"),r={};return s&&(r.Authorization=`Bearer ${s}`),e&&(r["Content-Type"]="application/json"),r},xb=({lead:e,onClose:s,onUpdate:r})=>{const[n,a]=p.useState((e==null?void 0:e.status)??"New"),[i,o]=p.useState((e==null?void 0:e.notes)||""),[l,c]=p.useState(!1);if(p.useEffect(()=>{e&&(a(e.status),o(e.notes||""))},[e]),!e)return null;const d=async()=>{c(!0);try{await r(e.id,{status:n,notes:i}),s()}catch(h){console.error("Error updating lead:",h)}finally{c(!1)}};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4 py-8",children:t.jsxs("div",{className:"relative w-full max-w-3xl rounded-3xl bg-white shadow-2xl max-h-[90vh] overflow-y-auto",children:[t.jsx("button",{onClick:s,className:"absolute right-4 top-4 rounded-full bg-orange-100 p-2 text-orange-600 hover:bg-orange-200 transition-colors z-10",children:t.jsx(He,{size:18})}),t.jsx("div",{className:"rounded-t-3xl bg-gradient-to-r from-orange-500 to-amber-400 px-8 py-6 text-white sticky top-0",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(bn,{size:28}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold",children:"Lead Details"}),t.jsx("p",{className:"text-sm text-orange-100/90",children:"Update status and add notes"})]})]})}),t.jsxs("div",{className:"grid gap-6 px-8 py-6 md:grid-cols-2",children:[t.jsxs("div",{className:"space-y-3 rounded-2xl border border-orange-100 bg-orange-50/40 p-5",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"rounded-2xl bg-white/90 p-3 shadow-sm",children:t.jsx(ft,{className:"text-orange-500",size:22})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-orange-500",children:"Pet Owner"}),t.jsx("p",{className:"text-lg font-semibold text-orange-900",children:e.owner_name})]})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[t.jsx(Vs,{size:16}),t.jsx("span",{children:e.email})]}),t.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[t.jsx(Nr,{size:16}),t.jsx("span",{children:e.phone})]}),e.location&&t.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[t.jsx(gs,{size:16}),t.jsx("span",{children:e.location})]}),e.scheduled_date&&t.jsxs("div",{className:"flex items-center gap-3 text-sm text-orange-700",children:[t.jsx(cd,{size:16}),t.jsxs("span",{children:["Scheduled: ",new Date(e.scheduled_date).toLocaleDateString(),e.scheduled_time&&` at ${e.scheduled_time}`]})]})]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"rounded-2xl border border-orange-100 p-5",children:[t.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-orange-500 mb-3",children:"Lead Status"}),t.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:["New","Contacted","Converted","Lost","Available","Not connected"].map(h=>t.jsxs("button",{onClick:()=>a(h),className:`flex items-center justify-between rounded-xl border p-3 text-sm font-medium transition-all ${n===h?"border-orange-500 bg-orange-50 text-orange-700 shadow-sm":"border-orange-100 bg-white text-orange-500 hover:border-orange-200"}`,children:[t.jsx("span",{children:h}),h==="Converted"?t.jsx(gr,{size:18}):h==="Lost"?t.jsx(St,{size:18}):t.jsx(Oh,{size:18})]},h))})]})})]}),t.jsxs("div",{className:"px-8 pb-8",children:[t.jsxs("div",{className:"rounded-2xl border border-orange-100 bg-orange-50/40 p-5",children:[t.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-orange-500 mb-3",children:"Notes"}),t.jsx("textarea",{value:i,onChange:h=>o(h.target.value),rows:4,className:"w-full rounded-xl border border-orange-200 bg-white px-4 py-2 text-sm text-orange-900 outline-none focus:border-orange-400",placeholder:"Add notes about this lead..."})]}),t.jsxs("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:justify-end",children:[t.jsx("button",{onClick:s,disabled:l,className:"rounded-xl border border-orange-200 px-5 py-2 text-sm font-medium text-orange-500 hover:bg-orange-50 transition-colors disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:d,disabled:l,className:"rounded-xl bg-gradient-to-r from-orange-500 to-amber-400 px-5 py-2 text-sm font-semibold text-white shadow-sm hover:from-orange-600 hover:to-amber-500 transition-colors disabled:opacity-50 flex items-center gap-2",children:l?t.jsxs(t.Fragment,{children:[t.jsx(rs,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})},gb=({leads:e,onClose:s,onViewLead:r})=>t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4 py-8",children:t.jsxs("div",{className:"relative w-full max-w-2xl rounded-3xl bg-white shadow-2xl",children:[t.jsx("button",{onClick:s,className:"absolute right-4 top-4 rounded-full bg-red-100 p-2 text-red-600 hover:bg-red-200 transition-colors",children:t.jsx(He,{size:18})}),t.jsx("div",{className:"rounded-t-3xl bg-gradient-to-r from-red-500 to-orange-500 px-8 py-6 text-white",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ui,{size:28,className:"animate-pulse"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold",children:"Alarm: Upcoming Calls"}),t.jsxs("p",{className:"text-sm text-red-100/90",children:["You have ",e.length," lead(s) scheduled within 10 minutes"]})]})]})}),t.jsx("div",{className:"px-8 py-6 max-h-96 overflow-y-auto",children:e.length===0?t.jsx("p",{className:"text-center text-gray-500 py-8",children:"No upcoming calls"}):t.jsx("div",{className:"space-y-3",children:e.map(n=>t.jsx("div",{className:"rounded-xl border border-red-100 bg-red-50/50 p-4 hover:bg-red-50 transition-colors cursor-pointer",onClick:()=>{r(n),s()},children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold text-red-900",children:n.owner_name}),t.jsx("p",{className:"text-sm text-red-700 mt-1",children:n.phone}),n.scheduled_date&&n.scheduled_time&&t.jsxs("p",{className:"text-xs text-red-600 mt-1 flex items-center gap-1",children:[t.jsx(Ot,{size:12}),new Date(n.scheduled_date).toLocaleDateString()," at ",n.scheduled_time]})]}),t.jsx(ns,{className:"text-red-500",size:20})]})},n.id))})})]})}),fb=()=>{const e=vn(),{addToast:s}=ot(),[r,n]=p.useState([]),[a,i]=p.useState(null),[o,l]=p.useState(""),[c,d]=p.useState("All"),[h,u]=p.useState(!1),[f,g]=p.useState(""),[_,b]=p.useState([]),[w,x]=p.useState(!1);p.useEffect(()=>{if(!localStorage.getItem("lead_admin_token")){e("/lead-admin/login",{replace:!0});return}y(),m();const H=setInterval(m,6e4);return()=>clearInterval(H)},[e]);const y=async()=>{u(!0);try{const z=f?`${Dn}/lead-admin/leads/by-date?date=${f}`:`${Dn}/lead-admin/leads${c!=="All"?`?status=${c}`:""}`,q=await(await fetch(z,{headers:Xa()})).json();q.success&&Array.isArray(q.leads)?n(q.leads):s("Failed to load leads","error")}catch(z){console.error("Error fetching leads:",z),s("Error loading leads","error")}finally{u(!1)}},m=async()=>{try{const H=await(await fetch(`${Dn}/lead-admin/alarms`,{headers:Xa()})).json();H.success&&Array.isArray(H.leads)&&H.leads.length>0&&(b(H.leads),x(!0))}catch(z){console.error("Error checking alarms:",z)}};p.useEffect(()=>{y()},[c,f]);const j=()=>{localStorage.removeItem("lead_admin_token"),localStorage.removeItem("lead_admin_user"),e("/lead-admin/login",{replace:!0})},C=async(z,H)=>{var q,k;try{const S=await fetch(`${Dn}/lead-admin/leads/${z}/update-status`,{method:"PUT",headers:Xa(!0),body:JSON.stringify(H)}),M=await S.json();if(S.ok&&M.success)await y(),s("Lead updated successfully","success");else throw s(((q=M.error)==null?void 0:q.message)||"Failed to update lead","error"),new Error(((k=M.error)==null?void 0:k.message)||"Failed to update lead")}catch(S){throw console.error("Error updating lead:",S),s("Error updating lead","error"),S}},F=async z=>{var H;try{const q=await fetch(`${Dn}/lead-admin/leads/${z}/set-available`,{method:"PUT",headers:Xa()}),k=await q.json();q.ok&&k.success?(await y(),s("Lead marked as available","success")):s(((H=k.error)==null?void 0:H.message)||"Failed to update lead","error")}catch(q){console.error("Error updating lead:",q),s("Error updating lead","error")}},L=p.useMemo(()=>{r.length;const z=r.filter(S=>S.status==="New").length,H=r.filter(S=>S.status==="Contacted").length,q=r.filter(S=>S.status==="Converted").length,k=r.filter(S=>S.status==="Available").length;return[{label:"New Leads",value:z,icon:t.jsx(md,{className:"text-white",size:22}),gradient:"from-orange-500 to-amber-400"},{label:"Contacted",value:H,icon:t.jsx(Vh,{className:"text-orange-500",size:22}),gradient:"from-orange-100 to-amber-100"},{label:"Converted",value:q,icon:t.jsx(gr,{className:"text-emerald-600",size:22}),gradient:"from-emerald-100 to-emerald-50"},{label:"Available",value:k,icon:t.jsx(ld,{className:"text-blue-500",size:22}),gradient:"from-blue-100 to-blue-50"}]},[r]),$=r.filter(z=>z.owner_name.toLowerCase().includes(o.toLowerCase())||z.email.toLowerCase().includes(o.toLowerCase())||z.phone.toLowerCase().includes(o.toLowerCase())),P=JSON.parse(localStorage.getItem("lead_admin_user")||"{}");return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-amber-50 to-orange-100",children:[t.jsxs("div",{className:"space-y-6 p-6",children:[t.jsx("div",{className:"rounded-3xl bg-gradient-to-r from-orange-500 to-amber-400 px-6 py-8 text-white shadow-lg",children:t.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm uppercase tracking-wider text-orange-100/80",children:"Lead Management"}),t.jsx("h1",{className:"mt-2 text-3xl font-bold",children:"My Leads Dashboard"}),t.jsxs("p",{className:"mt-3 max-w-2xl text-sm text-orange-50/80",children:["Welcome, ",P.full_name||P.username]})]}),t.jsxs("button",{onClick:j,className:"flex items-center gap-2 rounded-xl bg-white px-5 py-2 text-sm font-semibold text-orange-600 shadow-sm hover:bg-orange-50 transition-colors",children:[t.jsx(dd,{size:16}),"Logout"]})]})}),t.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:L.map(z=>t.jsx("div",{className:"overflow-hidden rounded-3xl border border-orange-100/60 bg-white/95 shadow-md",children:t.jsxs("div",{className:"relative flex items-center gap-4 p-6",children:[t.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br ${z.gradient} shadow-sm`,children:z.icon}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium uppercase tracking-wide text-orange-500",children:z.label}),t.jsx("p",{className:"mt-1 text-2xl font-semibold text-orange-900",children:z.value})]})]})},z.label))}),t.jsx("div",{className:"rounded-3xl border border-orange-100/60 bg-white/95 shadow-lg p-6",children:t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[t.jsxs("div",{className:"flex flex-1 items-center gap-3 rounded-2xl border border-orange-100 bg-orange-50/60 px-4 py-2",children:[t.jsx(is,{size:18,className:"text-orange-400"}),t.jsx("input",{value:o,onChange:z=>l(z.target.value),placeholder:"Search leads...",className:"flex-1 border-none bg-transparent text-sm text-orange-900 placeholder-orange-300 outline-none"})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-orange-100 bg-white px-4 py-2",children:[t.jsx(bt,{size:16,className:"text-orange-500"}),t.jsx("input",{type:"date",value:f,onChange:z=>g(z.target.value),className:"text-sm text-orange-900 outline-none"}),f&&t.jsx("button",{onClick:()=>g(""),className:"text-orange-400 hover:text-orange-600",children:t.jsx(He,{size:14})})]}),["All","New","Contacted","Converted","Lost","Available","Not connected"].map(z=>t.jsxs("button",{onClick:()=>d(z),className:`flex items-center gap-2 rounded-full border px-4 py-2 text-xs font-semibold uppercase tracking-wide transition-all ${c===z?"border-orange-500 bg-orange-50 text-orange-600 shadow-sm":"border-orange-100 bg-white text-orange-400 hover:border-orange-200"}`,children:[t.jsx(Hi,{size:14}),z]},z))]})]})}),t.jsx("div",{className:"rounded-3xl border border-orange-100/60 bg-white/95 shadow-lg",children:t.jsx("div",{className:"overflow-hidden rounded-2xl border border-orange-100",children:t.jsxs("table",{className:"min-w-full divide-y divide-orange-100",children:[t.jsx("thead",{className:"bg-orange-50/70",children:t.jsxs("tr",{className:"text-left text-xs font-semibold uppercase tracking-wider text-orange-500",children:[t.jsx("th",{className:"px-6 py-4",children:"Pet Owner"}),t.jsx("th",{className:"px-6 py-4",children:"Pet Type"}),t.jsx("th",{className:"px-6 py-4",children:"Service Interest"}),t.jsx("th",{className:"px-6 py-4",children:"Scheduled"}),t.jsx("th",{className:"px-6 py-4",children:"Status"}),t.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-orange-50 bg-white/95",children:h?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:t.jsx("div",{className:"flex items-center justify-center",children:t.jsx(rs,{className:"w-8 h-8 animate-spin text-orange-400"})})})}):$.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-sm text-orange-400",children:"No leads found for the current filters."})}):$.map(z=>{var H,q;return t.jsxs("tr",{className:"transition-colors hover:bg-orange-50/50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-gradient-to-br from-orange-500 to-amber-400 text-white shadow-sm",children:t.jsx(bn,{size:18})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-orange-900",children:z.owner_name}),t.jsx("p",{className:"text-xs text-orange-400",children:z.email})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-orange-50 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-orange-500",children:z.pet_type})}),t.jsx("td",{className:"px-6 py-4 text-sm font-medium text-orange-700",children:z.service_interest}),t.jsx("td",{className:"px-6 py-4 text-sm text-orange-600",children:z.scheduled_date?t.jsxs("div",{children:[t.jsx("div",{children:new Date(z.scheduled_date).toLocaleDateString()}),z.scheduled_time&&t.jsx("div",{className:"text-xs",children:z.scheduled_time})]}):t.jsx("span",{className:"text-orange-300",children:"Not scheduled"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${((H=Ya[z.status])==null?void 0:H.badge)||Ya.New.badge}`,children:[t.jsx("span",{className:`h-2 w-2 rounded-full ${((q=Ya[z.status])==null?void 0:q.dot)||Ya.New.dot}`}),z.status]})}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[z.scheduled_date&&t.jsx("button",{onClick:()=>F(z.id),className:"inline-flex items-center gap-2 rounded-full bg-blue-500 px-3 py-1 text-xs font-semibold text-white shadow-sm hover:bg-blue-600 transition-colors",children:"Mark Available"}),t.jsxs("button",{onClick:()=>i(z),className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-orange-500 to-amber-400 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition-all hover:from-orange-600 hover:to-amber-500",children:["Manage",t.jsx(ns,{size:14})]})]})})]},z.id)})})]})})})]}),t.jsx(xb,{lead:a,onClose:()=>i(null),onUpdate:C}),w&&t.jsx(gb,{leads:_,onClose:()=>x(!1),onViewLead:z=>i(z)})]})},yb=({children:e,allowedRoles:s=[]})=>{const{user:r,isAuthenticated:n,isLoading:a}=Bt();return a?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):n?s.length>0&&(!r||!s.includes(r.role))?(console.log("ProtectedRoute: Role mismatch",{user:r,allowedRoles:s,currentPath:window.location.pathname}),t.jsx(Oi,{to:"/admin/dashboard",replace:!0})):t.jsx(t.Fragment,{children:e}):t.jsx(Oi,{to:"/",replace:!0})},vb=()=>t.jsxs(Ou,{children:[t.jsx(Oe,{path:"/",element:t.jsx(Zu,{})}),t.jsx(Oe,{path:"/admin/login",element:t.jsx(Zu,{})}),t.jsx(Oe,{path:"/lead-admin/login",element:t.jsx(hb,{})}),t.jsx(Oe,{path:"/lead-admin/dashboard",element:t.jsx(fb,{})}),t.jsx(Oe,{path:"/admin/*",element:t.jsx(yb,{allowedRoles:["admin"],children:t.jsxs(Ou,{children:[t.jsx(Oe,{path:"/dashboard",element:t.jsx(cv,{})}),t.jsx(Oe,{path:"/providers",element:t.jsx(vj,{})}),t.jsx(Oe,{path:"/users",element:t.jsx(Sj,{})}),t.jsx(Oe,{path:"/services",element:t.jsx(Mj,{})}),t.jsx(Oe,{path:"/categories",element:t.jsx(zj,{})}),t.jsx(Oe,{path:"/leads",element:t.jsx(Kj,{})}),t.jsx(Oe,{path:"/site",element:t.jsx(eb,{})}),t.jsx(Oe,{path:"/commission",element:t.jsx(Rj,{})}),t.jsx(Oe,{path:"/disputes",element:t.jsx(Uj,{})}),t.jsx(Oe,{path:"/bookings",element:t.jsx(Wj,{})}),t.jsx(Oe,{path:"/transactions",element:t.jsx(ib,{})}),t.jsx(Oe,{path:"/coupons",element:t.jsx(ub,{})}),t.jsx(Oe,{path:"/complaints",element:t.jsx(Gj,{})}),t.jsx(Oe,{path:"/bills",element:t.jsx(mb,{})}),t.jsx(Oe,{path:"*",element:t.jsx(Oi,{to:"/admin/dashboard",replace:!0})})]})})}),t.jsx(Oe,{path:"*",element:t.jsx(Oi,{to:"/",replace:!0})})]});function jb(){return t.jsx(ey,{children:t.jsx(dy,{children:t.jsxs(uy,{children:[" ",t.jsx(vb,{}),t.jsx(my,{})]})})})}bh(document.getElementById("root")).render(t.jsx(p.StrictMode,{children:t.jsx(jb,{})}));
